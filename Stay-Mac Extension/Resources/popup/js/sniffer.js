(()=>{var __webpack_modules__={9662:(e,t,o)=>{var r=o(614),n=o(6330),i=TypeError;e.exports=function(e){if(r(e))return e;throw i(n(e)+" is not a function")}},6077:(e,t,o)=>{var r=o(614),n=String,i=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw i("Can't set "+n(e)+" as a prototype")}},5787:(e,t,o)=>{var r=o(7976),n=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw n("Incorrect invocation")}},9670:(e,t,o)=>{var r=o(111),n=String,i=TypeError;e.exports=function(e){if(r(e))return e;throw i(n(e)+" is not an object")}},1318:(e,t,o)=>{function r(e){return function(t,o,r){var s,d=n(t),l=a(d),u=i(r,l);if(e&&o!=o){for(;u<l;)if((s=d[u++])!=s)return!0}else for(;u<l;u++)if((e||u in d)&&d[u]===o)return e||u||0;return!e&&-1}}var n=o(5656),i=o(1400),a=o(6244);e.exports={includes:r(!0),indexOf:r(!1)}},3658:(e,t,o)=>{"use strict";var r=o(9781),n=o(3157),i=TypeError,a=Object.getOwnPropertyDescriptor;o=r&&!function(){if(void 0!==this)return 1;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=o?function(e,t){if(n(e)&&!a(e,"length").writable)throw i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},4326:(e,t,o)=>{o=o(1702);var r=o({}.toString),n=o("".slice);e.exports=function(e){return n(r(e),8,-1)}},648:(e,t,o)=>{var r=o(1694),n=o(614),i=o(4326),a=o(5112)("toStringTag"),s=Object,d="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=s(e),a))?t:d?i(e):"Object"==(t=i(e))&&n(e.callee)?"Arguments":t}},9920:(e,t,o)=>{var r=o(2597),n=o(3887),i=o(1236),a=o(3070);e.exports=function(e,t,o){for(var s=n(t),d=a.f,l=i.f,u=0;u<s.length;u++){var c=s[u];r(e,c)||o&&r(o,c)||d(e,c,l(t,c))}}},8880:(e,t,o)=>{var r=o(9781),n=o(3070),i=o(9114);e.exports=r?function(e,t,o){return n.f(e,t,i(1,o))}:function(e,t,o){return e[t]=o,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},8052:(e,t,o)=>{var r=o(614),n=o(3070),i=o(6339),a=o(3072);e.exports=function(e,t,o,s){var d=(s=s||{}).enumerable,l=void 0!==s.name?s.name:t;if(r(o)&&i(o,l,s),s.global)d?e[t]=o:a(t,o);else{try{s.unsafe?e[t]&&(d=!0):delete e[t]}catch(e){}d?e[t]=o:n.f(e,t,{value:o,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},3072:(e,t,o)=>{var r=o(7854),n=Object.defineProperty;e.exports=function(t,o){try{n(r,t,{value:o,configurable:!0,writable:!0})}catch(e){r[t]=o}return o}},9781:(e,t,o)=>{o=o(7293),e.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:e=>{var t="object"==typeof document&&document.all;e.exports={all:t,IS_HTMLDDA:void 0===t&&void 0!==t}},317:(e,t,o)=>{var r=o(7854),n=(o=o(111),r.document),i=o(n)&&o(n.createElement);e.exports=function(e){return i?n.createElement(e):{}}},7207:e=>{var t=TypeError;e.exports=function(e){if(9007199254740991<e)throw t("Maximum allowed index exceeded");return e}},3678:e=>{e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8113:(e,t,o)=>{o=o(5005),e.exports=o("navigator","userAgent")||""},7392:(e,t,o)=>{var r,n,i=o(7854),a=(o=o(8113),i.process);i=i.Deno,a=a&&a.versions||i&&i.version,i=a&&a.v8;!(n=i?0<(r=i.split("."))[0]&&r[0]<4?1:+(r[0]+r[1]):n)&&o&&(!(r=o.match(/Edge\/(\d+)/))||74<=r[1])&&(r=o.match(/Chrome\/(\d+)/))&&(n=+r[1]),e.exports=n},748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:(e,t,o)=>{o=o(1702);var r=Error,n=o("".replace),i=(o=String(r("zxcasd").stack),/\n\s*at [^:]*:[^\n]*/),a=i.test(o);e.exports=function(e,t){if(a&&"string"==typeof e&&!r.prepareStackTrace)for(;t--;)e=n(e,i,"");return e}},2109:(e,t,o)=>{var r=o(7854),n=o(1236).f,i=o(8880),a=o(8052),s=o(3072),d=o(9920),l=o(4705);e.exports=function(e,t){var o,u,c,p=e.target,f=e.global,m=e.stat,h=f?r:m?r[p]||s(p,{}):(r[p]||{}).prototype;if(h)for(o in t){if(u=t[o],c=e.dontCallGetSet?(c=n(h,o))&&c.value:h[o],!l(f?o:p+(m?".":"#")+o,e.forced)&&void 0!==c){if(typeof u==typeof c)continue;d(u,c)}(e.sham||c&&c.sham)&&i(u,"sham",!0),a(h,o,u,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},4374:(e,t,o)=>{o=o(7293),e.exports=!o((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:(e,t,o)=>{o=o(4374);var r=Function.prototype.call;e.exports=o?r.bind(r):function(){return r.apply(r,arguments)}},6530:(e,t,o)=>{var r=o(9781),n=(o=o(2597),Function.prototype),i=r&&Object.getOwnPropertyDescriptor,a=(o=o(n,"name"),o&&"something"===function(){}.name);r=o&&(!r||i(n,"name").configurable);e.exports={EXISTS:o,PROPER:a,CONFIGURABLE:r}},1702:(e,t,o)=>{o=o(4374);var r=Function.prototype,n=r.call;r=o&&r.bind.bind(n,n);e.exports=o?r:function(e){return function(){return n.apply(e,arguments)}}},5005:(e,t,o)=>{var r=o(7854),n=o(614);e.exports=function(e,t){return arguments.length<2?(o=r[e],n(o)?o:void 0):r[e]&&r[e][t];var o}},8173:(e,t,o)=>{var r=o(9662),n=o(8554);e.exports=function(e,t){return e=e[t],n(e)?void 0:r(e)}},7854:(e,t,o)=>{function r(e){return e&&e.Math==Math&&e}e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof o.g&&o.g)||function(){return this}()||Function("return this")()},2597:(e,t,o)=>{var r=o(1702),n=o(7908),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(n(e),t)}},3501:e=>{e.exports={}},4664:(e,t,o)=>{var r=o(9781),n=o(7293),i=o(317);e.exports=!r&&!n((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:(e,t,o)=>{var r=o(1702),n=o(7293),i=o(4326),a=Object,s=r("".split);e.exports=n((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?s(e,""):a(e)}:a},9587:(e,t,o)=>{var r=o(614),n=o(111),i=o(7674);e.exports=function(e,t,o){return i&&r(t=t.constructor)&&t!==o&&n(t=t.prototype)&&t!==o.prototype&&i(e,t),e}},2788:(e,t,o)=>{var r=o(1702),n=o(614),i=(o=o(5465),r(Function.toString));n(o.inspectSource)||(o.inspectSource=function(e){return i(e)}),e.exports=o.inspectSource},9909:(e,t,o)=>{var r,n,i,a,s=o(4811),d=o(7854),l=o(111),u=o(8880),c=o(2597),p=o(5465),f=o(6200),m=(o=o(3501),"Object already initialized"),h=d.TypeError,g=(d=d.WeakMap,s||p.state?((i=p.state||(p.state=new d)).get=i.get,i.has=i.has,i.set=i.set,r=function(e,t){if(i.has(e))throw h(m);return t.facade=e,i.set(e,t),t},n=function(e){return i.get(e)||{}},function(e){return i.has(e)}):(o[a=f("state")]=!0,r=function(e,t){if(c(e,a))throw h(m);return t.facade=e,u(e,a,t),t},n=function(e){return c(e,a)?e[a]:{}},function(e){return c(e,a)}));e.exports={set:r,get:n,has:g,enforce:function(e){return g(e)?n(e):r(e,{})},getterFor:function(e){return function(t){if(l(t)&&(t=n(t)).type===e)return t;throw h("Incompatible receiver, "+e+" required")}}}},3157:(e,t,o)=>{var r=o(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},614:(e,t,o)=>{o=o(4154);var r=o.all;e.exports=o.IS_HTMLDDA?function(e){return"function"==typeof e||e===r}:function(e){return"function"==typeof e}},4705:(e,t,o)=>{function r(e,t){return(e=d[s(e)])==u||e!=l&&(i(t)?n(t):!!t)}var n=o(7293),i=o(614),a=/#|\.prototype\./,s=r.normalize=function(e){return String(e).replace(a,".").toLowerCase()},d=r.data={},l=r.NATIVE="N",u=r.POLYFILL="P";e.exports=r},8554:e=>{e.exports=function(e){return null==e}},111:(e,t,o)=>{var r=o(614),n=(o=o(4154),o.all);e.exports=o.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===n}:function(e){return"object"==typeof e?null!==e:r(e)}},1913:e=>{e.exports=!1},2190:(e,t,o)=>{var r=o(5005),n=o(614),i=o(7976),a=(o=o(3307),Object);e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return n(t)&&i(t.prototype,a(e))}},6244:(e,t,o)=>{var r=o(7466);e.exports=function(e){return r(e.length)}},6339:(e,t,o)=>{var r=o(7293),n=o(614),i=o(2597),a=o(9781),s=o(6530).CONFIGURABLE,d=o(2788),l=(o=o(9909),o.enforce),u=o.get,c=Object.defineProperty,p=a&&!r((function(){return 8!==c((function(){}),"length",{value:8}).length})),f=String(String).split("String");o=e.exports=function(e,t,o){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),o&&o.getter&&(t="get "+t),o&&o.setter&&(t="set "+t),(!i(e,"name")||s&&e.name!==t)&&(a?c(e,"name",{value:t,configurable:!0}):e.name=t),p&&o&&i(o,"arity")&&e.length!==o.arity&&c(e,"length",{value:o.arity});try{o&&i(o,"constructor")&&o.constructor?a&&c(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}return o=l(e),i(o,"source")||(o.source=f.join("string"==typeof t?t:"")),e};Function.prototype.toString=o((function(){return n(this)&&u(this).source||d(this)}),"toString")},4758:e=>{var t=Math.ceil,o=Math.floor;e.exports=Math.trunc||function(e){return e=+e,(0<e?o:t)(e)}},6277:(e,t,o)=>{var r=o(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},3070:(e,t,o)=>{var r=o(9781),n=o(4664),i=o(3353),a=o(9670),s=o(4948),d=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,c="enumerable",p="configurable",f="writable";t.f=r?i?function(e,t,o){var r;return a(e),t=s(t),a(o),"function"==typeof e&&"prototype"===t&&"value"in o&&f in o&&!o[f]&&(r=u(e,t))&&r[f]&&(e[t]=o.value,o={configurable:(p in o?o:r)[p],enumerable:(c in o?o:r)[c],writable:!1}),l(e,t,o)}:l:function(e,t,o){if(a(e),t=s(t),a(o),n)try{return l(e,t,o)}catch(e){}if("get"in o||"set"in o)throw d("Accessors not supported");return"value"in o&&(e[t]=o.value),e}},1236:(e,t,o)=>{var r=o(9781),n=o(6916),i=o(5296),a=o(9114),s=o(5656),d=o(4948),l=o(2597),u=o(4664),c=Object.getOwnPropertyDescriptor;t.f=r?c:function(e,t){if(e=s(e),t=d(t),u)try{return c(e,t)}catch(e){}if(l(e,t))return a(!n(i.f,e,t),e[t])}},8006:(e,t,o)=>{var r=o(6324),n=o(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,n)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},7976:(e,t,o)=>{o=o(1702),e.exports=o({}.isPrototypeOf)},6324:(e,t,o)=>{var r=o(1702),n=o(2597),i=o(5656),a=o(1318).indexOf,s=o(3501),d=r([].push);e.exports=function(e,t){var o,r=i(e),l=0,u=[];for(o in r)!n(s,o)&&n(r,o)&&d(u,o);for(;t.length>l;)!n(r,o=t[l++])||~a(u,o)||d(u,o);return u}},5296:(e,t)=>{"use strict";var o={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,n=r&&!o.call({1:2},1);t.f=n?function(e){return e=r(this,e),!!e&&e.enumerable}:o},7674:(e,t,o)=>{var r=o(1702),n=o(9670),i=o(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,o={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o,[]),t=o instanceof Array}catch(o){}return function(o,r){return n(o),i(r),t?e(o,r):o.__proto__=r,o}}():void 0)},2140:(e,t,o)=>{var r=o(6916),n=o(614),i=o(111),a=TypeError;e.exports=function(e,t){var o,s;if("string"===t&&n(o=e.toString)&&!i(s=r(o,e)))return s;if(n(o=e.valueOf)&&!i(s=r(o,e)))return s;if("string"!==t&&n(o=e.toString)&&!i(s=r(o,e)))return s;throw a("Can't convert object to primitive value")}},3887:(e,t,o)=>{var r=o(5005),n=o(1702),i=o(8006),a=o(5181),s=o(9670),d=n([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(s(e)),o=a.f;return o?d(t,o(e)):t}},4488:(e,t,o)=>{var r=o(8554),n=TypeError;e.exports=function(e){if(r(e))throw n("Can't call method on "+e);return e}},6200:(e,t,o)=>{var r=o(2309),n=o(9711),i=r("keys");e.exports=function(e){return i[e]||(i[e]=n(e))}},5465:(e,t,o)=>{var r=o(7854),n=(o=o(3072),"__core-js_shared__");r=r[n]||o(n,{});e.exports=r},2309:(e,t,o)=>{var r=o(1913),n=o(5465);(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.1",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:(e,t,o)=>{var r=o(7392);o=o(7293);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1400:(e,t,o)=>{var r=o(9303),n=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?n(e+t,0):i(e,t)}},5656:(e,t,o)=>{var r=o(8361),n=o(4488);e.exports=function(e){return r(n(e))}},9303:(e,t,o)=>{var r=o(4758);e.exports=function(e){return e=+e,e!=e||0==e?0:r(e)}},7466:(e,t,o)=>{var r=o(9303),n=Math.min;e.exports=function(e){return 0<e?n(r(e),9007199254740991):0}},7908:(e,t,o)=>{var r=o(4488),n=Object;e.exports=function(e){return n(r(e))}},7593:(e,t,o)=>{var r=o(6916),n=o(111),i=o(2190),a=o(8173),s=o(2140),d=(o=o(5112),TypeError),l=o("toPrimitive");e.exports=function(e,t){if(!n(e)||i(e))return e;var o=a(e,l);if(o){if(o=r(o,e,t=void 0===t?"default":t),!n(o)||i(o))return o;throw d("Can't convert object to primitive value")}return s(e,t=void 0===t?"number":t)}},4948:(e,t,o)=>{var r=o(7593),n=o(2190);e.exports=function(e){return e=r(e,"string"),n(e)?e:e+""}},1694:(e,t,o)=>{var r={};r[o(5112)("toStringTag")]="z",e.exports="[object z]"===String(r)},1340:(e,t,o)=>{var r=o(648),n=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return n(e)}},6330:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9711:(e,t,o)=>{o=o(1702);var r=0,n=Math.random(),i=o(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+i(++r+n,36)}},3307:(e,t,o)=>{o=o(6293),e.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(e,t,o)=>{var r=o(9781);o=o(7293);e.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:(e,t,o)=>{var r=o(7854);o=o(614),r=r.WeakMap;e.exports=o(r)&&/native code/.test(String(r))},5112:(e,t,o)=>{var r=o(7854),n=o(2309),i=o(2597),a=o(9711),s=o(6293),d=o(3307),l=n("wks"),u=r.Symbol,c=u&&u.for,p=d?u:u&&u.withoutSetter||a;e.exports=function(e){var t;return i(l,e)&&(s||"string"==typeof l[e])||(t="Symbol."+e,s&&i(u,e)?l[e]=u[e]:l[e]=(d&&c?c:p)(t)),l[e]}},7658:(e,t,o)=>{"use strict";var r=o(2109),n=o(7908),i=o(6244),a=o(3658),s=o(7207),d=(o=o(7293)((function(){return 4294967297!==[].push.call({length:4294967296},1)})),!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}());r({target:"Array",proto:!0,arity:1,forced:o||d},{push:function(e){var t=n(this),o=i(t),r=arguments.length;s(o+r);for(var d=0;d<r;d++)t[o]=arguments[d],o++;return a(t,o),o}})},2801:(e,t,o)=>{"use strict";function r(){c(this,w);var e=f((t=arguments.length)<1?void 0:arguments[0]),t=f(t<2?void 0:arguments[1],"Error");t=new b(e,t);return(e=v(e)).name=y,l(t,"stack",d(1,h(e.stack,1))),p(t,this,r),t}var n,i=o(2109),a=o(7854),s=o(5005),d=o(9114),l=o(3070).f,u=o(2597),c=o(5787),p=o(9587),f=o(6277),m=o(3678),h=o(1060),g=o(9781),y=(o=o(1913),"DOMException"),v=s("Error"),b=s(y),w=r.prototype=b.prototype,_="stack"in v(y),S="stack"in new b(1,2),x=(g=b&&g&&Object.getOwnPropertyDescriptor(a,y),a=!(!g||g.writable&&g.configurable),g=_&&!a&&!S,i({global:!0,constructor:!0,forced:o||g},{DOMException:g?r:b}),s(y));_=x.prototype;if(_.constructor!==x)for(var E in o||l(_,"constructor",d(1,x)),m)!u(m,E)||u(x,n=(E=m[E]).s)||l(x,n,d(6,E.c))}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];return void 0!==t||(t=__webpack_module_cache__[e]={exports:{}},__webpack_modules__[e](t,t.exports,__webpack_require__)),t.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __webpack_exports__={};(()=>{let __b;__webpack_require__(2801),__webpack_require__(7658),void 0!==window.browser&&(__b=window.browser),void 0!==window.chrome&&(__b=window.chrome);const browser=__b;!function(){try{handleInjectScript(),document.addEventListener("securitypolicyviolation",(e=>{injectParseVideoJS(!0)}))}catch(error){}function handleInjectScript(){var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,t=window.location.host;let o=document.createElement("script");if(o.type="text/javascript",o.id="stay_inject_parse_video_js_"+t,o.appendChild(document.createTextNode(`\n\nlet handleVideoInfo = ${injectParseVideoJS}\n\nhandleVideoInfo(false);`)),document.body)document.body.appendChild(o);else{let t=new e(((e,r)=>{document.body&&(document.body.appendChild(o),t.disconnect())}));t.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}}function injectParseVideoJS(isContent){let isStayAround="",longPressStatus="",hostUrl=window.location.href,decodeSignatureCipher="",host=window.location.host,videoList=[],videoIdSet=new Set;const MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;let videoDoms,timerArr=[];const Utils={compare:function(e){return(t,o)=>t[e]-o[e]},isMobileOrIpad:function(){const e=navigator.userAgent;return!!["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"].filter((t=>e.includes(t))).length},isMobile:function(){const e=navigator.userAgent;return!!["Android","iPhone","SymbianOS","Windows Phone","iPod"].filter((t=>e.includes(t))).length},queryURLParams:function(e,t){return t=new RegExp("[?&#]+"+t+"=([^?&#]+)").exec(e),t&&t[1]||""},queryParams:function(e,t){return e?this.queryURLParams("https;//stap.app?"+e,t):""},matchUrlInString:function(e){var t=new RegExp("(https?|http)?(:)?//[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]","g");e=e.match(t);return e&&e.length?e[0]:""},isURL:function(e){return!!e&&/^http[s]?:\/\/.*/.test(e)},completionSourceUrl:function(e){return e?(/^(f|ht)tps?:\/\//i.test(e)||(/^\/\//i.test(e)?e=window.location.protocol+e:/^\//i.test(e)&&(e=window.location.origin+e)),e):""},checkCharLengthAndSubStr:function(e,t){return e?(t=t||80,e.replace(/[^x00-xff]/g,"01").length<=t?e:e.substr(0,t)):""},isChinese(e){return!!e&&!!/.*[u4e00-u9fa5]+.*$/.test(e)},urlEncodeChinese(e){var t;return e&&(t=new RegExp("[\\u4E00-\\u9FFF]","g"),e.replace(t,(function(e){return window.encodeURI(e)})))},getUrlPathName:function(e){let t="",o=(t=(this.isURL(e)?new URL(e):new URL(hostUrl)).pathname).split("/");return(o=o.filter((e=>{if(e&&""!=e)return e}))).pop()},generateUuid:function(e,t){e=e||32;var o,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");let n,i=[];if(t=t||r.length,e)for(n=0;n<e;n++)i[n]=r[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="_",i[14]="4",n=0;n<36;n++)i[n]||(o=0|16*Math.random(),i[n]=r[19==n?3&o|8:o]);return i.join("")},isBase64(e){if(!e)return!1;if(/^data:.*\w+;base64,/.test(e))return!0;if(""===e||""===e.trim())return!1;try{return window.btoa(window.atob(e))==e}catch(e){return!1}},isDark(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches},parseToDOM(e){var t=document.createElement("template");return"string"==typeof e?(t.innerHTML=e,t.content):e},getHostname(e){if(!e)return"";try{return new URL(e).hostname.toLowerCase()}catch(t){return e.split("/")[0].toLowerCase()}},div(e,t){let o,r,n=0,i=0;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{i=t.toString().split(".")[1].length}catch(e){i=0}return o=Number(e.toString().replace(".","")),r=Number(t.toString().replace(".","")),this.mul(o/r,Math.pow(10,i-n))},sub(e,t){let o,r,n;try{o=e.toString().split(".")[1].length}catch(e){o=0}try{r=t.toString().split(".")[1].length}catch(e){r=0}return n=Math.pow(10,Math.max(o,r)),(this.mul(e,n)-this.mul(t,n))/n},mul(e,t){let o=0,r=e.toString(),n=t.toString();try{o+=r.split(".")[1].length}catch(e){}try{o+=n.split(".")[1].length}catch(e){}return Number(r.replace(".",""))*Number(n.replace(".",""))/Math.pow(10,o)},add(e,t){let o,r,n;try{o=e.toString().split(".")[1].length}catch(e){o=0}try{r=t.toString().split(".")[1].length}catch(e){r=0}return n=Math.pow(10,Math.max(o,r)),(this.mul(e,n)+this.mul(t,n))/n}};class LongPress{constructor(e,t){this.dom=e,this.timer=0,this.init(t)}init(e){this.touchstart(e),this.touchend(),this.touchmove(),this.bindLongPressEventFlag()}bindLongPressEventFlag(){this.dom.setAttribute("stay-long-press","yes")}touchstart(e){const t=this;t.dom.removeEventListener("touchstart",(function(o){t.handleLongPress(o,e)})),t.dom.addEventListener("touchstart",(function(o){return t.handleTargetTouchend(o.target),t.timer=setTimeout(((e,o)=>{t.handleLongPress(e,o)}),600,o,e),!1}),!1)}handleTargetTouchend(e){const t=this;e&&e.addEventListener("touchend",(o=>{t.handleTouchend(o,e)}))}handleLongPress(e,t){if(e.preventDefault(),e.stopPropagation(),!isHidden(this.dom)){e=e.changedTouches[0];try{e.target.addEventListener("contextmenu",(function(e){e.preventDefault()}))}catch(e){}"function"==typeof t&&(t(),this.timer=0)}}touchend(){const e=this;e.dom.removeEventListener("touchend",(function(t){e.handleTouchend(t,null)})),e.dom.addEventListener("touchend",(function(t){return e.handleTouchend(t,null),!1}))}handleTouchend(e,t){const o=this;if(!isHidden(this.dom)&&(clearTimeout(this.timer),0!=this.timer))try{t&&t.removeEventListener("touchend",(e=>{clearTimeout(o.timer)}))}catch(e){}}touchmove(){const e=this;function t(){isHidden(e.dom)||(clearTimeout(e.timer),e.timer=0)}e.dom.removeEventListener("touchmove",(function(e){t()})),e.dom.addEventListener("touchmove",(function(e){return t(),!1}))}}function isHidden(e){return!e||(e=window.getComputedStyle(e))&&("none"===e.display||"hidden"===e.visibility)}function checkTargetIfShowOnScreen(e){}class DocumentLongPress{constructor(e,t){this.dom=e,this.stayLongPressTimer=0,this.distance=10,this.init(t)}getDomPageStartX(){return this.dom.getBoundingClientRect().left}getDomPageStartY(){return(document.documentElement.scrollTop||window.pageYOffset)+this.dom.getBoundingClientRect().top}getDomPageEndX(){return this.getDomPageStartX()+this.dom.clientWidth}getDomPageEndY(){return this.getDomPageStartY()+this.dom.clientHeight}init(e){this.touchstart(e),this.touchend(),this.touchmove(),this.bindLongPressEventFlag()}bindLongPressEventFlag(){this.dom.setAttribute("stay-long-press","yes")}touchstart(e){const t=this;document.body.removeEventListener("touchstart",(function(o){return t.handleTargetEvent(o,e),!1})),document.body.addEventListener("touchstart",(function(o){return t.handleTargetTouchend(o.target),t.handleTargetEvent(o,e),!1}),!1)}handleTargetTouchend(e){const t=this;e&&e.addEventListener("touchend",(o=>{t.touchEndCallback(o,e)}))}handleTargetEvent(e,t){e.stopPropagation(),e.preventDefault();const o=this;e=e.changedTouches[0];var r=e.pageX,n=e.pageY;!isHidden(o.dom)&&Math.abs(e.pageX-r)<=o.distance&&r>=o.getDomPageStartX()&&r<=o.getDomPageEndX()&&n>=o.getDomPageStartY()&&n<=o.getDomPageEndY()&&(this.stayLongPressTimer=window.setTimeout(((e,t)=>{o.stayLongPressTimer=0;try{var r=e.target.classList;r.contains("__stay-unselect")||r.add("__stay-unselect"),r.contains("__stay-touch-action")||r.add("__stay-touch-action"),"function"==typeof t&&t(),e.target.addEventListener("contextmenu",(function(e){e.preventDefault()}))}catch(e){}}),600,e,t))}touchend(){const e=this;document.body.removeEventListener("touchend",(function(t){e.touchEndCallback(t,null)})),document.body.addEventListener("touchend",(function(t){return e.touchEndCallback(t,null),!1}))}touchEndCallback(e,t){const o=this;if(!isHidden(this.dom)&&(clearTimeout(this.stayLongPressTimer),0!=this.stayLongPressTimer))try{t&&t.removeEventListener("touchend",(e=>{o.touchEndCallback(e,null)}))}catch(e){}}touchmove(){const e=this;function t(){isHidden(e.dom)||(window.clearTimeout(e.stayLongPressTimer),e.stayLongPressTimer=0)}document.body.removeEventListener("touchmove",(function(e){e.preventDefault(),e.stopPropagation(),t()})),document.body.addEventListener("touchmove",(function(e){return e.preventDefault(),e.stopPropagation(),t(),!1}))}}function startFindVideoInfo(e){observerVideo();let t=(videoDoms=document.querySelectorAll("video"))&&videoDoms.length;t||(videoDoms=document.querySelectorAll(".post-content shreddit-player"),t=videoDoms&&videoDoms.length),t?parseVideoNodeList(videoDoms):(parseVideoNodeList(),e&&afterCompleteQueryVideo())}function afterCompleteQueryVideo(){for(let t=1;t<10;t++){let o;e=t,o=setTimeout((()=>{(videoDoms=document.querySelectorAll("video"))&&videoDoms.length&&(parseVideoNodeList(videoDoms),timerArr.forEach((e=>{clearTimeout(e)})))}),200*e),timerArr.push(o)}var e}function observerVideo(){new MutationObserver((function(e){try{e.forEach((function(e){host=window.location.host,videoDoms=document.querySelectorAll("video");var t=e.target.querySelectorAll("video");("VIDEO"===e.target.nodeName||t&&t.length)&&videoDoms&&videoDoms.length&&parseVideoNodeList(videoDoms)}))}catch(e){}})).observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}function parseVideoNodeList(e){if(e&&e.length){var t=e.length;let o=0;Array.from(e).forEach((async e=>{if(e&&e instanceof HTMLElement){let n=e.getAttribute("stay-sniffing");n||(n=Utils.generateUuid(),e.setAttribute("stay-sniffing",n));var t,r=e;let i=e.getAttribute("src");i||(t=e.querySelector("source"))&&(e=t,i=t.getAttribute("src")),i&&(await handleVideoInfoParse(e,r,n)).downloadUrl||o++}else o++})),o==t&&setTimeoutParseVideoInfoByWindow()}else setTimeoutParseVideoInfoByWindow();window.postMessage({name:"VIDEO_INFO_CAPTURE",videoList}),isContent&&(e={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoInfoList:videoList},browser.runtime.sendMessage(e,(e=>{})))}function checkVideoExist(e,t,o){var r=o.downloadUrl;Utils.isURL(r)||(o.downloadUrl=hostUrl),addLongPress(e,t,o),videoIdSet.size&&(videoIdSet.has(o.videoUuid)||videoIdSet.has(o.videoKey))?videoList.forEach((e=>(e.videoUuid!=o.videoUuid&&e.videoUuid!=o.videoKey||(e.downloadUrl=o.downloadUrl,e.poster=o.poster||"",e.title=o.title,e.hostUrl=o.hostUrl,e.qualityList=o.qualityList||[],e.type=o.type||""),e))):(o.videoKey&&(videoIdSet.add(o.videoKey),o.videoUuid||(o.videoUuid=o.videoKey)),o.videoUuid&&videoIdSet.add(o.videoUuid),videoList.push(o))}async function addLongPress(e,t,o){if(t&&Utils.isMobile()&&(!(longPressStatus=longPressStatus||await getLongPressStatus())||"off"!=longPressStatus)&&(isStayAround||(r=await getStayAround(),isStayAround=r),"a"==isStayAround)){var r=t.getAttribute("stay-long-press");if(!r||"yes"!=r){if(document.querySelector("#__style_sinffer_unselect")||document.body.append(Utils.parseToDOM('<style id="__style_sinffer_unselect">\n          .__stay-unselect, video{\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            -webkit-touch-callout: none;\n          }\n          .__stay-touch-action{\n            touch-action: none!important;\n          }\n        </style>')),t.classList.add("__stay-unselect"),t.classList.add("__stay-touch-action"),r=o.hostUrl,-1<r.indexOf("youtube.com")){var n=document.querySelector("#player-control-overlay");n=(n&&(n.classList.contains("__stay-touch-action")||n.classList.add("__stay-touch-action"),n.classList.contains("__stay-unselect")||n.classList.add("__stay-unselect")),document.querySelector("#player-control-overlay .player-controls-background-container .player-controls-background"));n&&(n.classList.contains("__stay-touch-action")||n.classList.add("__stay-touch-action"),n.classList.contains("__stay-unselect")||n.classList.add("__stay-unselect")),new LongPress(t,(()=>{addSinfferModal(e,t,o)}))}else if(!(-1<r.indexOf("mobile.twitter.com")))if(-1<r.indexOf("pornhub.com"))t&&(t.classList.contains("__stay-touch-action")||t.classList.add("__stay-touch-action"),t.classList.contains("__stay-unselect")||t.classList.add("__stay-unselect")),new LongPress(t,(()=>{addSinfferModal(e,t,o)}));else if(-1<r.indexOf("muiplayer.js.org")){let t=document.querySelector("#mplayer-media-wrapper");(t=t||document.querySelector("#mplayer-cover"))&&new LongPress(t,(()=>{addSinfferModal(e,t,o)}))}new DocumentLongPress(t,(()=>{addSinfferModal(e,t,o)}))}}}function getStayAround(){return new Promise(((e,t)=>{if(isContent)browser.runtime.sendMessage({from:"sniffer",operate:"GET_STAY_AROUND"},(t=>{t.body&&"{}"!=JSON.stringify(t.body)&&e(t.body)}));else{const t=Math.random().toString(36).substring(2,9),o=r=>{r.data.pid===t&&"GET_STAY_AROUND_RESP"===r.data.name&&(r=r.data&&r.data.response?r.data.response.body:"b",e(r),window.removeEventListener("message",o))};window.postMessage({id:t,pid:t,name:"GET_STAY_AROUND"}),window.addEventListener("message",o)}}))}function getLongPressStatus(){return new Promise(((e,t)=>{if(isContent)browser.runtime.sendMessage({from:"popup",operate:"getLongPressStatus"},(t=>{t=t&&t.longPressStatus?t.longPressStatus:"on",e(t)}));else{const t=Math.random().toString(36).substring(2,9),o=r=>{r.data.pid===t&&"GET_LONG_PRESS_STATUS_RESP"===r.data.name&&(e(r.data.longPressStatusRes),window.removeEventListener("message",o))};window.postMessage({id:t,pid:t,name:"GET_LONG_PRESS_STATUS"}),window.addEventListener("message",o)}}))}function addSinfferModal(e,t,o){t.clientWidth;let r=t.clientHeight,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var i=window.innerWidth||document.documentElement.innerWidth||document.body.innerWidth;let a=t.getBoundingClientRect().top,s=t.getBoundingClientRect().left,d=("VIDEO"==t.tagName&&(a=t.parentNode.getBoundingClientRect().top,s=t.parentNode.getBoundingClientRect().left),s=10,i),l=Utils.div(Utils.mul(d,9),16),u=(r<Utils.div(n,2)&&(l=r),document.querySelector("#__stay_sinffer_modal"));(u=u||function(){let t=[{title:o.title,downloadUrl:o.downloadUrl,poster:o.poster,hostUrl:Utils.getHostname(o.hostUrl),uuid:""}],i="stay://x-callback-url/snifferVideo?list="+encodeURIComponent(JSON.stringify(t)),u="background-color: rgb(247,247,247);",c="rgb(54, 54, 57)",p="#E0E0E0",f="background-color: rgba(255, 255, 255, 1);",m="color:#000000;",h=isContent?browser.runtime.getURL("img/popup-download-light.png"):"https://res.stayfork.app/scripts/8DF5C8391ED58046174D714911AD015E/icon.png";Utils.isDark()&&(f="background-color: rgba(0, 0, 0, 1);",m="color:#DCDCDC;",u="background-color: rgb(54, 54, 57);",h=isContent?browser.runtime.getURL("img/popup-download-dark.png"):"https://res.stayfork.app/scripts/CFFCD2186E164262E0E776A545327605/icon.png",c="rgb(247,247,247)",p="#37372F");let g=1,y=`<div stay-download="${i}" class="_stay-quality-item ">${"ad"==o.type?"Download Ad":"Download"}</div>`,v=o.qualityList;if(v&&v.length){let e="";g=0,v.forEach((r=>{t=[{title:o.title,downloadUrl:r.downloadUrl,poster:o.poster,hostUrl:Utils.getHostname(o.hostUrl),uuid:""}],i="stay://x-callback-url/snifferVideo?list="+encodeURIComponent(JSON.stringify(t)),e+=`<div stay-download="${i}" class="_stay-quality-item">${r.qualityLabel}</div>`,g+=1})),y=e}let b=a,w=a;a<0?(w=0,n<=r&&(w=Utils.div(Utils.sub(n,l),2))):0==a?n<=r&&(w=Utils.div(Utils.sub(n,l),2)):(E=Utils.add(10,36),E=Utils.add(Utils.add(l,E),Utils.add(Utils.mul(g,38),36)),a>Utils.sub(n,E)&&(w=Utils.sub(n,E)));let _="",S=isContent?browser.runtime.getURL("img/video-default.png"):"https://res.stayfork.app/scripts/BB8CD00276006365956C32A6556696AD/icon.png",x='<div class="__stay-poster-box" ><div class="__stay-default-poster"><img style="max-width:100%;max-height:100%;" src="'+S+'"/></div><span style="font-size:13px;padding-top: 20px; -webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;'+m+'">'+Utils.getHostname(o.hostUrl)+"</span></div>";o.poster&&(_="border-radius: 15px;",x=`<div class="__stay-video-poster" style="background:url('${o.poster}') 50% 50% no-repeat;background-size: cover;"></div>`),captureVideoAndDrawing(e,d,l);var E=`<style id="__style_sinffer_style">\n          .__stay-modal-box{\n            position: fixed; \n            z-index: 9999999; \n            width: 100%; \n            height: 100%; \n            text-align: center; \n            top: 0px;\n            -webkit-overflow-scrolling: touch;\n            margin: 0 auto;\n            transition: all 0.6s;\n            box-sizing: border-box;\n            visibility: hidden;\n          }\n          .__stay-show-modal{\n            background-color: rgba(0, 0, 0, 0.4);\n            -webkit-backdrop-filter: blur(8px); \n          }\n          .__stay-sinffer-content{\n            width:100%;\n            position: absolute;\n            left: 0;\n            -webkit-transform: translate3d(0, ${b}px, 0);\n            transform: translate3d(0, ${b}px, 0);\n            will-change: transform;\n            -webkit-transition: -webkit-transform .4s cubic-bezier(0,0,.25,1) 80ms;\n            transition: transform .4s cubic-bezier(0,0,.25,1) 80ms;\n            box-sizing: border-box;\n          }\n          .__stay-trans{\n            -webkit-transform: translate3d(0,${w}px,0);\n            transform: translate3d(0,${w}px,0);\n          }\n          .__stay-content{\n            width:100%;\n            position: relative;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            justify-items: center;\n            align-items: center;\n          }\n          ._stay-sinffer-popup{\n            width:230px;padding-top: 10px;box-sizing: border-box;border-radius:15px;\n            ${u}\n            position: relative;\n            margin: 16px auto 0 auto;\n            z-index:999999;\n            visibility: hidden;\n            animation: fadein .5s;\n          }\n          .__stay-sinffer-poster{\n            width: 100%;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            height: ${l}px;\n            padding: 0 ${s}px;\n            margin:0 auto;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            justify-items: center;\n            align-items: center;\n            box-sizing: border-box;\n            box-shadow: 0 0px 10px rgba(54,54,57,0.1);\n            transition: All 0.4s ease-in-out;\n            -webkit-transition: All 0.4s ease-in-out;\n            -moz-transition: All 0.4s ease-in-out;\n            -o-transition: All 0.4s ease-in-out;\n            animation-name: zoom;\n            animation-duration: 0.6s;\n          }\n          .__stay-video-poster{\n            // object-fit: contain;\n            // object-position: center;\n            width:100%;\n            height:100%;\n            background-position: center;\n            background-repeat: no-repeat;\n            border-radius: 15px;\n           \n          }\n          .__stay-poster-box{\n            width:100%;\n            height:100%;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            ${f}\n            border-radius: 10px;\n            box-shadow: 0 0px 10px rgba(54,54,57,0.1);\n          }\n          .__stay-default-poster{\n            width:80px;\n            height:60px;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            justify-items: center;\n            align-items: center;\n            box-sizing: border-box;\n          }\n          ._stay-sinffer-title{\n            padding-left: 15px;\n            padding-right: 15px;\n            width: 100%;\n            height:36px;\n            line-height: 18px;\n            word-break:break-all;\n            word-wrap:break-word;\n            color: ${c};\n            -webkit-box-orient: vertical;\n            -webkit-user-select: none;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            text-align: left;\n            margin-bottom: 10px;\n            box-sizing: border-box;\n            font-size: 16px;\n          }\n          ._stay-sinffer-title span{\n            font-weight: 600;\n            color: ${m}\n          }\n          ._stay-sinffer-download{\n            width:100%;\n            box-sizing: border-box;\n            display: flex;\n            justify-content: flex-start;\n            flex-direction: column;\n            align-items: center;\n          }\n          ._stay-quality-item{\n            height: 38px;\n            box-sizing: border-box;\n            width:100%;\n            padding-right: 20px;\n            position: relative;\n            color: ${c};\n            text-align:left;\n            font-size: 16px;\n            border-top: 0.5px solid ${p};\n            padding: 0 15px;\n            display: flex;\n            align-items: center;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n          }\n          ._stay-quality-item::after{\n            content:"";\n            background: url(${h}) no-repeat 50% 50%;  \n            background-size: 14px;\n            position: absolute;\n            right: 15px;\n            top: 50%;\n            transform: translate(0, -52%);\n            width: 14px;\n            height: 20px;\n          }\n          @keyframes zoom {\n            0% {transform: scale(1.05)}\n            100% {transform: scale(1);${_}}\n          }\n          @keyframes fadein {\n            0% {\n              transform: translate(0, -100%);\n            }\n            100% {\n              transform: none;\n            }\n          }\n          @keyframes fadeout {\n              0% {\n                transform: translate(0,100%);\n              }\n              100% {\n                  transform: none;\n              }\n          }\n        </style>`,U=['<div id="__stay_sinffer_modal" class="__stay-modal-box" >','<div class="__stay-sinffer-content">','<div class="__stay-content">','<div class="__stay-sinffer-poster">'+x+"</div>",'<div class="_stay-sinffer-popup">','<div class="_stay-sinffer-title">'+o.title+"</div>",'<div class="_stay-sinffer-download">',y,"</div>","</div>","</div>","</div>","</div>"];return document.body.append(Utils.parseToDOM(E)),document.body.append(Utils.parseToDOM(U.join(""))),document.querySelector("#__stay_sinffer_modal")}()).style.visibility="visible";const c=document.querySelector("#__stay_sinffer_modal ._stay-sinffer-popup");document.querySelector("#__stay_sinffer_modal .__stay-sinffer-content").classList.add("__stay-trans");let p=setTimeout((function(){u.classList.add("__stay-show-modal"),c.style.visibility="visible",clearTimeout(p),p=0}),400);u.addEventListener("touchmove",(e=>{e.preventDefault(),e.stopPropagation()}),!1),u.addEventListener("touchstart",(e=>{e.preventDefault(),u.classList.remove("__stay-show-modal"),c.style.animation="fadeout .5s;";let t=setTimeout((()=>{u&&document.body.removeChild(u),document.body.removeChild(document.querySelector("#__style_sinffer_style")),clearTimeout(t),t=0}),200)}),!1);const f=document.querySelectorAll("#__stay_sinffer_modal ._stay-quality-item");if(f&&f.length)for(let m=0;m<f.length;m++)f[m].addEventListener("touchstart",(e=>{e=e.target.getAttribute("stay-download");var t=document.createElement("a");t.href=e,t.click()}))}function captureVideoAndDrawing(e,t,o){if(!e||"VIDEO"!=e.tagName)return null;e.setAttribute("autoplay","autoplay"),e.setAttribute("crossOrigin","anonymous");var r=document.createElement("canvas");return r.width=t,r.height=o,r.getContext("2d").drawImage(e,0,0,r.width,r.height),r}async function handleVideoInfoParse(e,t,o){let r={},n=e.getAttribute("poster"),i=e.getAttribute("title"),a=e.getAttribute("src"),s=[],d=(hostUrl=window.location.href,t);var l;if(a=Utils.completionSourceUrl(a),n||(l=document.querySelector("source[type='image/webp'] img"),n=l?l.getAttribute("src"):"",i=i||(l?l.getAttribute("alt"):"")),-1<host.indexOf("youtube.com")){let t=document.querySelector("#player-control-overlay .player-controls-background-container .player-controls-background");(t=(t=t||document.querySelector("#player-control-overlay"))||document.querySelector(".carousel-wrapper .video-wrapper .reel-player-overlay-main-content"))&&(d=t),r=await handleYoutubeVideoInfo(e)}else-1<host.indexOf("baidu.com")?r=handleBaiduVideoInfo(e):-1<host.indexOf("bilibili.com")?r=handleBilibiliVideoInfo(e):-1<host.indexOf("mobile.twitter.com")?((l=document.querySelector(".r-eqz5dr .r-1pi2tsx .r-1pi2tsx .r-1udh08x .r-1p0dtai div.css-1dbjc4n.r-6koalj.r-eqz5dr.r-1pi2tsx.r-13qz1uu"))&&(d=l),r=handleMobileTwitterVideoInfo(e)):-1<host.indexOf("m.weibo.cn")?r=handleMobileWeiboVideoInfo(e):-1<host.indexOf("iesdouyin.com")?r=handleMobileDouyinVideoInfo(e):-1<host.indexOf("douyin.com")?(l=window.location.pathname,r=(-1<l.indexOf("/video")?handlePCDetailDouyinVideoInfo:handlePCHomeDouyinVideoInfo)(e)):-1<host.indexOf("m.toutiao.com")?r=handleMobileToutiaoVideoInfo(e):-1<host.indexOf("m.v.qq.com")?r=handleMobileTenxunVideoInfo(e):-1<host.indexOf("www.reddit.com")?r=handleRedditVideoInfo(e):-1<host.indexOf("pornhub.com")?((l=document.querySelector("#videoShow #videoPlayerPlaceholder .playerFlvContainer"))&&(d=l),r=handlePornhubVideoInfo(e)):-1<host.indexOf("facebook.com")?r=handleFacebookVideoInfo(e):-1<host.indexOf("instagram.com")?r=handleInstagramVideoInfo(e):-1<host.indexOf("xiaohongshu.com")?r=handleXiaohongshuVideoInfo(e):-1<host.indexOf("jable.tv")?r=handleJableVideoInfo(e):-1<host.indexOf("hxaa79.com")&&(r=handleHxaa79VideoInfo(e));return r.downloadUrl&&(a=r.downloadUrl),a=Utils.completionSourceUrl(a),n=n||r.poster,i=i||r.title,r.qualityList&&r.qualityList.length&&(s=r.qualityList),i=(i=i||document.title)||Utils.getUrlPathName(a),n=Utils.completionSourceUrl(n),r.title=r.type&&"ad"==r.type?'<span style="font-weight: 700;">Ad·</span>'+i:i,r.poster=n,r.downloadUrl=a,r.hostUrl=hostUrl,r.qualityList=s,r.videoUuid=o,a&&checkVideoExist(t,d,r),r}function setTimeoutParseVideoInfoByWindow(){let e=setTimeout((()=>{parseVideoInfoByWindow(),clearTimeout(e),e=0}),400)}function parseVideoInfoByWindow(){let e={};var t=window.location.host;hostUrl=window.location.href,e.hostUrl=hostUrl;let o=null;-1<t.indexOf("pornhub.com")&&(o=(o=document.querySelector("#videoShow #videoPlayerPlaceholder .mgp_videoWrapper .mgp_videoPoster img"))||document.querySelector("#videoShow #videoPlayerPlaceholder .mgp_videoWrapper"),e=parsePornhubVideoInfoByWindow(e)),e.downloadUrl&&checkVideoExist(null,o,e)}function handleBilibiliVideoInfo(e){let t={},o=(t.poster=e.getAttribute("poster"),t.downloadUrl=e.getAttribute("src"),document.querySelector(".main-container .ep-info-pre .ep-info-title"));if(!o){let e=setTimeout((function(){return(o=document.querySelector(".video .share-video-info .title-wrapper .title-name span"))&&(t.title=o.textContent),clearTimeout(e),e=0,t}),200)}return o&&(t.title=o.textContent),t}function handleMobileTwitterVideoInfo(e){var t={};t.poster=e.getAttribute("poster"),t.downloadUrl=e.getAttribute("src");let o=e.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextElementSibling.childNodes[1];return(o=o&&o.querySelector(".css-1dbjc4n .r-92ivih.r-1t01tom .r-1t982j2.r-1j3t67a .css-1dbjc4n.r-1kw4oii a[data-testid='tweetText'] span"))&&(t.title=Utils.checkCharLengthAndSubStr(o.textContent)),t}function handleMobileWeiboVideoInfo(e){var t={};return t.poster=e.getAttribute("poster"),t.downloadUrl=e.getAttribute("src"),hostUrl.match(/^.*\/detail\/.*/g)&&(t.title=Utils.checkCharLengthAndSubStr(document.querySelector(".weibo-main .weibo-text").textContent)),t}function handleMobileDouyinVideoInfo(e){var t={};t.poster=e.getAttribute("poster"),t.downloadUrl=e.getAttribute("src"),e=document.querySelector(".video-container img.poster"),e&&(t.poster=e.getAttribute("src")),e=document.querySelector(".desc .multi-line .multi-line_text");return e&&(t.title=e.textContent),t}function handlePCDetailDouyinVideoInfo(e){var t={};t.poster=e.getAttribute("poster"),t.downloadUrl=e.getAttribute("src"),e=document.querySelector("div[data-e2e=video-detail] div[data-e2e=detail-video-info] div h2");return e&&(t.title=e.textContent),t}function handlePCHomeDouyinVideoInfo(e){var t,o={};o.poster=e.getAttribute("poster"),o.downloadUrl=e.getAttribute("src"),e=e.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;return e&&((t=e.querySelector(".imgBackground img"))&&(o.poster=t.getAttribute("src")),t=e.querySelector(".video-info-detail .title span.e_h_fqNj"))&&(o.title=t.textContent),o}function handleMobileToutiaoVideoInfo(e){var t={};t.poster=e.getAttribute("poster"),t.downloadUrl=e.getAttribute("src"),e=document.querySelector(".video .xgplayer-placeholder .xgplayer-poster"),e&&(e=e.getAttribute("style"))&&(e=Utils.matchUrlInString(e),t.poster=e),e=document.querySelector(".video .video-header .video-title-wrapper .video-title");return e&&(t.title=e.textContent),t}function handleMobileTenxunVideoInfo(e){var t={};t.poster=e.getAttribute("poster"),t.downloadUrl=e.getAttribute("src"),e=document.querySelector(".mod_play .player_container .txp_poster_img"),e&&(e=e.getAttribute("src"),e=Utils.completionSourceUrl(e),t.poster=e),e=document.querySelector(".mod_box .mod_bd .mod_video_info .video_title");if(e){let o=e.textContent;o=o?o.trim():"",e=document.querySelector(".mod_box .mod_bd .mod_list_slider .slider_box .item.current span"),e&&(o=(o+=e.textContent)?o.trim():""),t.title=o}return t}function handleRedditVideoInfo(e){var t={};t.poster=e.getAttribute("poster"),t.downloadUrl=e.getAttribute("src"),e=document.querySelector("shreddit-app shreddit-title");return e&&(t.title=e.getAttribute("title")),t}function handlePornhubVideoInfo(e){var t={},o=(t.poster=e.getAttribute("poster"),t.downloadUrl=e.getAttribute("src"),e.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement);return o&&o.classList.contains("playerWrapper")?((o=document.querySelector("#videoShow .categoryTags .headerWrap h1"))&&(o=o.textContent)&&(t.title=o.trim()),(o=document.querySelector("#videoPlayerPlaceholder img.videoElementPoster"))&&(t.poster=o.getAttribute("src")),parsePornhubVideoInfoByWindow(t)):(o=e.parentNode.parentNode.parentNode.parentNode.parentNode,o&&"li"==o.tagName.toLowerCase()&&(e=o.querySelector(".videoWrapper .singleVideo a img.videoThumb"),e&&(t.title=e.getAttribute("alt"),t.title&&(t.title="[Related videos] "+t.title),t.poster=e.getAttribute("src"))),t)}function parsePornhubVideoInfoByWindow(e){if((e=e||{}).videoKey=Utils.queryURLParams(window.location.href,"viewkey"),window.VIDEO_SHOW&&(!e.videoKey||e.videoKey==window.VIDEO_SHOW.vkey)){e.title||(e.title=window.VIDEO_SHOW.videoTitle),e.poster||(e.poster=window.VIDEO_SHOW.videoImage);var t=window.VIDEO_SHOW.playerId;if(t&&(t=t.split("_"),1<t.length&&(t="flashvars_"+t[1],t=window[t].mediaDefinitions,t&&t.length))){let o,r=[];t.forEach((t=>{"hls"==t.format&&"string"==typeof t.quality&&t.videoUrl&&r.push({downloadUrl:t.videoUrl,qualityLabel:t.quality,quality:Number(t.quality)}),!t.defaultQuality||"boolean"!=typeof t.defaultQuality&&"number"!=typeof t.defaultQuality||(o=t.defaultQuality,e.downloadUrl)||(e.downloadUrl=t.videoUrl)})),e.qualityList=r}}return e}function handleFacebookVideoInfo(e){var t,o={};o.poster=e.getAttribute("poster"),o.downloadUrl=e.getAttribute("src"),o.title=e.getAttribute("title"),e=e.parentElement.parentElement.parentElement.parentElement.parentElement;return e&&e.classList.contains("displayed")&&"container"==e.getAttribute("data-type")&&((t=e.querySelector("div[data-type='video'] img.img"))&&(o.poster=t.getAttribute("src")),t=e.querySelector("div.displayed > div[data-type='container'] > div[data-type='container'] > div[data-type='container'] > div[data-type='text'] > div.native-text"))&&(o.title=t.textContent),o}function handleInstagramVideoInfo(e){var t,o={};o.poster=e.getAttribute("poster")||"",o.downloadUrl=e.getAttribute("src"),o.title=e.getAttribute("title");let r=e.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;return r&&r.classList.contains("_ab8w")&&r.classList.contains("_ab94")&&r.classList.contains("_ab99")&&r.classList.contains("_ab9h")&&r.classList.contains("_ab9m")&&r.classList.contains("_ab9p")&&r.classList.contains("_abcm")?((t=r.querySelector("._aatk .x1uhb9sk .x10l6tqk .x78zum5 img.x5yr21d"))&&(o.poster=t.getAttribute("src")),(t=r.querySelector("._ab9f div._ae1h._ae1i ._ae2s div._ae5q._akdn div div div"))&&t.textContent&&(o.title=t.textContent.replace("... more",""))):(r=e.parentNode.parentNode.parentNode.parentNode.parentNode)&&r.classList.contains("_a8b4")&&r.classList.contains("_acjh")&&(t=r.querySelector("div > div > div.x9f619.x1d8287x.xz4gly6  div.x6ikm8r.x10wlt62 span"))&&(o.title=t.textContent),o}function handleXiaohongshuVideoInfo(e){var t={};t.poster=e.getAttribute("poster")||"",t.downloadUrl=e.getAttribute("src"),t.title=e.getAttribute("title"),e=document.querySelector(".video-container .video-banner .img-box"),e&&(e=e.getAttribute("style"),e=Utils.matchUrlInString(e))&&(t.poster=Utils.completionSourceUrl(e)),e=document.querySelector(".video-container .stage-bottom .author-desc-wrapper .author-desc");if(e){let o=e.textContent;o&&(o=o.replace(/^展开/g,""),t.title=Utils.checkCharLengthAndSubStr(o))}return t}function handleJableVideoInfo(e){var t={};t.poster=e.getAttribute("poster")||"",t.downloadUrl=e.getAttribute("src"),t.title=e.getAttribute("title"),e=document.querySelector(".video-info .info-header .header-left h4");return e&&(t.title=e.textContent),t}function handleHxaa79VideoInfo(e){var t={};t.poster=e.getAttribute("poster")||"",t.downloadUrl=e.getAttribute("src"),t.title=e.getAttribute("title"),e=document.querySelector(".play_main .play_main_1");return e&&(t.title=e.textContent),t}function handleBaiduVideoInfo(e){let t={};if(t.poster=e.getAttribute("poster")||"",t.downloadUrl=e.getAttribute("src"),t.title=e.getAttribute("title"),"activity.baidu.com"===host){var o=window.PAGE_DATA;if(o&&o.pageData&&o.pageData.remote&&o.pageData.remote.mainVideoList&&o.pageData.remote.mainVideoList.length)r=o.pageData.remote.mainVideoList[0],o=o.pageData.remote.moreVideoList,t.title=r.title,t.poster=r.poster,t.downloadUrl=r.videoUrl,o&&o.length&&o.forEach((e=>{videoIdSet.size&&videoIdSet.has(e.vid)||Utils.isURL(e.videoUrl)&&(videoIdSet.add(e.vid),videoList.push({title:e.title,poster:e.poster,downloadUrl:e.videoUrl,hostUrl,videoUuid:e.vid}))}));else{t.title=getBaiduVideoTitle();const e=document.querySelector(".stickyBlock .curVideoPlay video");e&&(t.poster=e.getAttribute("poster"),t.downloadUrl=e.getAttribute("src"))}}else if("mbd.baidu.com"===host){var r=window.jsonData;if(r&&r.curVideoMeta&&(o=r.curVideoMeta,(t=haokanBaiduVideoInfo(o))&&Object.keys(t).length))return t;t.title=getBaiduVideoTitle(),t.poster=getBaiduVideoPoster()}else if("haokan.baidu.com"===host){r=window.__PRELOADED_STATE__,o=Utils.queryURLParams(hostUrl,"vid");var n=e.getAttribute("src");if(n&&o&&-1<n.indexOf(o)){if(r&&r.curVideoMeta&&(n=r.curVideoMeta,(t=haokanBaiduVideoInfo(n))&&Object.keys(t).length))return t;t.title=getBaiduVideoTitle(),t.poster=getBaiduVideoPoster()}else t.title=e.parentElement.parentElement.querySelector("h3.land-recommend-bottom-title")?e.parentElement.parentElement.querySelector("h3.land-recommend-bottom-title").textContent:"",t.poster=e.parentElement&&e.parentElement.querySelector("img.video-img")?e.parentElement.querySelector("img.video-img").getAttribute("src"):""}else"pan.baidu.com"===host&&(t.title=getBaiduVideoTitle()),"m.baidu.com"===host&&((o=document.querySelector(".sfc-video-page-info .sfc-video-page-info-title h3.title-waterfallB"))&&(t.title=o.textContent),r=document.querySelector(".video-poster .c-img-wrapper img.c-img-img"))&&(t.poster=r.getAttribute("src"));return t}function haokanBaiduVideoInfo(e){if(!e)return{};var t={};if(t.title=e.title,t.poster=e.poster,t.downloadUrl=e.playurl,e.clarityUrl&&e.clarityUrl.length){let o=[];e.clarityUrl.forEach((e=>{e.vodVideoHW,o.push({downloadUrl:e.url,qualityLabel:e.title,quality:e.key})})),t.qualityList=o}return t}function getBaiduVideoPoster(){var e=document.querySelector(".art-player-wrapper .art-video-player .art-poster");return e&&(e=e.getAttribute("style"),e)?Utils.matchUrlInString(e):(e=document.querySelector("#bdMainPlayer .art-video-player .art-poster"),e&&(e=e.getAttribute("style"),e)?Utils.matchUrlInString(e):"")}function getBaiduVideoTitle(){var e=document.querySelector(".adVideoPageV3 .curVideoInfo h3.videoTitle");return(e=e||document.querySelector(".video-info .video-info-title"))||(e=document.querySelector(".video-main .video-content .video-title .video-title-left"))?e.textContent:""}function fetchYoutubeDecodeFun(e,t){return new Promise(((o,r)=>{if(isContent)browser.runtime.sendMessage({from:"sniffer",operate:"fetchYoutubeDecodeFun",pathUuid:e,pathUrl:t},(e=>{e=e&&e.decodeFun?e.decodeFun:"",o(e)}));else{const r=Math.random().toString(36).substring(2,9),n=e=>{e.data.pid===r&&"GET_YOUTUBE_DECODE_FUN_RESP"===e.data.name&&(o(e.data.decodeFun),window.removeEventListener("message",n))};window.postMessage({id:r,pid:r,name:"GET_YOUTUBE_DECODE_FUN",pathUuid:e,pathUrl:t}),window.addEventListener("message",n)}}))}async function handleYoutubeVideoInfo(videoSnifferDom){const videoId=Utils.queryURLParams(hostUrl,"v");let videoInfo={},title=(videoInfo.poster=videoSnifferDom.getAttribute("poster")||"",videoInfo.downloadUrl=videoSnifferDom.getAttribute("src"),videoSnifferDom.getAttribute("title"));videoInfo.title=title;const ytplayer=window.ytplayer,playerResp=ytplayer?ytplayer.bootstrapPlayerResponse:{};if(playerResp&&playerResp.videoDetails&&playerResp.streamingData&&(!videoId||videoId===playerResp.videoDetails.videoId)){let jsPath=ytplayer.bootstrapWebPlayerContextConfig?ytplayer.bootstrapWebPlayerContextConfig.jsUrl:"";if(!decodeSignatureCipher){let pathUuid=jsPath;try{let e=jsPath.split("/");pathUuid=jsPath.startsWith("/")?e[3]:e[2]}catch(error){}let decodeSignatureCipherFunStr=await fetchYoutubeDecodeFun(pathUuid,jsPath);decodeSignatureCipherFunStr&&(decodeSignatureCipher=eval(`(${decodeSignatureCipherFunStr})`))}const videoDetails=playerResp.videoDetails;let detailTitle=videoDetails.title||"",thumbnail=(videoInfo.title=detailTitle,videoDetails.thumbnail);if(thumbnail){let e=thumbnail.thumbnails;e&&e.length&&(videoInfo.poster=e.pop().url)}playerResp.microformat&&playerResp.microformat.playerMicroformatRenderer&&playerResp.microformat.playerMicroformatRenderer.thumbnail&&playerResp.microformat.playerMicroformatRenderer.thumbnail.thumbnails.length&&(videoInfo.poster=playerResp.microformat.playerMicroformatRenderer.thumbnail.thumbnails[0].url);const streamingData=playerResp.streamingData,adaptiveFormats=streamingData.adaptiveFormats,formats=streamingData.formats,qualityFormatsList=formats;if(title=title||"",adaptiveFormats&&adaptiveFormats.length&&title.replace(/\s+/g,"")===detailTitle.replace(/\s+/g,"")){let e=[],t=new Set,o=adaptiveFormats.filter((e=>{if(-1<e.mimeType.indexOf("audio/mp4"))return e})),r="";if(o&&o.length){let e=o.sort(Utils.compare("bitrate")).pop();r=decodeSignatureCipher?decodeSignatureCipher(e):""}adaptiveFormats.forEach((o=>{var n=o.mimeType;if(-1<n.indexOf("video/mp4")&&o.url&&!t.has(o.quality)&&(t.add(o.quality),e.push({downloadUrl:o.url,qualityLabel:o.qualityLabel,quality:o.quality})),-1<n.indexOf("video/mp4")&&o.signatureCipher&&!t.has(o.quality)){var i=decodeSignatureCipher?decodeSignatureCipher(o.signatureCipher):"";let a;n.match(/.*codecs=.*mp4.*/g)||(a=r),t.add(o.quality),e.push({downloadUrl:i,qualityLabel:o.qualityLabel,quality:o.quality,protect:!0,audioUrl:a})}}));let n=adaptiveFormats.filter((e=>{if(-1<e.mimeType.indexOf("audio/webm"))return e})),i="";if(n&&n.length){let e=n.sort(Utils.compare("bitrate")).pop();i=decodeSignatureCipher?decodeSignatureCipher(e):""}adaptiveFormats.forEach((o=>{var r=o.mimeType;if(-1<r.indexOf("video/webm")&&o.url&&!t.has(o.quality)&&(t.add(o.quality),e.push({downloadUrl:o.url,qualityLabel:o.qualityLabel,quality:o.quality})),-1<r.indexOf("video/webm")&&o.signatureCipher&&!t.has(o.quality)){var n=decodeSignatureCipher?decodeSignatureCipher(o.signatureCipher):"";let a;r.match(/.*codecs=.*webm.*/g)||(a=i),t.add(o.quality),e.push({downloadUrl:n,qualityLabel:o.qualityLabel,quality:o.quality,protect:!0,audioUrl:a})}})),e&&e.length&&(videoInfo.qualityList=e)}else videoInfo.title=title||getYoutubeVideoTitleByDom();videoInfo.downloadUrl=getYoutubeVideoSourceByDom(),videoInfo.poster||(videoInfo.poster=getYoutubeVideoPosterByDom())}else videoInfo={},videoInfo.title=title||getYoutubeVideoTitleByDom(),videoInfo.downloadUrl=getYoutubeVideoSourceByDom();let posterImg=videoInfo.poster;return posterImg=posterImg||getYoutubeVideoPosterByDom(),videoId!=playerResp.videoDetails.videoId&&(posterImg=`https://i.ytimg.com/vi/${videoId}/hqdefault.jpg`),posterImg=posterImg||`https://i.ytimg.com/vi/${videoId}/hqdefault.jpg`,videoInfo.poster=posterImg,checkAdForYoutube(videoInfo.downloadUrl)&&(videoInfo.type="ad"),videoInfo}function checkAdForYoutube(e){return e&&-1<e.indexOf("pltype=adhost")||!(!(e=document.querySelector("#container .video-ads"))||isHidden(e))}function getYoutubeVideoSourceByDom(){var e=document.querySelector(".html5-video-player .html5-video-container video");return e?e.getAttribute("src"):""}function getYoutubeVideoTitleByDom(){var e=document.querySelector(".slim-video-metadata-header .slim-video-information-content .slim-video-information-title");return(e=e||document.querySelector("#title h1.style-scope"))?e.textContent:""}function getYoutubeVideoPosterByDom(){var e=document.querySelector(".ytp-cued-thumbnail-overlay-image");return e&&(e=e.getAttribute("style"),e)?Utils.matchUrlInString(e):(e=document.querySelector(".html5-video-player .ytp-cued-thumbnail-overlay .ytp-cued-thumbnail-overlay-image"),e&&(e=e.getAttribute("style"),e)?Utils.matchUrlInString(e):(e=document.querySelector(".video-wrapper .background-style-black"),e&&(e=e.getAttribute("style"),e)?Utils.matchUrlInString(e):""))}function handlePageInterceptor(){function e(e){return null!=e.match(/^(https?:\/\/|\/).*\.(mp4|m3u8)$/)}let t=new Set,o=(XMLHttpRequest.prototype.reallyOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(o,r,n,i,a){this.reallyOpen(o,r,n,i,a),e(r)&&!t.has(r)&&(t.add(r),window.postMessage({name:"VIDEO_LINK_CAPTURE",urls:t}),isContent)&&(o={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoLinkSet:t},browser.runtime.sendMessage(o,(e=>{})))},window.fetch);window.fetch=function(r,n){var i="object"==typeof r?r.url:r;return e(i)&&!t.has(i)&&(t.add(i),window.postMessage({name:"VIDEO_LINK_CAPTURE",urls:t}),isContent)&&(i={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoLinkSet:t},browser.runtime.sendMessage(i,(e=>{}))),o(r,n)}}startFindVideoInfo(!1),document.onreadystatechange=()=>{"complete"===document.readyState&&startFindVideoInfo(!0)}}let videoPageUrl=window.location.href,videoInfoList=[],videoLinkSet=new Set;window.addEventListener("message",(e=>{if(e&&e.data&&e.data.name){var t=e.data.name;if("VIDEO_LINK_CAPTURE"===t){var o=e.data.urls||new Set;o=(videoLinkSet=o,{from:"sniffer",operate:"VIDEO_INFO_PUSH",videoPageUrl,videoLinkSet});browser.runtime.sendMessage(o,(e=>{}))}else if("VIDEO_INFO_CAPTURE"===t)o=e.data.videoList||[],videoInfoList=o,o={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoPageUrl,videoInfoList},browser.runtime.sendMessage(o,(e=>{}));else if("GET_STAY_AROUND"===t){let t=e.data.pid;browser.runtime.sendMessage({from:"sniffer",operate:"GET_STAY_AROUND"},(e=>{window.postMessage({pid:t,name:"GET_STAY_AROUND_RESP",response:e})}))}else if("GET_LONG_PRESS_STATUS"===t){let t=e.data.pid;browser.runtime.sendMessage({from:"popup",operate:"getLongPressStatus"},(e=>{e=e&&e.longPressStatus?e.longPressStatus:"on",window.postMessage({pid:t,name:"GET_LONG_PRESS_STATUS_RESP",longPressStatusRes:e})}))}else if("GET_YOUTUBE_DECODE_FUN"===t){let r=e.data.pid;o=e.data.pathUuid,t=e.data.pathUrl,browser.runtime.sendMessage({from:"sniffer",operate:"fetchYoutubeDecodeFun",pathUrl:t,pathUuid:o},(e=>{e=e&&e.decodeFun?e.decodeFun:"",window.postMessage({pid:r,name:"GET_YOUTUBE_DECODE_FUN_RESP",decodeFun:e})}))}}}))}()})()})();