(()=>{var e={7022:(e,t,o)=>{o(7658),function(){const e=window.location.host;let t=document.createElement("script");t.type="text/javascript",t.id="Stay_parse_video_Inject_JS_"+e;let o=`\n\nlet handleVideoInfo = ${n}\n\nhandleVideoInfo();`;if(t.appendChild(document.createTextNode(o)),document.body)document.body.appendChild(t);else{const e=document.documentElement,o=new MutationObserver((()=>{document.body&&(o.disconnect(),document.body.appendChild(t))}));o.observe(e,{childList:!0})}function n(){const e=window.location.href,t=window.location.host;console.log("------------injectParseVideoJS-----start------------------");let o=[],n=new Set;const r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;let i;function l(){i=document.querySelectorAll("video");let e=i&&i.length;e?(console.log("videoDoms---false-----",i),s(i)):a()}function a(){const e=new r((function(t){console.log("----------------MutationObserver---------------",t);try{t.forEach((function(e){if(i=document.querySelectorAll("video"),"VIDEO"===e.target.nodeName&&i&&i.length)throw console.log("mutation.videoDoms-----",i),s(i),new Error("endloop")}))}catch(o){if("endloop"!==o.message)throw o;e.disconnect()}})),t={attributes:!0,childList:!0,characterData:!0,subtree:!0};e.observe(document,t)}function s(e){if(console.log("parseVideoNodeList-----------------start------------------"),e&&e.length){let t=Array.from(e);t.forEach((e=>{if(console.log("parseVideoNodeList.item=======",e),!e||!(e instanceof HTMLElement))return;let t=e.getAttribute("src");if(t&&n.size&&n.has(t))return;let r=d(e);console.log("parseVideoNodeList------videoInfo---------",r),r.downloadUrl&&(n.add(t),o.push(r))})),console.log("parseVideoNodeList-----------result---------",o)}}function d(o){let n={},r=o.getAttribute("poster"),i=o.getAttribute("title"),l=o.getAttribute("src"),a=[];return console.log("handleVideoInfoParse---host---",t),t.indexOf("youtube.com")?n=y():t.indexOf("baidu.com")&&(n=c()),l||(l=n.downloadUrl),r||(r=n.poster),i||(i=n.title),n.qualityList&&n.qualityList.length&&(a=n.qualityList),n["title"]=i,n["poster"]=r,n["downloadUrl"]=l,n["hostUrl"]=e,n["qualityList"]=a,n}function c(){let r={};if("activity.baidu.com"===t){const t=window.PAGE_DATA;if(t&&t.pageData&&t.pageData.remote&&t.remote.mainVideoList&&t.remote.mainVideoList.length){const i=t.remote.mainVideoList[0];return r["title"]=i.title,r["poster"]=i.poster,r["downloadUrl"]=i.videoUrl,t.remote.moreVideoList&&t.remote.moreVideoList.length&&t.remote.moreVideoList.forEach((t=>{n.size&&n.has(t.videoUrl)||o.push({title:t.title,poster:t.poster,downloadUrl:t.videoUrl,hostUrl:e})})),r}r["title"]=p();const i=document.querySelector(".stickyBlock .curVideoPlay video");return i&&(r["poster"]=i.getAttribute("poster"),r["downloadUrl"]=i.getAttribute("src")),r}if("mbd.baidu.com"===t){const e=window.jsonData;if(e&&e.curVideoMeta){const t=e.curVideoMeta;if(r=u(t),r&&Object.keys(r).length)return r}return r["title"]=p(),r["poster"]=f(),r}if("haokan.baidu.com"===t){const e=window.__PRELOADED_STATE__;if(e&&e.curVideoMeta){const t=e.curVideoMeta;if(r=u(t),r&&Object.keys(r).length)return r}return r["title"]=p(),r["poster"]=f(),r}return"pan.baidu.com"===t&&(r["title"]=p()),r}function u(e){if(!e)return{};let t={};if(t["title"]=e.title,t["poster"]=e.poster,t["downloadUrl"]=e.playurl,e.clarityUrl&&e.clarityUrl.length){let o=[];const n=e.clarityUrl;n.forEach((e=>{e.vodVideoHW;o.push({downloadUrl:e.url,qualityLabel:e.title,quality:e.key})})),t["qualityList"]=o}return t}function f(){const e=document.querySelector(".art-player-wrapper .art-video-player .art-poster");if(e){let t=e.getAttribute("style");if(t)return v(t)}const t=document.querySelector("#bdMainPlayer .art-video-player .art-poster");if(t){let e=t.getAttribute("style");if(e)return v(e)}return""}function p(){const e=document.querySelector(".adVideoPageV3 .curVideoInfo h3.videoTitle");if(e)return e.textContent;const t=document.querySelector(".videoinfo .videoinfo-title");if(t)return t.textContent;const o=document.querySelector(".video-main .video-content .video-title .video-title-left");return o?o.textContent:""}function y(){let e={};const t=window.ytInitialPlayerResponse;if(console.log(window),t){console.log("playerResp-------",t);const o=t.videoDetails;if(o){o.title?e["title"]=o.title:e["title"]=h();let t=o.thumbnail;if(t){let o=t.thumbnails;o&&o.length?e["poster"]=o.pop().url:e["poster"]=g()}else e["poster"]=g()}else e["title"]=h(),e["poster"]=g();const n=t.streamingData;if(n){const t=n.adaptiveFormats;if(t&&t.length){let o=[],n=new Set;t.forEach((e=>{let t=e.mimeType;t.indexOf("video/mp4")>-1&&e.url&&!n.has(e.quality)&&(n.add(e.quality),o.push({downloadUrl:e.url,qualityLabel:e.qualityLabel,quality:e.quality}))})),o&&o.length?(e["downloadUrl"]=o[0].url,e["qualityList"]=o):e["downloadUrl"]=m()}else e["downloadUrl"]=m()}else e["downloadUrl"]=m()}else console.log("playerResp---is---null-------"),e["title"]=h(),e["poster"]=g(),e["downloadUrl"]=m();return e}function m(){let e=document.querySelector(".html5-video-player .html5-video-container video");return e?e.getAttribute("src"):""}function h(){const e=document.querySelector(".slim-video-metadata-header .slim-video-information-content .slim-video-information-title");return e?e.textContent:""}function g(){const e=document.querySelector(".ytp-cued-thumbnail-overlay-image");if(console.log(e),e){console.log("overlayImg-------",e);let t=e.getAttribute("style");if(console.log("overlayImg----imgText---",t),t)return v(t)}return""}function v(e){const t=new RegExp("(https?|http)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]","g"),o=e.match(t);return o&&o.length?o[0]:""}l()}document.onreadystatechange=()=>{console.log("document.readyState==",document.readyState),"complete"===document.readyState&&(console.log("readyState-----",window.ytInitialPlayerResponse),console.log("readyStateytInitialPlayerResponseytInitialPlayerResponse-----"))}}()}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.m=e,(()=>{var e=[];o.O=(t,n,r,i)=>{if(!n){var l=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],i=e[c][2];for(var a=!0,s=0;s<n.length;s++)(!1&i||l>=i)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(a=!1,i<l&&(l=i));if(a){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,r,i]}})(),(()=>{o.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return o.d(t,{a:t}),t}})(),(()=>{o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{o.j=875})(),(()=>{var e={875:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,l=n[0],a=n[1],s=n[2],d=0;if(l.some((t=>0!==e[t]))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(s)var c=s(o)}for(t&&t(n);d<l.length;d++)i=l[d],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(c)},n=self["webpackChunkstay_popup"]=self["webpackChunkstay_popup"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=o.O(void 0,[998],(()=>o(7022)));n=o.O(n)})();