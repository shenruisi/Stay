(()=>{var t={7022:(t,e,n)=>{let o;n(2801),n(7658),"undefined"!==typeof window.browser&&(o=window.browser),"undefined"!==typeof window.chrome&&(o=window.chrome);const i=o;(function(){let t=!1;try{e(),document.addEventListener("securitypolicyviolation",(e=>{t=!0,n(t)}))}catch(l){}function e(){const t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;let e=window.location.host,o=document.createElement("script");o.type="text/javascript",o.id="stay_inject_parse_video_js_"+e;let i=`\n\nlet handleVideoInfo = ${n}\n\nhandleVideoInfo(false);`;if(o.appendChild(document.createTextNode(i)),document.body)document.body.appendChild(o);else{let e=new t(((t,n)=>{document.body&&(document.body.appendChild(o),e.disconnect())}));e.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}}function n(t){let e=window.location.href,n=window.location.host,o=[],r=new Set,a=new Set;const s=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;let d,c=[];const u={isMobile:function(){const t=navigator.userAgent;let e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=e.filter((e=>t.includes(e)));return!!n.length},queryURLParams:function(t,e){const n=new RegExp("[?&#]+"+e+"=([^?&#]+)"),o=n.exec(t);return o&&o[1]?o[1]:""},matchUrlInString:function(t){const e=new RegExp("(https?|http)?(:)?//[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]","g"),n=t.match(e);return n&&n.length?n[0]:""},isURL:function(t){return!!t&&/^http[s]?:\/\/.*/.test(t)},completionSourceUrl:function(t){return t?(/^(f|ht)tps?:\/\//i.test(t)||(t=/^\/\//i.test(t)?window.location.protocol+t:window.location.origin+t),t):""},checkCharLengthAndSubStr:function(t,e=80){if(!t)return"";let n=t.replace(/[^x00-xff]/g,"01");return n.length<=e?t:t.substr(0,e)},getUrlPathName:function(t){let n="";n=this.isURL(t)?new URL(t).pathname:new URL(e).pathname;let o=n.split("/");return o=o.filter((t=>{if(t&&""!=t)return t})),o.pop()},generateUuid:function(t,e){t=t||32;let n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(e=e||o.length,t)for(n=0;n<t;n++)i[n]=o[0|Math.random()*e];else{let t;for(i[8]=i[13]=i[18]=i[23]="_",i[14]="4",n=0;n<36;n++)i[n]||(t=0|16*Math.random(),i[n]=o[19==n?3&t|8:t])}return i.join("")},isBase64(t){if(!t)return!1;if(/^data:.*\w+;base64,/.test(t))return!0;if(""===t||""===t.trim())return!1;try{return window.btoa(window.atob(t))==t}catch(e){return!1}},isDark(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches},parseToDOM(t){let e=document.createElement("template");return"string"==typeof t?(e.innerHTML=t,e.content):t},getHostname(t){if(!t)return"";try{return new URL(t).hostname.toLowerCase()}catch(l){return t.split("/")[0].toLowerCase()}},div(t,e){let n,o,i=0,r=0;try{i=t.toString().split(".")[1].length}catch(l){i=0}try{r=e.toString().split(".")[1].length}catch(l){r=0}return n=Number(t.toString().replace(".","")),o=Number(e.toString().replace(".","")),this.mul(n/o,Math.pow(10,r-i))},sub(t,e){let n,o,i;try{n=t.toString().split(".")[1].length}catch(r){n=0}try{o=e.toString().split(".")[1].length}catch(r){o=0}return i=Math.pow(10,Math.max(n,o)),(this.mul(t,i)-this.mul(e,i))/i},mul(t,e){let n=0,o=t.toString(),i=e.toString();try{n+=o.split(".")[1].length}catch(r){}try{n+=i.split(".")[1].length}catch(r){}return Number(o.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,n)},add(t,e){let n,o,i;try{n=t.toString().split(".")[1].length}catch(r){n=0}try{o=e.toString().split(".")[1].length}catch(r){o=0}return i=Math.pow(10,Math.max(n,o)),(this.mul(t,i)+this.mul(e,i))/i}};class p{constructor(t,e){this.dom=t,this.timer=0,this.init(e)}init(t){this.touchstart(t),this.touchend(),this.touchmove(),this.bindLongPressEventFlag()}bindLongPressEventFlag(){this.dom.setAttribute("stay-long-press","yes")}touchstart(t){this.dom.addEventListener("touchstart",(function(e){e.preventDefault(),this.timer=setTimeout((()=>{e.preventDefault(),"function"===typeof t?(t(),this.timer=0):console.error("callback is not a function!")}),600)}),!1)}touchend(){this.dom.addEventListener("touchend",(function(t){return t.preventDefault(),clearTimeout(this.timer),0!=this.timer&&console.log(t),!1}))}touchmove(){this.dom.addEventListener("touchmove",(function(t){return clearTimeout(this.timer),this.timer=0,!1}))}}function m(t){d=document.querySelectorAll("video");let e=d&&d.length;e||(d=document.querySelectorAll(".post-content shreddit-player"),e=d&&d.length),e?h(d):(h(),t&&f()),y()}function f(){for(let t=1;t<10;t++){let e;(function(t){e=setTimeout((()=>{d=document.querySelectorAll("video");let t=d&&d.length;t&&(h(d),c.forEach((t=>{clearTimeout(t)})))}),200*t)})(t),c.push(e)}}function y(){const t=new s((function(t){try{t.forEach((function(t){d=document.querySelectorAll("video"),"VIDEO"===t.target.nodeName&&d&&d.length&&(n=window.location.host,h(d))}))}catch(e){}})),e={attributes:!0,childList:!0,characterData:!0,subtree:!0};t.observe(document,e)}function h(e){if(e&&e.length){let t=e.length,n=0,o=Array.from(e);o.forEach((t=>{if(!t||!(t instanceof HTMLElement))return void n++;let e=t.getAttribute("stay-sniffing");e||(e=u.generateUuid(),t.setAttribute("stay-sniffing",e));const o=t;let i=t.getAttribute("src");if(!i){let e=t.querySelector("source");e&&(t=e,i=e.getAttribute("src"))}if(!i)return void n++;let r=v(t,o,e);r.downloadUrl||n++})),n==t&&x()}else x();if(window.postMessage({name:"VIDEO_INFO_CAPTURE",videoList:o}),t){let t={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoInfoList:o};i.runtime.sendMessage(t,(t=>{}))}}function g(t,n){let i=n.downloadUrl;u.isURL(i)||(n.downloadUrl=e),b(t,n),a.size&&(a.has(n.videoUuid)||a.has(n.videoKey))?o.forEach((t=>(t.videoUuid!=n.videoUuid&&t.videoUuid!=n.videoKey||(t.downloadUrl=n.downloadUrl,t.poster=n.poster?n.poster:"",t.title=n.title,t.hostUrl=n.hostUrl,t.qualityList=n.qualityList?n.qualityList:[]),t))):(n.videoKey&&(a.add(n.videoKey),n.videoUuid||(n.videoUuid=n.videoKey)),n.videoUuid&&a.add(n.videoUuid),o.push(n))}function b(t,e){if(!t)return;let n=t.getAttribute("stay-long-press");n&&"yes"==n||(t.style.userSelect="none",new p(t,(()=>{w(t,e)})))}function w(t,e){let n=t.clientWidth,o=t.clientHeight,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=t.getBoundingClientRect().top,l=t.getBoundingClientRect().left;l=l||5;let a=n,s=u.div(u.mul(a,9),16),d=document.querySelector("#__stay_sinffer_modal");d||(d=m()),d.style.visibility="visible";const c=document.querySelector("#__stay_sinffer_modal ._stay-sinffer-popup"),p=document.querySelector("#__stay_sinffer_modal .__stay-sinffer-content");function m(){let t=[{title:e.title,downloadUrl:e.downloadUrl,poster:e.poster,hostUrl:u.getHostname(e.hostUrl),uuid:"EF95BD4E-B580-4892-B454-09FD657C951E"}],n="stay://x-callback-url/snifferVideo?list="+encodeURIComponent(JSON.stringify(t)),a="background-color: rgb(247,247,247);",d="rgb(54, 54, 57)",c="background-color: rgba(0, 0, 0, 0.4);",p="background-color: rgba(255, 255, 255, 1);",m="color:#000000;",f="https://res.stayfork.app/scripts/923EC60A7EB6B878317747AF29D99104/icon.png";u.isDark()&&(p="background-color: rgba(0, 0, 0, 1);",m="color:#DCDCDC;",a="background-color: rgb(54, 54, 57);",f="https://res.stayfork.app/scripts/0031EAA96B967DA000F1BFA809FADE21/icon.png",d="rgb(247,247,247)");let y="",h="https://res.stayfork.app/scripts/BB8CD00276006365956C32A6556696AD/icon.png",g='<div class="__stay-poster-box" ><div class="__stay-default-poster"><img style="max-width:100%;max-height:100%;" src="'+h+'"/></div><span style="font-size:13px;padding-top: 20px;'+m+'">'+u.getHostname(e.hostUrl)+"</span></div>";e.poster&&(y="border-radius: 10px;",g='<img style="max-width:100%; max-height: 100%; box-shadow: 0 0px 10px rgba(54,54,57,0.1);'+y+'" src="'+e.poster+'"/>');let b=1,w=`<div stay-download="${n}" class="_stay-quality-item ">Download</div>`,v=e.qualityList;if(v&&v.length){let o="";b=0,v.forEach((i=>{t=[{title:e.title,downloadUrl:i.downloadUrl,poster:e.poster,hostUrl:u.getHostname(e.hostUrl),uuid:"EF95BD4E-B580-4892-B454-09FD657C951E"}],n="stay://x-callback-url/snifferVideo?list="+encodeURIComponent(JSON.stringify(t)),o+=`<div stay-download="${n}" class="_stay-quality-item">${i.qualityLabel}</div>`,b+=1})),w=o}let x=r,_=r;if(r<0)_=0;else if(0==r)i==o&&(_=u.div(u.sub(i,s),2));else{let t=u.add(10,36),e=u.add(u.add(s,t),u.add(u.mul(b,38),36));r>u.sub(i,e)&&(_=u.sub(i,e))}let S=`<style id="__style_sinffer_style">\n          .__stay-modal-box{\n            position: fixed; \n            z-index: 9999999; \n            width: 100%; \n            height: 100%; \n            text-align: center; \n            top: 0px;\n            -webkit-overflow-scrolling: touch;\n            margin: 0 auto;\n            transition: all 0.6s;\n            box-sizing: border-box;\n            visibility: hidden;\n          }\n          .__stay-show-modal{\n            ${c}\n            -webkit-backdrop-filter: blur(8px); \n          }\n          .__stay-sinffer-content{\n            width:100%;\n            position: absolute;\n            left: 0;\n            -webkit-transform: translate3d(0, ${x}px, 0);\n            transform: translate3d(0, ${x}px, 0);\n            will-change: transform;\n            -webkit-transition: -webkit-transform .4s cubic-bezier(0,0,.25,1) 80ms;\n            transition: transform .4s cubic-bezier(0,0,.25,1) 80ms;\n            box-sizing: border-box;\n          }\n          .__stay-trans{\n            -webkit-transform: translate3d(0,${_}px,0);\n            transform: translate3d(0,${_}px,0);\n          }\n          __stay-content{\n            width:100%;\n            position: relative;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            justify-items: center;\n            align-items: center;\n          }\n          ._stay-sinffer-popup{\n            width:230px;padding-top: 10px;box-sizing: border-box;border-radius:10px;\n            ${a}\n            position: relative;\n            margin: 16px auto 0 auto;\n            z-index:999999;\n            visibility: hidden;\n            animation: fadein .5s;\n          }\n          .__stay-sinffer-poster{\n            width: 100%;\n            height: ${s}px;\n            padding: ${l}px;\n            margin:0 auto;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            justify-items: center;\n            align-items: center;\n            box-sizing: border-box;\n            box-shadow: 0 0px 10px rgba(54,54,57,0.1);\n            transition: All 0.4s ease-in-out;\n            -webkit-transition: All 0.4s ease-in-out;\n            -moz-transition: All 0.4s ease-in-out;\n            -o-transition: All 0.4s ease-in-out;\n            animation-name: zoom;\n            animation-duration: 0.6s;\n          }\n          .__stay-poster-box{\n            width:100%;\n            height:100%;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            ${p}\n            border-radius: 10px;\n            box-shadow: 0 0px 10px rgba(54,54,57,0.1);\n          }\n          .__stay-default-poster{\n            width:80px;\n            height:60px;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            justify-items: center;\n            align-items: center;\n            box-sizing: border-box;\n          }\n          ._stay-sinffer-title{\n            padding-left: 10px;\n            padding-right: 10px;\n            width: 100%;\n            height:36px;\n            line-height: 18px;\n            word-break:break-all;\n            word-wrap:break-word;\n            color: ${d};\n            -webkit-box-orient: vertical;\n            -webkit-user-select: none;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            text-align: left;\n            margin-bottom: 10px;\n            box-sizing: border-box;\n            font-size: 16px;\n          }\n          ._stay-sinffer-download{\n            width:100%;\n            box-sizing: border-box;\n            display: flex;\n            justify-content: flex-start;\n          }\n          ._stay-quality-item{\n            height: 38px;\n            box-sizing: border-box;\n            width:100%;\n            padding-right: 20px;\n            position: relative;\n            color: ${d};\n            text-align:left;\n            font-size: 16px;\n            border-top: 0.5px solid ${d};\n            padding: 0 10px;\n            display: flex;\n            align-items: center;\n          }\n          ._stay-quality-item::after{\n            content:"";\n            background: url(${f}) no-repeat 50% 50%;  \n            background-size: 14px;\n            position: absolute;\n            right: 8px;\n            top: 50%;\n            transform: translate(0, -52%);\n            width: 14px;\n            height: 20px;\n          }\n          @keyframes zoom {\n            0% {transform: scale(1.05)}\n            100% {transform: scale(1);${y}}\n          }\n          @keyframes fadein {\n            0% {\n              transform: translate(0, -100%);\n            }\n            100% {\n              transform: none;\n            }\n          }\n          @keyframes fadeout {\n              0% {\n                transform: translate(0,100%);\n              }\n              100% {\n                  transform: none;\n              }\n          }\n        </style>`,U=['<div id="__stay_sinffer_modal" class="__stay-modal-box" >','<div class="__stay-sinffer-content">','<div class="__stay-content">','<div class="__stay-sinffer-poster">'+g+"</div>",'<div class="_stay-sinffer-popup">','<div class="_stay-sinffer-title">'+e.title+"</div>",'<div class="_stay-sinffer-download">',w,"</div>","</div>","</div>","</div>","</div>"];return document.body.append(u.parseToDOM(S)),document.body.append(u.parseToDOM(U.join(""))),document.querySelector("#__stay_sinffer_modal")}p.classList.add("__stay-trans"),setTimeout((function(){d.classList.add("__stay-show-modal"),c.style.visibility="visible"}),600),d.addEventListener("touchmove",(t=>{t.preventDefault()}),!1),d.addEventListener("touchstart",(t=>{t.preventDefault(),d.classList.remove("__stay-show-modal"),c.style.animation="fadeout .5s;",setTimeout((()=>{document.body.removeChild(d),document.body.removeChild(document.querySelector("#__style_sinffer_style"))}),500)}),!1);const f=document.querySelectorAll("#__stay_sinffer_modal ._stay-quality-item");if(f&&f.length)for(let u=0;u<f.length;u++)(function(t){f[u].addEventListener("touchstart",(t=>{let e=t.target.getAttribute("stay-download"),n=document.createElement("a");n.href=e,n.click()}))})()}function v(t,o,i){let r={},l=t.getAttribute("poster"),a=t.getAttribute("title"),s=t.getAttribute("src"),d=[];if(e=window.location.href,s=u.completionSourceUrl(s),!l){let t=document.querySelector("source[type='image/webp'] img");l=t?t.getAttribute("src"):"",a||(a=t?t.getAttribute("alt"):"")}if(n.indexOf("youtube.com")>-1){const t=u.queryURLParams(e,"v");let n=document.querySelector("#player-control-overlay .player-controls-background-container .player-controls-background");n||(n=document.querySelector("#player-control-overlay")),n&&(o=n),r=z(a,t)}else if(n.indexOf("baidu.com")>-1)r=V(t);else if(n.indexOf("bilibili.com")>-1)r=S(t);else if(n.indexOf("mobile.twitter.com")>-1)r=U(t);else if(n.indexOf("m.weibo.cn")>-1)r=q(t);else if(n.indexOf("iesdouyin.com")>-1)r=A(t);else if(n.indexOf("douyin.com")>-1){const e=window.location.pathname;r=e.indexOf("/video")>-1?E(t):L(t)}else n.indexOf("m.toutiao.com")>-1?(o=document.querySelector(".video .xgplayer-wrapper .xgplayer-mobile .trigger"),r=O(t)):n.indexOf("m.v.qq.com")>-1?r=k(t):n.indexOf("www.reddit.com")>-1?r=D(t):n.indexOf("pornhub.com")>-1?r=N(t):n.indexOf("facebook.com")>-1?r=I(t):n.indexOf("instagram.com")>-1?r=M(t):n.indexOf("xiaohongshu.com")>-1&&(r=P(t));return r.downloadUrl&&(s=r.downloadUrl),s=u.completionSourceUrl(s),l||(l=r.poster),a||(a=r.title),r.qualityList&&r.qualityList.length&&(d=r.qualityList),a||(a=u.getUrlPathName(s)),l=u.completionSourceUrl(l),r["title"]=a,r["poster"]=l,r["downloadUrl"]=s,r["hostUrl"]=e,r["qualityList"]=d,r["videoUuid"]=i,s&&g(o,r),r}function x(){setTimeout((()=>{_()}),300)}function _(){let t={},n=window.location.host;e=window.location.href,t.hostUrl=e;let o=null;if(n.indexOf("pornhub.com")>-1&&(o=document.querySelector("#videoShow #videoPlayerPlaceholder .mgp_videoWrapper .mgp_videoPoster img"),o||(o=document.querySelector("#videoShow #videoPlayerPlaceholder .mgp_videoWrapper video")),t=C(t)),t.downloadUrl)return g(o,t),t}function S(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let n=document.querySelector(".main-container .ep-info-pre .ep-info-title");return n||setTimeout((function(){return n=document.querySelector(".video .share-video-info .title-wrapper .title-name span"),n&&(e.title=n.textContent),e}),200),n&&(e.title=n.textContent),e}function U(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let n=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextElementSibling.childNodes[1];return n&&(n=n.querySelector(".css-1dbjc4n .r-92ivih.r-1t01tom .r-1t982j2.r-1j3t67a .css-1dbjc4n.r-1kw4oii a[data-testid='tweetText'] span"),n&&(e.title=u.checkCharLengthAndSubStr(n.textContent))),e}function q(t){let n={};return n.poster=t.getAttribute("poster"),n.downloadUrl=t.getAttribute("src"),e.match(/^.*\/detail\/.*/g)&&(n.title=u.checkCharLengthAndSubStr(document.querySelector(".weibo-main .weibo-text").textContent)),n}function A(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let n=document.querySelector(".video-container img.poster");n&&(e.poster=n.getAttribute("src"));let o=document.querySelector(".desc .multi-line .multi-line_text");return o&&(e.title=o.textContent),e}function E(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const n=document.querySelector("div[data-e2e=video-detail] div[data-e2e=detail-video-info] div h2");return n&&(e.title=n.textContent),e}function L(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let n=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;if(n){let t=n.querySelector(".imgBackground img");t&&(e.poster=t.getAttribute("src"));let o=n.querySelector(".video-info-detail .title span.e_h_fqNj");o&&(e.title=o.textContent)}return e}function O(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const n=document.querySelector(".video .xgplayer-placeholder .xgplayer-poster");if(n){let t=n.getAttribute("style");if(t){let n=u.matchUrlInString(t);e.poster=n}}const o=document.querySelector(".video .video-header .video-title-wrapper .video-title");return o&&(e.title=o.textContent),e}function k(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const n=document.querySelector(".mod_play .player_container .txp_poster_img");if(n){let t=n.getAttribute("src");t=u.completionSourceUrl(t),e.poster=t}const o=document.querySelector(".mod_box .mod_bd .mod_video_info .video_title");if(o){let t=o.textContent;t=t?t.trim():"";const n=document.querySelector(".mod_box .mod_bd .mod_list_slider .slider_box .item.current span");n&&(t+=n.textContent,t=t?t.trim():""),e.title=t}return e}function D(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const n=document.querySelector("shreddit-app shreddit-title");return n&&(e.title=n.getAttribute("title")),e}function N(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let n=t.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;if(n&&n.classList.contains("playerWrapper")){const t=document.querySelector("#videoShow .categoryTags .headerWrap h1");if(t){let n=t.textContent;n&&(e.title=n.trim())}const n=document.querySelector("#videoPlayerPlaceholder img.videoElementPoster");return n&&(e.poster=n.getAttribute("src")),C(e)}let o=t.parentNode.parentNode.parentNode.parentNode.parentNode;if(o&&"li"==o.tagName.toLowerCase()){let t=o.querySelector(".videoWrapper .singleVideo a img.videoThumb");if(t)return e.title=t.getAttribute("alt"),e.title&&(e.title="[Related videos] "+e.title),e.poster=t.getAttribute("src"),e}return e}function C(t){if(t=t||{},t.videoKey=u.queryURLParams(window.location.href,"viewkey"),window.VIDEO_SHOW&&(!t.videoKey||t.videoKey==window.VIDEO_SHOW.vkey)){t.title||(t.title=window.VIDEO_SHOW.videoTitle),t.poster||(t.poster=window.VIDEO_SHOW.videoImage);let e=window.VIDEO_SHOW.playerId;if(e){let n=e.split("_");if(n.length>1){let e="flashvars_"+n[1],o=window[e].mediaDefinitions;if(o&&o.length){let e=[],n="";o.forEach((o=>{"hls"==o.format&&"string"==typeof o.quality&&e.push({downloadUrl:o.videoUrl,qualityLabel:o.quality,quality:Number(o.quality)}),!o.defaultQuality||"boolean"!=typeof o.defaultQuality&&"number"!=typeof o.defaultQuality||(n=o.defaultQuality,t.downloadUrl||(t.downloadUrl=o.videoUrl))})),t["qualityList"]=e,e.length&&e.forEach((e=>{e.quality==n&&(t.downloadUrl=e.downloadUrl)}))}}}}return t}function I(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title");let n=t.parentElement.parentElement.parentElement.parentElement.parentElement;if(n&&n.classList.contains("displayed")&&"container"==n.getAttribute("data-type")){let t=n.querySelector("div[data-type='video'] img.img");t&&(e.poster=t.getAttribute("src"));let o=n.querySelector("div.displayed > div[data-type='container'] > div[data-type='container'] > div[data-type='container'] > div[data-type='text'] > div.native-text");o&&(e.title=o.textContent)}return e}function M(t){let e={};e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title");let n=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;if(n&&n.classList.contains("_ab8w")&&n.classList.contains("_ab94")&&n.classList.contains("_ab99")&&n.classList.contains("_ab9h")&&n.classList.contains("_ab9m")&&n.classList.contains("_ab9p")&&n.classList.contains("_abcm")){let t=n.querySelector("._aatk .x1uhb9sk .x10l6tqk .x78zum5 img.x5yr21d");t&&(e.poster=t.getAttribute("src"));let o=n.querySelector("._ab9f div._ae1h._ae1i ._ae2s div._ae5q._akdn div div div");o&&o.textContent&&(e.title=o.textContent.replace("... more",""))}else if(n=t.parentNode.parentNode.parentNode.parentNode.parentNode,console.log(n.classList,"videoDetailDom.classList.contains('_a8b4') ===",n.classList.contains("_a8b4")),n&&n.classList.contains("_a8b4")&&n.classList.contains("_acjh")){let t=n.querySelector("div > div > div.x9f619.x1d8287x.xz4gly6  div.x6ikm8r.x10wlt62 span");t&&(e.title=t.textContent)}return e}function P(t){let e={};e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title");const n=document.querySelector(".video-container .video-banner .img-box");if(n){let t=n.getAttribute("style"),o=u.matchUrlInString(t);o&&(e.poster=u.completionSourceUrl(o))}const o=document.querySelector(".video-container .stage-bottom .author-desc-wrapper .author-desc");if(o){let t=o.textContent;t&&(t=t.replace(/^展开/g,""),e.title=u.checkCharLengthAndSubStr(t))}return e}function V(t){let i={};if("activity.baidu.com"===n){const t=window.PAGE_DATA;if(t&&t.pageData&&t.pageData.remote&&t.pageData.remote.mainVideoList&&t.pageData.remote.mainVideoList.length){const n=t.pageData.remote.mainVideoList[0],l=t.pageData.remote.moreVideoList;return i["title"]=n.title,i["poster"]=n.poster,i["downloadUrl"]=n.videoUrl,l&&l.length&&l.forEach((t=>{r.size&&r.has(t.videoUrl)||o.push({title:t.title,poster:t.poster,downloadUrl:t.videoUrl,hostUrl:e})})),i}i["title"]=R();const n=document.querySelector(".stickyBlock .curVideoPlay video");return n&&(i["poster"]=n.getAttribute("poster"),i["downloadUrl"]=n.getAttribute("src")),i}if("mbd.baidu.com"===n){const t=window.jsonData;if(t&&t.curVideoMeta){const e=t.curVideoMeta;if(i=T(e),i&&Object.keys(i).length)return i}return i["title"]=R(),i["poster"]=j(),i}if("haokan.baidu.com"===n){const n=window.__PRELOADED_STATE__,o=u.queryURLParams(e,"vid"),r=t.getAttribute("src");if(r&&o&&r.indexOf(o)>-1){if(n&&n.curVideoMeta){const t=n.curVideoMeta;if(i=T(t),i&&Object.keys(i).length)return i}i["title"]=R(),i["poster"]=j()}else i["title"]=t.parentElement.parentElement.querySelector("h3.land-recommend-bottom-title")?t.parentElement.parentElement.querySelector("h3.land-recommend-bottom-title").textContent:"",i["poster"]=t.parentElement&&t.parentElement.querySelector("img.video-img")?t.parentElement.querySelector("img.video-img").getAttribute("src"):"";return i}return"pan.baidu.com"===n&&(i["title"]=R()),i}function T(t){if(!t)return{};let e={};if(e["title"]=t.title,e["poster"]=t.poster,e["downloadUrl"]=t.playurl,t.clarityUrl&&t.clarityUrl.length){let n=[];const o=t.clarityUrl;o.forEach((t=>{t.vodVideoHW;n.push({downloadUrl:t.url,qualityLabel:t.title,quality:t.key})})),e["qualityList"]=n}return e}function j(){const t=document.querySelector(".art-player-wrapper .art-video-player .art-poster");if(t){let e=t.getAttribute("style");if(e)return u.matchUrlInString(e)}const e=document.querySelector("#bdMainPlayer .art-video-player .art-poster");if(e){let t=e.getAttribute("style");if(t)return u.matchUrlInString(t)}return""}function R(){const t=document.querySelector(".adVideoPageV3 .curVideoInfo h3.videoTitle");if(t)return t.textContent;const e=document.querySelector(".video-info .video-info-title");if(e)return e.textContent;const n=document.querySelector(".video-main .video-content .video-title .video-title-left");return n?n.textContent:""}function z(t,e){let n={};const o=window.ytInitialPlayerResponse;if(o&&o.videoDetails&&o.streamingData&&(!e||e===o.videoDetails.videoId)){const e=o.videoDetails;let i=e.title?e.title:"";n["title"]=i;let r=e.thumbnail;if(r){let t=r.thumbnails;t&&t.length?n["poster"]=t.pop().url:n["poster"]=$()}else n["poster"]=$();const l=o.streamingData,a=l.formats;if(t=t||"",a&&a.length&&t.replace(/\s+/g,"")===i.replace(/\s+/g,"")){let t=[],e=new Set;a.forEach((n=>{let o=n.mimeType;o.indexOf("video/mp4")>-1&&n.url&&!e.has(n.quality)&&(e.add(n.quality),t.push({downloadUrl:n.url,qualityLabel:n.qualityLabel,quality:n.quality}))})),t&&t.length&&(n["qualityList"]=t),n["downloadUrl"]=H()}else n["title"]=t||F(),n["downloadUrl"]=H(),n["poster"]=$()}else n={},n["title"]=t||F(),n["poster"]=$(),n["downloadUrl"]=H();return n}function H(){let t=document.querySelector(".html5-video-player .html5-video-container video");return t?t.getAttribute("src"):""}function F(){const t=document.querySelector(".slim-video-metadata-header .slim-video-information-content .slim-video-information-title");if(t)return t.textContent;const e=document.querySelector("#title h1.style-scope");return e?e.textContent:""}function $(){const t=document.querySelector(".ytp-cued-thumbnail-overlay-image");if(t){let e=t.getAttribute("style");if(e)return u.matchUrlInString(e)}const e=document.querySelector(".html5-video-player .ytp-cued-thumbnail-overlay .ytp-cued-thumbnail-overlay-image");if(e){let t=e.getAttribute("style");if(t)return u.matchUrlInString(t)}const n=document.querySelector(".video-wrapper .background-style-black");if(n){let t=n.getAttribute("style");if(t)return u.matchUrlInString(t)}return""}function B(){function e(t){let e=/^(https?:\/\/|\/).*\.(mp4|m3u8)$/;return null!=t.match(e)}let n=new Set;XMLHttpRequest.prototype.reallyOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(o,r,l,a,s){if(this.reallyOpen(o,r,l,a,s),e(r)&&!n.has(r)&&(n.add(r),window.postMessage({name:"VIDEO_LINK_CAPTURE",urls:n}),t)){let t={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoLinkSet:n};i.runtime.sendMessage(t,(t=>{}))}};let o=window.fetch;window.fetch=function(r,l){let a="object"==typeof r?r.url:r;if(e(a)&&!n.has(a)&&(n.add(a),console.log("VIDEO_LINK_CAPTURE: "+a),window.postMessage({name:"VIDEO_LINK_CAPTURE",urls:n}),t)){let t={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoLinkSet:n};i.runtime.sendMessage(t,(t=>{}))}return o(r,l)}}m(!1),document.onreadystatechange=()=>{"complete"===document.readyState&&m(!0)},B()}let o=[],r=new Set;window.addEventListener("message",(t=>{if(!t||!t.data||!t.data.name)return;const e=t.data.name;if("VIDEO_LINK_CAPTURE"===e){let e=t.data.urls?t.data.urls:new Set;r=e;let n={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoLinkSet:r};i.runtime.sendMessage(n,(t=>{}))}else if("VIDEO_INFO_CAPTURE"===e){let e=t.data.videoList?t.data.videoList:[];o=e;let n={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoInfoList:o};i.runtime.sendMessage(n,(t=>{}))}}))})()}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.m=t,(()=>{var t=[];n.O=(e,o,i,r)=>{if(!o){var l=1/0;for(c=0;c<t.length;c++){o=t[c][0],i=t[c][1],r=t[c][2];for(var a=!0,s=0;s<o.length;s++)(!1&r||l>=r)&&Object.keys(n.O).every((t=>n.O[t](o[s])))?o.splice(s--,1):(a=!1,r<l&&(l=r));if(a){t.splice(c--,1);var d=i();void 0!==d&&(e=d)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[o,i,r]}})(),(()=>{n.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return n.d(e,{a:e}),e}})(),(()=>{n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{n.j=875})(),(()=>{var t={875:0};n.O.j=e=>0===t[e];var e=(e,o)=>{var i,r,l=o[0],a=o[1],s=o[2],d=0;if(l.some((e=>0!==t[e]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(s)var c=s(n)}for(e&&e(o);d<l.length;d++)r=l[d],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(c)},o=self["webpackChunkstay_popup"]=self["webpackChunkstay_popup"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))})();var o=n.O(void 0,[998],(()=>n(7022)));o=n.O(o)})();