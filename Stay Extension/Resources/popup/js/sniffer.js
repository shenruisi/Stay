(()=>{var t={7022:(t,e,o)=>{let n;o(2801),o(7658),"undefined"!==typeof window.browser&&(n=window.browser),"undefined"!==typeof window.chrome&&(n=window.chrome);const r=n;(function(){let t=!1;try{e(),document.addEventListener("securitypolicyviolation",(e=>{t=!0,o(t)}))}catch(l){}function e(){const t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;let e=window.location.host,n=document.createElement("script");n.type="text/javascript",n.id="stay_inject_parse_video_js_"+e;let r=`\n\nlet handleVideoInfo = ${o}\n\nhandleVideoInfo(false);`;if(n.appendChild(document.createTextNode(r)),document.body)document.body.appendChild(n);else{let e=new t(((t,o)=>{document.body&&(document.body.appendChild(n),e.disconnect())}));e.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}}function o(t){let e=window.location.href,o=window.location.host,n=[],i=new Set,a=new Set;const d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;let s,c=[];const u={isMobile:function(){const t=navigator.userAgent;let e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=e.filter((e=>t.includes(e)));return!!o.length},queryURLParams:function(t,e){const o=new RegExp("[?&#]+"+e+"=([^?&#]+)"),n=o.exec(t);return n&&n[1]?n[1]:""},matchUrlInString:function(t){const e=new RegExp("(https?|http)?(:)?//[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]","g"),o=t.match(e);return o&&o.length?o[0]:""},isURL:function(t){return!!t&&/^http[s]?:\/\/.*/.test(t)},completionSourceUrl:function(t){return t?(/^(f|ht)tps?:\/\//i.test(t)||(t=/^\/\//i.test(t)?window.location.protocol+t:window.location.origin+t),t):""},checkCharLengthAndSubStr:function(t,e=80){if(!t)return"";let o=t.replace(/[^x00-xff]/g,"01");return o.length<=e?t:t.substr(0,e)},getUrlPathName:function(t){let o="";o=this.isURL(t)?new URL(t).pathname:new URL(e).pathname;let n=o.split("/");return n=n.filter((t=>{if(t&&""!=t)return t})),n.pop()},generateUuid:function(t,e){t=t||32;let o,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(e=e||n.length,t)for(o=0;o<t;o++)r[o]=n[0|Math.random()*e];else{let t;for(r[8]=r[13]=r[18]=r[23]="_",r[14]="4",o=0;o<36;o++)r[o]||(t=0|16*Math.random(),r[o]=n[19==o?3&t|8:t])}return r.join("")},isBase64(t){if(!t)return!1;if(/^data:.*\w+;base64,/.test(t))return!0;if(""===t||""===t.trim())return!1;try{return window.btoa(window.atob(t))==t}catch(e){return!1}},isDark(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches},parseToDOM(t){let e=document.createElement("template");return"string"==typeof t?(e.innerHTML=t,e.content):t},getHostname(t){if(!t)return"";try{return new URL(t).hostname.toLowerCase()}catch(l){return t.split("/")[0].toLowerCase()}}};class p{constructor(t,e){this.dom=t,this.timer=0,this.init(e)}init(t){this.touchstart(t),this.touchend(),this.touchmove(),this.bindLongPressEventFlag()}bindLongPressEventFlag(){this.dom.setAttribute("stay-long-press","yes")}touchstart(t){this.dom.addEventListener("touchstart",(function(e){e.preventDefault(),this.timer=setTimeout((()=>{e.preventDefault(),"function"===typeof t?(t(),this.timer=0):console.error("callback is not a function!")}),600)}),!1)}touchend(){this.dom.addEventListener("touchend",(function(t){return t.preventDefault(),clearTimeout(this.timer),0!=this.timer&&console.log(t),!1}))}touchmove(){this.dom.addEventListener("touchmove",(function(t){return clearTimeout(this.timer),this.timer=0,!1}))}}function f(t){s=document.querySelectorAll("video");let e=s&&s.length;e||(s=document.querySelectorAll(".post-content shreddit-player"),e=s&&s.length),e?g(s):(g(),t&&m()),y()}function m(){for(let t=1;t<10;t++){let e;(function(t){e=setTimeout((()=>{s=document.querySelectorAll("video");let t=s&&s.length;t&&(g(s),c.forEach((t=>{clearTimeout(t)})))}),200*t)})(t),c.push(e)}}function y(){const t=new d((function(t){try{t.forEach((function(t){s=document.querySelectorAll("video"),"VIDEO"===t.target.nodeName&&s&&s.length&&(o=window.location.host,g(s))}))}catch(e){}})),e={attributes:!0,childList:!0,characterData:!0,subtree:!0};t.observe(document,e)}function g(e){if(e&&e.length){let t=e.length,o=0,n=Array.from(e);n.forEach((t=>{if(!t||!(t instanceof HTMLElement))return void o++;let e=t.getAttribute("stay-sniffing");e||(e=u.generateUuid(),t.setAttribute("stay-sniffing",e));const n=t;let r=t.getAttribute("src");if(!r){let e=t.querySelector("source");e&&(t=e,r=e.getAttribute("src"))}if(!r)return void o++;let i=v(t,n,e);i.downloadUrl||o++})),o==t&&x()}else x();if(window.postMessage({name:"VIDEO_INFO_CAPTURE",videoList:n}),t){let t={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoInfoList:n};r.runtime.sendMessage(t,(t=>{}))}}function h(t,o){let r=o.downloadUrl;u.isURL(r)||(o.downloadUrl=e),b(t,o),a.size&&(a.has(o.videoUuid)||a.has(o.videoKey))?n.forEach((t=>(t.videoUuid!=o.videoUuid&&t.videoUuid!=o.videoKey||(t.downloadUrl=o.downloadUrl,t.poster=o.poster?o.poster:"",t.title=o.title,t.hostUrl=o.hostUrl,t.qualityList=o.qualityList?o.qualityList:[]),t))):(o.videoKey&&(a.add(o.videoKey),o.videoUuid||(o.videoUuid=o.videoKey)),o.videoUuid&&a.add(o.videoUuid),n.push(o))}function b(t,e){if(!t)return;let o=t.getAttribute("stay-long-press");o&&"yes"==o||(t.style.userSelect="none",new p(t,(()=>{w(t,e)})))}function w(t,e){let o=document.querySelector("#__stay_sinffer_modal");function n(){let o=[{title:e.title,downloadUrl:e.downloadUrl,poster:e.poster,hostUrl:u.getHostname(e.hostUrl),uuid:"EF95BD4E-B580-4892-B454-09FD657C951E"}],n="stay://x-callback-url/snifferVideo?list="+encodeURIComponent(JSON.stringify(o)),r=t.clientWidth,i=t.clientHeight,l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=t.getBoundingClientRect().top,d=t.getBoundingClientRect().left,s="padding: 0 "+d+"px;",c=i;0==a&&l==i&&(c=224);let p="top:"+a+"px;";a<0?p="top:0px;":(a>l/2||0==a&&l==i)&&(p="top: 50%;transform: translate(0, -50%);");let f="background-color: rgb(54, 54, 57);",m="rgb(247,247,247)",y="background-color: rgba(255, 255, 255, 0.4);",g="color:#000000;",h="https://res.stayfork.app/scripts/923EC60A7EB6B878317747AF29D99104/icon.png";u.isDark()&&(y="background-color: rgba(0, 0, 0, 0.4);",g="color:#DCDCDC;",h="https://res.stayfork.app/scripts/0031EAA96B967DA000F1BFA809FADE21/icon.png",m="rgb(247,247,247)");let b=`<style id="__style_sinffer_style">\n          ._stay-sinffer-popup{\n            width:222px;padding-top: 10px;box-sizing: border-box;border-radius:8px;margin-top: 12px;${f}\n            position: absolute;\n            top: 100%;\n            z-index:999999;\n          }\n          ._stay-sinffer-title{\n            padding-left: 10px;\n            padding-right: 10px;\n            width: 100%;\n            line-height: 18px;\n            word-break:break-all;\n            word-wrap:break-word;\n            color: ${m};\n            -webkit-box-orient: vertical;\n            -webkit-user-select: none;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            text-align: left;\n            margin-bottom: 10px;\n            box-sizing: border-box;\n            font-size: 16px;\n          }\n          ._stay-sinffer-download{\n            width:100%;\n            box-sizing: border-box;\n            display: flex;\n            justify-content: flex-start;\n            padding: 10px;\n            border-top: 0.5px solid rgb(247,247,247);\n          }\n          ._stay-download{\n            box-sizing: border-box;\n            width:100%;\n            padding-right: 20px;\n            position: relative;\n            color: ${m};\n            text-align:left;\n            font-size: 16px;\n          }\n          ._stay-download::after{\n            content:"";\n            background: url(${h}) no-repeat 50% 50%;  \n            background-size: 14px;\n            position: absolute;\n            right: 8px;\n            top: 50%;\n            transform: translate(0, -52%);\n            width: 14px;\n            height: 20px;\n          }\n          ._stay-quality-item{\n            border: 1px solid ${m};\n            height: 30px;\n            display: flex;\n            position: relative;\n            margin-right: 8px;\n            padding-left: 8px;\n            padding-right: 24px;\n            align-items: center;\n            -webkit-border-radius: 4px;\n            color: ${m};\n          }\n          ._stay-quality-item::after{\n            content:"";\n            background: url(${h}) no-repeat 50% 50%;  \n            background-size: 12px;\n            position: absolute;\n            right: 8px;\n            top: 50%;\n            transform: translate(0, -52%);\n            width: 12px;\n            height: 17px;\n          }\n        </style>`,w="",v="https://res.stayfork.app/scripts/BB8CD00276006365956C32A6556696AD/icon.png",x='<div style="width:'+r+"px;height:"+c+'px;margin:0 auto;display: flex;flex-direction: column;justify-content: center;justify-items: center;align-items: center;"><img style="max-width:100%;max-height:100%;" src="'+v+'"/><span style="padding-top: 30px;'+g+'">'+u.getHostname(e.hostUrl)+"</span></div>";e.poster&&(w="border-radius: 10px;",x='<img style="width:100%; max-height: 100%; '+w+'" src="'+e.poster+'"/>');let _=`<div stay-download="${n}" class="_stay-download _stay-click-download">Download</div>`,S=e.qualityList;if(S&&S.length){let t="";S.forEach((r=>{o=[{title:e.title,downloadUrl:r.downloadUrl,poster:e.poster,hostUrl:u.getHostname(e.hostUrl),uuid:"EF95BD4E-B580-4892-B454-09FD657C951E"}],n="stay://x-callback-url/snifferVideo?list="+encodeURIComponent(JSON.stringify(o)),t+=`<div stay-download="${n}" class="_stay-quality-item _stay-click-download">${r.qualityLabel}</div>`})),_=t}let U=['<div id="__stay_sinffer_modal" style="position: fixed; z-index: 9999999; width: 100%; height: 100%; text-align: center; '+y+' -webkit-backdrop-filter: blur(8px); top: 0px; -webkit-overflow-scrolling: touch;margin: 0 auto;">','<div style="width:100%;position:relative;'+p+w+"display: flex;flex-direction: column;justify-content: center;justify-items: center;align-items: center;"+s+'">',x,'<div class="_stay-sinffer-popup">','<div class="_stay-sinffer-title">'+e.title+"</div>",'<div class="_stay-sinffer-download">',_,"</div>","</div>","</div>","</div>"];return document.body.append(u.parseToDOM(b)),document.body.append(u.parseToDOM(U.join(""))),document.querySelector("#__stay_sinffer_modal")}o?o.style.display="block":o=n(),o.addEventListener("touchmove",(t=>{t.preventDefault()}),!1),o.addEventListener("touchstart",(t=>{t.preventDefault(),document.body.removeChild(o),document.body.removeChild(document.querySelector("#__style_sinffer_style"))}),!1);const r=document.querySelectorAll("#__stay_sinffer_modal ._stay-click-download");if(r&&r.length)for(let i=0;i<r.length;i++)(function(t){r[i].addEventListener("touchstart",(t=>{let e=t.target.getAttribute("stay-download"),o=document.createElement("a");o.href=e,o.click()}))})()}function v(t,n,r){let i={},l=t.getAttribute("poster"),a=t.getAttribute("title"),d=t.getAttribute("src"),s=[];if(e=window.location.href,d=u.completionSourceUrl(d),!l){let t=document.querySelector("source[type='image/webp'] img");l=t?t.getAttribute("src"):"",a||(a=t?t.getAttribute("alt"):"")}if(o.indexOf("youtube.com")>-1){const t=u.queryURLParams(e,"v");let o=document.querySelector("#player-control-overlay .player-controls-background-container .player-controls-background");o||(o=document.querySelector("#player-control-overlay")),o&&(n=o),i=H(a,t)}else if(o.indexOf("baidu.com")>-1)i=V(t);else if(o.indexOf("bilibili.com")>-1)i=S(t);else if(o.indexOf("mobile.twitter.com")>-1)i=U(t);else if(o.indexOf("m.weibo.cn")>-1)i=q(t);else if(o.indexOf("iesdouyin.com")>-1)i=A(t);else if(o.indexOf("douyin.com")>-1){const e=window.location.pathname;i=e.indexOf("/video")>-1?E(t):L(t)}else o.indexOf("m.toutiao.com")>-1?(n=document.querySelector(".video .xgplayer-wrapper .xgplayer-mobile .trigger"),i=O(t)):o.indexOf("m.v.qq.com")>-1?i=k(t):o.indexOf("www.reddit.com")>-1?i=D(t):o.indexOf("pornhub.com")>-1?i=C(t):o.indexOf("facebook.com")>-1?i=I(t):o.indexOf("instagram.com")>-1?i=P(t):o.indexOf("xiaohongshu.com")>-1&&(i=M(t));return i.downloadUrl&&(d=i.downloadUrl),d=u.completionSourceUrl(d),l||(l=i.poster),a||(a=i.title),i.qualityList&&i.qualityList.length&&(s=i.qualityList),a||(a=u.getUrlPathName(d)),l=u.completionSourceUrl(l),i["title"]=a,i["poster"]=l,i["downloadUrl"]=d,i["hostUrl"]=e,i["qualityList"]=s,i["videoUuid"]=r,d&&h(n,i),i}function x(){setTimeout((()=>{_()}),300)}function _(){let t={},o=window.location.host;e=window.location.href,t.hostUrl=e;let n=null;if(o.indexOf("pornhub.com")>-1&&(n=document.querySelector("#videoShow #videoPlayerPlaceholder .mgp_videoWrapper .mgp_videoPoster img"),n||(n=document.querySelector("#videoShow #videoPlayerPlaceholder .mgp_videoWrapper video")),t=N(t)),t.downloadUrl)return h(n,t),t}function S(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=document.querySelector(".main-container .ep-info-pre .ep-info-title");return o||setTimeout((function(){return o=document.querySelector(".video .share-video-info .title-wrapper .title-name span"),o&&(e.title=o.textContent),e}),200),o&&(e.title=o.textContent),e}function U(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextElementSibling.childNodes[1];return o&&(o=o.querySelector(".css-1dbjc4n .r-92ivih.r-1t01tom .r-1t982j2.r-1j3t67a .css-1dbjc4n.r-1kw4oii a[data-testid='tweetText'] span"),o&&(e.title=u.checkCharLengthAndSubStr(o.textContent))),e}function q(t){let o={};return o.poster=t.getAttribute("poster"),o.downloadUrl=t.getAttribute("src"),e.match(/^.*\/detail\/.*/g)&&(o.title=u.checkCharLengthAndSubStr(document.querySelector(".weibo-main .weibo-text").textContent)),o}function A(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=document.querySelector(".video-container img.poster");o&&(e.poster=o.getAttribute("src"));let n=document.querySelector(".desc .multi-line .multi-line_text");return n&&(e.title=n.textContent),e}function E(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const o=document.querySelector("div[data-e2e=video-detail] div[data-e2e=detail-video-info] div h2");return o&&(e.title=o.textContent),e}function L(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;if(o){let t=o.querySelector(".imgBackground img");t&&(e.poster=t.getAttribute("src"));let n=o.querySelector(".video-info-detail .title span.e_h_fqNj");n&&(e.title=n.textContent)}return e}function O(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const o=document.querySelector(".video .xgplayer-placeholder .xgplayer-poster");if(o){let t=o.getAttribute("style");if(t){let o=u.matchUrlInString(t);e.poster=o}}const n=document.querySelector(".video .video-header .video-title-wrapper .video-title");return n&&(e.title=n.textContent),e}function k(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const o=document.querySelector(".mod_play .player_container .txp_poster_img");if(o){let t=o.getAttribute("src");t=u.completionSourceUrl(t),e.poster=t}const n=document.querySelector(".mod_box .mod_bd .mod_video_info .video_title");if(n){let t=n.textContent;t=t?t.trim():"";const o=document.querySelector(".mod_box .mod_bd .mod_list_slider .slider_box .item.current span");o&&(t+=o.textContent,t=t?t.trim():""),e.title=t}return e}function D(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const o=document.querySelector("shreddit-app shreddit-title");return o&&(e.title=o.getAttribute("title")),e}function C(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=t.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;if(o&&o.classList.contains("playerWrapper")){const t=document.querySelector("#videoShow .categoryTags .headerWrap h1");if(t){let o=t.textContent;o&&(e.title=o.trim())}const o=document.querySelector("#videoPlayerPlaceholder img.videoElementPoster");return o&&(e.poster=o.getAttribute("src")),N(e)}let n=t.parentNode.parentNode.parentNode.parentNode.parentNode;if(n&&"li"==n.tagName.toLowerCase()){let t=n.querySelector(".videoWrapper .singleVideo a img.videoThumb");if(t)return e.title=t.getAttribute("alt"),e.title&&(e.title="[Related videos] "+e.title),e.poster=t.getAttribute("src"),e}return e}function N(t){if(t=t||{},t.videoKey=u.queryURLParams(window.location.href,"viewkey"),window.VIDEO_SHOW&&(!t.videoKey||t.videoKey==window.VIDEO_SHOW.vkey)){t.title||(t.title=window.VIDEO_SHOW.videoTitle),t.poster||(t.poster=window.VIDEO_SHOW.videoImage);let e=window.VIDEO_SHOW.playerId;if(e){let o=e.split("_");if(o.length>1){let e="flashvars_"+o[1],n=window[e].mediaDefinitions;if(n&&n.length){let e=[],o="";n.forEach((n=>{"hls"==n.format&&"string"==typeof n.quality&&e.push({downloadUrl:n.videoUrl,qualityLabel:n.quality,quality:Number(n.quality)}),!n.defaultQuality||"boolean"!=typeof n.defaultQuality&&"number"!=typeof n.defaultQuality||(o=n.defaultQuality,t.downloadUrl||(t.downloadUrl=n.videoUrl))})),t["qualityList"]=e,e.length&&e.forEach((e=>{e.quality==o&&(t.downloadUrl=e.downloadUrl)}))}}}}return t}function I(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title");let o=t.parentElement.parentElement.parentElement.parentElement.parentElement;if(o&&o.classList.contains("displayed")&&"container"==o.getAttribute("data-type")){let t=o.querySelector("div[data-type='video'] img.img");t&&(e.poster=t.getAttribute("src"));let n=o.querySelector("div.displayed > div[data-type='container'] > div[data-type='container'] > div[data-type='container'] > div[data-type='text'] > div.native-text");n&&(e.title=n.textContent)}return e}function P(t){let e={};e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title");let o=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;if(o&&o.classList.contains("_ab8w")&&o.classList.contains("_ab94")&&o.classList.contains("_ab99")&&o.classList.contains("_ab9h")&&o.classList.contains("_ab9m")&&o.classList.contains("_ab9p")&&o.classList.contains("_abcm")){let t=o.querySelector("._aatk .x1uhb9sk .x10l6tqk .x78zum5 img.x5yr21d");t&&(e.poster=t.getAttribute("src"));let n=o.querySelector("._ab9f div._ae1h._ae1i ._ae2s div._ae5q._akdn div div div");n&&n.textContent&&(e.title=n.textContent.replace("... more",""))}else if(o=t.parentNode.parentNode.parentNode.parentNode.parentNode,console.log(o.classList,"videoDetailDom.classList.contains('_a8b4') ===",o.classList.contains("_a8b4")),o&&o.classList.contains("_a8b4")&&o.classList.contains("_acjh")){let t=o.querySelector("div > div > div.x9f619.x1d8287x.xz4gly6  div.x6ikm8r.x10wlt62 span");t&&(e.title=t.textContent)}return e}function M(t){let e={};e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title");const o=document.querySelector(".video-container .video-banner .img-box");if(o){let t=o.getAttribute("style"),n=u.matchUrlInString(t);n&&(e.poster=u.completionSourceUrl(n))}const n=document.querySelector(".video-container .stage-bottom .author-desc-wrapper .author-desc");if(n){let t=n.textContent;t&&(t=t.replace(/^展开/g,""),e.title=u.checkCharLengthAndSubStr(t))}return e}function V(t){let r={};if("activity.baidu.com"===o){const t=window.PAGE_DATA;if(t&&t.pageData&&t.pageData.remote&&t.pageData.remote.mainVideoList&&t.pageData.remote.mainVideoList.length){const o=t.pageData.remote.mainVideoList[0],l=t.pageData.remote.moreVideoList;return r["title"]=o.title,r["poster"]=o.poster,r["downloadUrl"]=o.videoUrl,l&&l.length&&l.forEach((t=>{i.size&&i.has(t.videoUrl)||n.push({title:t.title,poster:t.poster,downloadUrl:t.videoUrl,hostUrl:e})})),r}r["title"]=j();const o=document.querySelector(".stickyBlock .curVideoPlay video");return o&&(r["poster"]=o.getAttribute("poster"),r["downloadUrl"]=o.getAttribute("src")),r}if("mbd.baidu.com"===o){const t=window.jsonData;if(t&&t.curVideoMeta){const e=t.curVideoMeta;if(r=T(e),r&&Object.keys(r).length)return r}return r["title"]=j(),r["poster"]=R(),r}if("haokan.baidu.com"===o){const o=window.__PRELOADED_STATE__,n=u.queryURLParams(e,"vid"),i=t.getAttribute("src");if(i&&n&&i.indexOf(n)>-1){if(o&&o.curVideoMeta){const t=o.curVideoMeta;if(r=T(t),r&&Object.keys(r).length)return r}r["title"]=j(),r["poster"]=R()}else r["title"]=t.parentElement.parentElement.querySelector("h3.land-recommend-bottom-title")?t.parentElement.parentElement.querySelector("h3.land-recommend-bottom-title").textContent:"",r["poster"]=t.parentElement&&t.parentElement.querySelector("img.video-img")?t.parentElement.querySelector("img.video-img").getAttribute("src"):"";return r}return"pan.baidu.com"===o&&(r["title"]=j()),r}function T(t){if(!t)return{};let e={};if(e["title"]=t.title,e["poster"]=t.poster,e["downloadUrl"]=t.playurl,t.clarityUrl&&t.clarityUrl.length){let o=[];const n=t.clarityUrl;n.forEach((t=>{t.vodVideoHW;o.push({downloadUrl:t.url,qualityLabel:t.title,quality:t.key})})),e["qualityList"]=o}return e}function R(){const t=document.querySelector(".art-player-wrapper .art-video-player .art-poster");if(t){let e=t.getAttribute("style");if(e)return u.matchUrlInString(e)}const e=document.querySelector("#bdMainPlayer .art-video-player .art-poster");if(e){let t=e.getAttribute("style");if(t)return u.matchUrlInString(t)}return""}function j(){const t=document.querySelector(".adVideoPageV3 .curVideoInfo h3.videoTitle");if(t)return t.textContent;const e=document.querySelector(".video-info .video-info-title");if(e)return e.textContent;const o=document.querySelector(".video-main .video-content .video-title .video-title-left");return o?o.textContent:""}function H(t,e){let o={};const n=window.ytInitialPlayerResponse;if(n&&n.videoDetails&&n.streamingData&&(!e||e===n.videoDetails.videoId)){const e=n.videoDetails;let r=e.title?e.title:"";o["title"]=r;let i=e.thumbnail;if(i){let t=i.thumbnails;t&&t.length?o["poster"]=t.pop().url:o["poster"]=B()}else o["poster"]=B();const l=n.streamingData,a=l.formats;if(t=t||"",a&&a.length&&t.replace(/\s+/g,"")===r.replace(/\s+/g,"")){let t=[],e=new Set;a.forEach((o=>{let n=o.mimeType;n.indexOf("video/mp4")>-1&&o.url&&!e.has(o.quality)&&(e.add(o.quality),t.push({downloadUrl:o.url,qualityLabel:o.qualityLabel,quality:o.quality}))})),t&&t.length&&(o["qualityList"]=t),o["downloadUrl"]=z()}else o["title"]=t||F(),o["downloadUrl"]=z(),o["poster"]=B()}else o={},o["title"]=t||F(),o["poster"]=B(),o["downloadUrl"]=z();return o}function z(){let t=document.querySelector(".html5-video-player .html5-video-container video");return t?t.getAttribute("src"):""}function F(){const t=document.querySelector(".slim-video-metadata-header .slim-video-information-content .slim-video-information-title");if(t)return t.textContent;const e=document.querySelector("#title h1.style-scope");return e?e.textContent:""}function B(){const t=document.querySelector(".ytp-cued-thumbnail-overlay-image");if(t){let e=t.getAttribute("style");if(e)return u.matchUrlInString(e)}const e=document.querySelector(".html5-video-player .ytp-cued-thumbnail-overlay .ytp-cued-thumbnail-overlay-image");if(e){let t=e.getAttribute("style");if(t)return u.matchUrlInString(t)}const o=document.querySelector(".video-wrapper .background-style-black");if(o){let t=o.getAttribute("style");if(t)return u.matchUrlInString(t)}return""}function W(){function e(t){let e=/^(https?:\/\/|\/).*\.(mp4|m3u8)$/;return null!=t.match(e)}let o=new Set;XMLHttpRequest.prototype.reallyOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(n,i,l,a,d){if(this.reallyOpen(n,i,l,a,d),e(i)&&!o.has(i)&&(o.add(i),window.postMessage({name:"VIDEO_LINK_CAPTURE",urls:o}),t)){let t={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoLinkSet:o};r.runtime.sendMessage(t,(t=>{}))}};let n=window.fetch;window.fetch=function(i,l){let a="object"==typeof i?i.url:i;if(e(a)&&!o.has(a)&&(o.add(a),console.log("VIDEO_LINK_CAPTURE: "+a),window.postMessage({name:"VIDEO_LINK_CAPTURE",urls:o}),t)){let t={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoLinkSet:o};r.runtime.sendMessage(t,(t=>{}))}return n(i,l)}}f(!1),document.onreadystatechange=()=>{"complete"===document.readyState&&f(!0)},W()}let n=[],i=new Set;window.addEventListener("message",(t=>{if(!t||!t.data||!t.data.name)return;const e=t.data.name;if("VIDEO_LINK_CAPTURE"===e){let e=t.data.urls?t.data.urls:new Set;i=e;let o={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoLinkSet:i};r.runtime.sendMessage(o,(t=>{}))}else if("VIDEO_INFO_CAPTURE"===e){let e=t.data.videoList?t.data.videoList:[];n=e;let o={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoInfoList:n};r.runtime.sendMessage(o,(t=>{}))}}))})()}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,o),i.exports}o.m=t,(()=>{var t=[];o.O=(e,n,r,i)=>{if(!n){var l=1/0;for(c=0;c<t.length;c++){n=t[c][0],r=t[c][1],i=t[c][2];for(var a=!0,d=0;d<n.length;d++)(!1&i||l>=i)&&Object.keys(o.O).every((t=>o.O[t](n[d])))?n.splice(d--,1):(a=!1,i<l&&(l=i));if(a){t.splice(c--,1);var s=r();void 0!==s&&(e=s)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[n,r,i]}})(),(()=>{o.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return o.d(e,{a:e}),e}})(),(()=>{o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}})(),(()=>{o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{o.j=875})(),(()=>{var t={875:0};o.O.j=e=>0===t[e];var e=(e,n)=>{var r,i,l=n[0],a=n[1],d=n[2],s=0;if(l.some((e=>0!==t[e]))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(d)var c=d(o)}for(e&&e(n);s<l.length;s++)i=l[s],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(c)},n=self["webpackChunkstay_popup"]=self["webpackChunkstay_popup"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var n=o.O(void 0,[998],(()=>o(7022)));n=o.O(n)})();