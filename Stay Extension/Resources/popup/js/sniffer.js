(()=>{var t={9662:(t,e,r)=>{var n=r(614),o=r(6330),i=TypeError;t.exports=function(t){if(n(t))return t;throw i(o(t)+" is not a function")}},6077:(t,e,r)=>{var n=r(614),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||n(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},5787:(t,e,r)=>{var n=r(7976),o=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw o("Incorrect invocation")}},9670:(t,e,r)=>{var n=r(111),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw i(o(t)+" is not an object")}},1318:(t,e,r)=>{function n(t){return function(e,r,n){var s,l=o(e),c=a(l),u=i(n,c);if(t&&r!=r){for(;u<c;)if((s=l[u++])!=s)return!0}else for(;u<c;u++)if((t||u in l)&&l[u]===r)return t||u||0;return!t&&-1}}var o=r(5656),i=r(1400),a=r(6244);t.exports={includes:n(!0),indexOf:n(!1)}},3658:(t,e,r)=>{"use strict";var n=r(9781),o=r(3157),i=TypeError,a=Object.getOwnPropertyDescriptor;r=n&&!function(){if(void 0!==this)return 1;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=r?function(t,e){if(o(t)&&!a(t,"length").writable)throw i("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4326:(t,e,r)=>{r=r(1702);var n=r({}.toString),o=r("".slice);t.exports=function(t){return o(n(t),8,-1)}},648:(t,e,r)=>{var n=r(1694),o=r(614),i=r(4326),a=r(5112)("toStringTag"),s=Object,l="Arguments"==i(function(){return arguments}());t.exports=n?i:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=s(t),a))?e:l?i(t):"Object"==(e=i(t))&&o(t.callee)?"Arguments":e}},9920:(t,e,r)=>{var n=r(2597),o=r(3887),i=r(1236),a=r(3070);t.exports=function(t,e,r){for(var s=o(e),l=a.f,c=i.f,u=0;u<s.length;u++){var d=s[u];n(t,d)||r&&n(r,d)||l(t,d,c(e,d))}}},8880:(t,e,r)=>{var n=r(9781),o=r(3070),i=r(9114);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},9114:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},8052:(t,e,r)=>{var n=r(614),o=r(3070),i=r(6339),a=r(3072);t.exports=function(t,e,r,s){var l=(s=s||{}).enumerable,c=void 0!==s.name?s.name:e;if(n(r)&&i(r,c,s),s.global)l?t[e]=r:a(e,r);else{try{s.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=r:o.f(t,e,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},3072:(t,e,r)=>{var n=r(7854),o=Object.defineProperty;t.exports=function(e,r){try{o(n,e,{value:r,configurable:!0,writable:!0})}catch(t){n[e]=r}return r}},9781:(t,e,r)=>{r=r(7293),t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:t=>{var e="object"==typeof document&&document.all;t.exports={all:e,IS_HTMLDDA:void 0===e&&void 0!==e}},317:(t,e,r)=>{var n=r(7854),o=(r=r(111),n.document),i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},7207:t=>{var e=TypeError;t.exports=function(t){if(9007199254740991<t)throw e("Maximum allowed index exceeded");return t}},3678:t=>{t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8113:(t,e,r)=>{r=r(5005),t.exports=r("navigator","userAgent")||""},7392:(t,e,r)=>{var n,o,i=r(7854),a=(r=r(8113),i.process);i=i.Deno,a=a&&a.versions||i&&i.version,i=a&&a.v8;!(o=i?0<(n=i.split("."))[0]&&n[0]<4?1:+(n[0]+n[1]):o)&&r&&(!(n=r.match(/Edge\/(\d+)/))||74<=n[1])&&(n=r.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},748:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:(t,e,r)=>{r=r(1702);var n=Error,o=r("".replace),i=(r=String(n("zxcasd").stack),/\n\s*at [^:]*:[^\n]*/),a=i.test(r);t.exports=function(t,e){if(a&&"string"==typeof t&&!n.prepareStackTrace)for(;e--;)t=o(t,i,"");return t}},2109:(t,e,r)=>{var n=r(7854),o=r(1236).f,i=r(8880),a=r(8052),s=r(3072),l=r(9920),c=r(4705);t.exports=function(t,e){var r,u,d,p=t.target,f=t.global,m=t.stat,y=f?n:m?n[p]||s(p,{}):(n[p]||{}).prototype;if(y)for(r in e){if(u=e[r],d=t.dontCallGetSet?(d=o(y,r))&&d.value:y[r],!c(f?r:p+(m?".":"#")+r,t.forced)&&void 0!==d){if(typeof u==typeof d)continue;l(u,d)}(t.sham||d&&d.sham)&&i(u,"sham",!0),a(y,r,u,t)}}},7293:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},4374:(t,e,r)=>{r=r(7293),t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:(t,e,r)=>{r=r(4374);var n=Function.prototype.call;t.exports=r?n.bind(n):function(){return n.apply(n,arguments)}},6530:(t,e,r)=>{var n=r(9781),o=(r=r(2597),Function.prototype),i=n&&Object.getOwnPropertyDescriptor,a=(r=r(o,"name"),r&&"something"===function(){}.name);n=r&&(!n||i(o,"name").configurable);t.exports={EXISTS:r,PROPER:a,CONFIGURABLE:n}},1702:(t,e,r)=>{r=r(4374);var n=Function.prototype,o=n.call;n=r&&n.bind.bind(o,o);t.exports=r?n:function(t){return function(){return o.apply(t,arguments)}}},5005:(t,e,r)=>{var n=r(7854),o=r(614);t.exports=function(t,e){return arguments.length<2?(r=n[t],o(r)?r:void 0):n[t]&&n[t][e];var r}},8173:(t,e,r)=>{var n=r(9662),o=r(8554);t.exports=function(t,e){return t=t[e],o(t)?void 0:n(t)}},7854:(t,e,r)=>{function n(t){return t&&t.Math==Math&&t}t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},2597:(t,e,r)=>{var n=r(1702),o=r(7908),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},3501:t=>{t.exports={}},4664:(t,e,r)=>{var n=r(9781),o=r(7293),i=r(317);t.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:(t,e,r)=>{var n=r(1702),o=r(7293),i=r(4326),a=Object,s=n("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?s(t,""):a(t)}:a},9587:(t,e,r)=>{var n=r(614),o=r(111),i=r(7674);t.exports=function(t,e,r){return i&&n(e=e.constructor)&&e!==r&&o(e=e.prototype)&&e!==r.prototype&&i(t,e),t}},2788:(t,e,r)=>{var n=r(1702),o=r(614),i=(r=r(5465),n(Function.toString));o(r.inspectSource)||(r.inspectSource=function(t){return i(t)}),t.exports=r.inspectSource},9909:(t,e,r)=>{var n,o,i,a,s=r(4811),l=r(7854),c=r(111),u=r(8880),d=r(2597),p=r(5465),f=r(6200),m=(r=r(3501),"Object already initialized"),y=l.TypeError,g=(l=l.WeakMap,s||p.state?((i=p.state||(p.state=new l)).get=i.get,i.has=i.has,i.set=i.set,n=function(t,e){if(i.has(t))throw y(m);return e.facade=t,i.set(t,e),e},o=function(t){return i.get(t)||{}},function(t){return i.has(t)}):(r[a=f("state")]=!0,n=function(t,e){if(d(t,a))throw y(m);return e.facade=t,u(t,a,e),e},o=function(t){return d(t,a)?t[a]:{}},function(t){return d(t,a)}));t.exports={set:n,get:o,has:g,enforce:function(t){return g(t)?o(t):n(t,{})},getterFor:function(t){return function(e){if(c(e)&&(e=o(e)).type===t)return e;throw y("Incompatible receiver, "+t+" required")}}}},3157:(t,e,r)=>{var n=r(4326);t.exports=Array.isArray||function(t){return"Array"==n(t)}},614:(t,e,r)=>{r=r(4154);var n=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===n}:function(t){return"function"==typeof t}},4705:(t,e,r)=>{function n(t,e){return(t=l[s(t)])==u||t!=c&&(i(e)?o(e):!!e)}var o=r(7293),i=r(614),a=/#|\.prototype\./,s=n.normalize=function(t){return String(t).replace(a,".").toLowerCase()},l=n.data={},c=n.NATIVE="N",u=n.POLYFILL="P";t.exports=n},8554:t=>{t.exports=function(t){return null==t}},111:(t,e,r)=>{var n=r(614),o=(r=r(4154),r.all);t.exports=r.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:n(t)||t===o}:function(t){return"object"==typeof t?null!==t:n(t)}},1913:t=>{t.exports=!1},2190:(t,e,r)=>{var n=r(5005),o=r(614),i=r(7976),a=(r=r(3307),Object);t.exports=r?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return o(e)&&i(e.prototype,a(t))}},6244:(t,e,r)=>{var n=r(7466);t.exports=function(t){return n(t.length)}},6339:(t,e,r)=>{var n=r(7293),o=r(614),i=r(2597),a=r(9781),s=r(6530).CONFIGURABLE,l=r(2788),c=(r=r(9909),r.enforce),u=r.get,d=Object.defineProperty,p=a&&!n((function(){return 8!==d((function(){}),"length",{value:8}).length})),f=String(String).split("String");r=t.exports=function(t,e,r){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!i(t,"name")||s&&t.name!==e)&&(a?d(t,"name",{value:e,configurable:!0}):t.name=e),p&&r&&i(r,"arity")&&t.length!==r.arity&&d(t,"length",{value:r.arity});try{r&&i(r,"constructor")&&r.constructor?a&&d(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}return r=c(t),i(r,"source")||(r.source=f.join("string"==typeof e?e:"")),t};Function.prototype.toString=r((function(){return o(this)&&u(this).source||l(this)}),"toString")},4758:t=>{var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){return t=+t,(0<t?r:e)(t)}},6277:(t,e,r)=>{var n=r(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:n(t)}},3070:(t,e,r)=>{var n=r(9781),o=r(4664),i=r(3353),a=r(9670),s=r(4948),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",p="configurable",f="writable";e.f=n?i?function(t,e,r){var n;return a(t),e=s(e),a(r),"function"==typeof t&&"prototype"===e&&"value"in r&&f in r&&!r[f]&&(n=u(t,e))&&n[f]&&(t[e]=r.value,r={configurable:(p in r?r:n)[p],enumerable:(d in r?r:n)[d],writable:!1}),c(t,e,r)}:c:function(t,e,r){if(a(t),e=s(e),a(r),o)try{return c(t,e,r)}catch(t){}if("get"in r||"set"in r)throw l("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},1236:(t,e,r)=>{var n=r(9781),o=r(6916),i=r(5296),a=r(9114),s=r(5656),l=r(4948),c=r(2597),u=r(4664),d=Object.getOwnPropertyDescriptor;e.f=n?d:function(t,e){if(t=s(t),e=l(e),u)try{return d(t,e)}catch(t){}if(c(t,e))return a(!o(i.f,t,e),t[e])}},8006:(t,e,r)=>{var n=r(6324),o=r(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},5181:(t,e)=>{e.f=Object.getOwnPropertySymbols},7976:(t,e,r)=>{r=r(1702),t.exports=r({}.isPrototypeOf)},6324:(t,e,r)=>{var n=r(1702),o=r(2597),i=r(5656),a=r(1318).indexOf,s=r(3501),l=n([].push);t.exports=function(t,e){var r,n=i(t),c=0,u=[];for(r in n)!o(s,r)&&o(n,r)&&l(u,r);for(;e.length>c;)!o(n,r=e[c++])||~a(u,r)||l(u,r);return u}},5296:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){return t=n(this,t),!!t&&t.enumerable}:r},7674:(t,e,r)=>{var n=r(1702),o=r(9670),i=r(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(r){}return function(r,n){return o(r),i(n),e?t(r,n):r.__proto__=n,r}}():void 0)},2140:(t,e,r)=>{var n=r(6916),o=r(614),i=r(111),a=TypeError;t.exports=function(t,e){var r,s;if("string"===e&&o(r=t.toString)&&!i(s=n(r,t)))return s;if(o(r=t.valueOf)&&!i(s=n(r,t)))return s;if("string"!==e&&o(r=t.toString)&&!i(s=n(r,t)))return s;throw a("Can't convert object to primitive value")}},3887:(t,e,r)=>{var n=r(5005),o=r(1702),i=r(8006),a=r(5181),s=r(9670),l=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(s(t)),r=a.f;return r?l(e,r(t)):e}},4488:(t,e,r)=>{var n=r(8554),o=TypeError;t.exports=function(t){if(n(t))throw o("Can't call method on "+t);return t}},6200:(t,e,r)=>{var n=r(2309),o=r(9711),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},5465:(t,e,r)=>{var n=r(7854),o=(r=r(3072),"__core-js_shared__");n=n[o]||r(o,{});t.exports=n},2309:(t,e,r)=>{var n=r(1913),o=r(5465);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.26.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:(t,e,r)=>{var n=r(7392);r=r(7293);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},1400:(t,e,r)=>{var n=r(9303),o=Math.max,i=Math.min;t.exports=function(t,e){return t=n(t),t<0?o(t+e,0):i(t,e)}},5656:(t,e,r)=>{var n=r(8361),o=r(4488);t.exports=function(t){return n(o(t))}},9303:(t,e,r)=>{var n=r(4758);t.exports=function(t){return t=+t,t!=t||0==t?0:n(t)}},7466:(t,e,r)=>{var n=r(9303),o=Math.min;t.exports=function(t){return 0<t?o(n(t),9007199254740991):0}},7908:(t,e,r)=>{var n=r(4488),o=Object;t.exports=function(t){return o(n(t))}},7593:(t,e,r)=>{var n=r(6916),o=r(111),i=r(2190),a=r(8173),s=r(2140),l=(r=r(5112),TypeError),c=r("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var r=a(t,c);if(r){if(r=n(r,t,e=void 0===e?"default":e),!o(r)||i(r))return r;throw l("Can't convert object to primitive value")}return s(t,e=void 0===e?"number":e)}},4948:(t,e,r)=>{var n=r(7593),o=r(2190);t.exports=function(t){return t=n(t,"string"),o(t)?t:t+""}},1694:(t,e,r)=>{var n={};n[r(5112)("toStringTag")]="z",t.exports="[object z]"===String(n)},1340:(t,e,r)=>{var n=r(648),o=String;t.exports=function(t){if("Symbol"===n(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},6330:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},9711:(t,e,r)=>{r=r(1702);var n=0,o=Math.random(),i=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+i(++n+o,36)}},3307:(t,e,r)=>{r=r(6293),t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(t,e,r)=>{var n=r(9781);r=r(7293);t.exports=n&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:(t,e,r)=>{var n=r(7854);r=r(614),n=n.WeakMap;t.exports=r(n)&&/native code/.test(String(n))},5112:(t,e,r)=>{var n=r(7854),o=r(2309),i=r(2597),a=r(9711),s=r(6293),l=r(3307),c=o("wks"),u=n.Symbol,d=u&&u.for,p=l?u:u&&u.withoutSetter||a;t.exports=function(t){var e;return i(c,t)&&(s||"string"==typeof c[t])||(e="Symbol."+t,s&&i(u,t)?c[t]=u[t]:c[t]=(l&&d?d:p)(e)),c[t]}},7658:(t,e,r)=>{"use strict";var n=r(2109),o=r(7908),i=r(6244),a=r(3658),s=r(7207),l=(r=r(7293)((function(){return 4294967297!==[].push.call({length:4294967296},1)})),!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}());n({target:"Array",proto:!0,arity:1,forced:r||l},{push:function(t){var e=o(this),r=i(e),n=arguments.length;s(r+n);for(var l=0;l<n;l++)e[r]=arguments[l],r++;return a(e,r),r}})},2801:(t,e,r)=>{"use strict";function n(){d(this,_);var t=f((e=arguments.length)<1?void 0:arguments[0]),e=f(e<2?void 0:arguments[1],"Error");e=new b(t,e);return(t=v(t)).name=h,c(e,"stack",l(1,y(t.stack,1))),p(e,this,n),e}var o,i=r(2109),a=r(7854),s=r(5005),l=r(9114),c=r(3070).f,u=r(2597),d=r(5787),p=r(9587),f=r(6277),m=r(3678),y=r(1060),g=r(9781),h=(r=r(1913),"DOMException"),v=s("Error"),b=s(h),_=n.prototype=b.prototype,w="stack"in v(h),x="stack"in new b(1,2),E=(g=b&&g&&Object.getOwnPropertyDescriptor(a,h),a=!(!g||g.writable&&g.configurable),g=w&&!a&&!x,i({global:!0,constructor:!0,forced:r||g},{DOMException:g?n:b}),s(h));w=E.prototype;if(w.constructor!==E)for(var S in r||c(w,"constructor",l(1,E)),m)!u(m,S)||u(E,o=(S=m[S]).s)||c(E,o,l(6,S.c))}},e={};function r(n){var o=e[n];return void 0!==o||(o=e[n]={exports:{}},t[n](o,o.exports,r)),o.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();{let a;r(2801),r(7658),void 0!==window.browser&&(a=window.browser);const s=a=void 0!==window.chrome?window.chrome:a;{try{{var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;let d=window.location.host,p=document.createElement("script"),f=(p.type="text/javascript",p.id="stay_inject_parse_video_js_"+d,`\n\nconst handleInjectParseVideoJS = ${o}\n\nhandleInjectParseVideoJS(false);`);if(p.appendChild(document.createTextNode(f)),document.body)document.body.appendChild(p);else{let m=new n(((t,e)=>{document.body&&(document.body.appendChild(p),m.disconnect())}));m.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}}document.addEventListener("securitypolicyviolation",(t=>{o(!0)}))}catch(i){}function o(t){let e={},r="",n="",o="",i=window.location.href,a=window.location.host,l={},c="",u="",d="",p=[],f={},m=new Set;const y=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;let g,h=[];const v={compare:function(t){return(e,r)=>e[t]-r[t]},isMobileOrIpad:function(){const t=navigator.userAgent;return!!["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"].filter((e=>t.includes(e))).length},isMobile:function(){const t=navigator.userAgent;return!!["Android","iPhone","SymbianOS","Windows Phone","iPod"].filter((e=>t.includes(e))).length},queryURLParams:function(t,e){return e=new RegExp("[?&#]+"+e+"=([^?&#]+)").exec(t),e&&e[1]||""},queryParams:function(t,e){return t?this.queryURLParams("https;//stap.app?"+t,e):""},matchUrlInString:function(t){var e=new RegExp("(https?|http)?(:)?//[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]","g");t=t.match(e);return t&&t.length?t[0]:""},isURL:function(t){return!!t&&/^http[s]?:\/\/.*/.test(t)},completionSourceUrl:function(t){return t?(/^(f|ht)tps?:\/\//i.test(t)||(/^\/\//i.test(t)?t=window.location.protocol+t:/^\//i.test(t)&&(t=window.location.origin+t)),t):""},checkCharLengthAndSubStr:function(t,e){return t?(e=e||80,t.replace(/[^x00-xff]/g,"01").length<=e?t:t.substr(0,e)):""},isChinese(t){return!!t&&!!/.*[u4e00-u9fa5]+.*$/.test(t)},urlEncodeChinese(t){var e;return t&&(e=new RegExp("[\\u4E00-\\u9FFF]","g"),t.replace(e,(function(t){return window.encodeURI(t)})))},getUrlPathName:function(t){let e="",r=(e=(this.isURL(t)?new URL(t):new URL(i)).pathname).split("/");return(r=r.filter((t=>{if(t&&""!=t)return t}))).pop()},generateUuid:function(t,e){t=t||32;var r,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");let o,i=[];if(e=e||n.length,t)for(o=0;o<t;o++)i[o]=n[0|Math.random()*e];else for(i[8]=i[13]=i[18]=i[23]="_",i[14]="4",o=0;o<36;o++)i[o]||(r=0|16*Math.random(),i[o]=n[19==o?3&r|8:r]);return i.join("")},isBase64(t){if(!t)return!1;if(/^data:.*\w+;base64,/.test(t))return!0;if(""===t||""===t.trim())return!1;try{return window.btoa(window.atob(t))==t}catch(t){return!1}},isDark(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches},parseToDOM(t){var e=document.createElement("template");return"string"==typeof t?(e.innerHTML=t,e.content):t},getHostname(t){if(!t)return"";try{return new URL(t).hostname.toLowerCase()}catch(W){return t.split("/")[0].toLowerCase()}},div(t,e){let r,n,o=0,i=0;try{o=t.toString().split(".")[1].length}catch(t){o=0}try{i=e.toString().split(".")[1].length}catch(t){i=0}return r=Number(t.toString().replace(".","")),n=Number(e.toString().replace(".","")),this.mul(r/n,Math.pow(10,i-o))},sub(t,e){let r,n,o;try{r=t.toString().split(".")[1].length}catch(t){r=0}try{n=e.toString().split(".")[1].length}catch(t){n=0}return o=Math.pow(10,Math.max(r,n)),(this.mul(t,o)-this.mul(e,o))/o},mul(t,e){let r=0,n=t.toString(),o=e.toString();try{r+=n.split(".")[1].length}catch(t){}try{r+=o.split(".")[1].length}catch(t){}return Number(n.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,r)},add(t,e){let r,n,o;try{r=t.toString().split(".")[1].length}catch(t){r=0}try{n=e.toString().split(".")[1].length}catch(t){n=0}return o=Math.pow(10,Math.max(r,n)),(this.mul(t,o)+this.mul(e,o))/o},hexMD5(t){function e(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function r(t,r,n,o,i,a){return e((r=e(e(r,t),e(o,a)))<<i|r>>>32-i,n)}function n(t,e,n,o,i,a,s){return r(e&n|~e&o,t,e,i,a,s)}function o(t,e,n,o,i,a,s){return r(e&o|n&~o,t,e,i,a,s)}function i(t,e,n,o,i,a,s){return r(e^n^o,t,e,i,a,s)}function a(t,e,n,o,i,a,s){return r(n^(e|~o),t,e,i,a,s)}{var s=function(t){let r=1732584193,s=-271733879,l=-1732584194,c=271733878;for(let m=0;m<t.length;m+=16){var u=r,d=s,p=l,f=c;r=n(r,s,l,c,t[m+0],7,-680876936),c=n(c,r,s,l,t[m+1],12,-389564586),l=n(l,c,r,s,t[m+2],17,606105819),s=n(s,l,c,r,t[m+3],22,-1044525330),r=n(r,s,l,c,t[m+4],7,-176418897),c=n(c,r,s,l,t[m+5],12,1200080426),l=n(l,c,r,s,t[m+6],17,-1473231341),s=n(s,l,c,r,t[m+7],22,-45705983),r=n(r,s,l,c,t[m+8],7,1770035416),c=n(c,r,s,l,t[m+9],12,-1958414417),l=n(l,c,r,s,t[m+10],17,-42063),s=n(s,l,c,r,t[m+11],22,-1990404162),r=n(r,s,l,c,t[m+12],7,1804603682),c=n(c,r,s,l,t[m+13],12,-40341101),l=n(l,c,r,s,t[m+14],17,-1502002290),s=n(s,l,c,r,t[m+15],22,1236535329),r=o(r,s,l,c,t[m+1],5,-165796510),c=o(c,r,s,l,t[m+6],9,-1069501632),l=o(l,c,r,s,t[m+11],14,643717713),s=o(s,l,c,r,t[m+0],20,-373897302),r=o(r,s,l,c,t[m+5],5,-701558691),c=o(c,r,s,l,t[m+10],9,38016083),l=o(l,c,r,s,t[m+15],14,-660478335),s=o(s,l,c,r,t[m+4],20,-405537848),r=o(r,s,l,c,t[m+9],5,568446438),c=o(c,r,s,l,t[m+14],9,-1019803690),l=o(l,c,r,s,t[m+3],14,-187363961),s=o(s,l,c,r,t[m+8],20,1163531501),r=o(r,s,l,c,t[m+13],5,-1444681467),c=o(c,r,s,l,t[m+2],9,-51403784),l=o(l,c,r,s,t[m+7],14,1735328473),s=o(s,l,c,r,t[m+12],20,-1926607734),r=i(r,s,l,c,t[m+5],4,-378558),c=i(c,r,s,l,t[m+8],11,-2022574463),l=i(l,c,r,s,t[m+11],16,1839030562),s=i(s,l,c,r,t[m+14],23,-35309556),r=i(r,s,l,c,t[m+1],4,-1530992060),c=i(c,r,s,l,t[m+4],11,1272893353),l=i(l,c,r,s,t[m+7],16,-155497632),s=i(s,l,c,r,t[m+10],23,-1094730640),r=i(r,s,l,c,t[m+13],4,681279174),c=i(c,r,s,l,t[m+0],11,-358537222),l=i(l,c,r,s,t[m+3],16,-722521979),s=i(s,l,c,r,t[m+6],23,76029189),r=i(r,s,l,c,t[m+9],4,-640364487),c=i(c,r,s,l,t[m+12],11,-421815835),l=i(l,c,r,s,t[m+15],16,530742520),s=i(s,l,c,r,t[m+2],23,-995338651),r=a(r,s,l,c,t[m+0],6,-198630844),c=a(c,r,s,l,t[m+7],10,1126891415),l=a(l,c,r,s,t[m+14],15,-1416354905),s=a(s,l,c,r,t[m+5],21,-57434055),r=a(r,s,l,c,t[m+12],6,1700485571),c=a(c,r,s,l,t[m+3],10,-1894986606),l=a(l,c,r,s,t[m+10],15,-1051523),s=a(s,l,c,r,t[m+1],21,-2054922799),r=a(r,s,l,c,t[m+8],6,1873313359),c=a(c,r,s,l,t[m+15],10,-30611744),l=a(l,c,r,s,t[m+6],15,-1560198380),s=a(s,l,c,r,t[m+13],21,1309151649),r=a(r,s,l,c,t[m+4],6,-145523070),c=a(c,r,s,l,t[m+11],10,-1120210379),l=a(l,c,r,s,t[m+2],15,718787259),s=a(s,l,c,r,t[m+9],21,-343485551),r=e(r,u),s=e(s,d),l=e(l,p),c=e(c,f)}return[r,s,l,c]}(function(t){var e=[];for(let r=0;r<8*t.length;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e}(t)),l="0123456789abcdef";let r="";for(let t=0;t<4*s.length;t++)r+=l.charAt(s[t>>2]>>t%4*8+4&15)+l.charAt(s[t>>2]>>t%4*8&15);return r}}};class b{constructor(t,e){this.dom=t,this.timer=0,this.init(e)}init(t){this.touchstart(t),this.touchend(),this.touchmove(),this.bindLongPressEventFlag()}bindLongPressEventFlag(){this.dom.setAttribute("stay-long-press","yes")}touchstart(t){const e=this;e.dom.removeEventListener("touchstart",(function(r){e.handleLongPress(r,t)})),e.dom.addEventListener("touchstart",(function(r){return e.handleTargetTouchend(r.target),e.timer=setTimeout(((t,r)=>{e.handleLongPress(t,r)}),600,r,t),!1}),!1)}handleTargetTouchend(t){const e=this;t&&t.addEventListener("touchend",(r=>{e.handleTouchend(r,t)}))}handleLongPress(t,e){if(t.preventDefault(),t.stopPropagation(),!_(this.dom)){t=t.changedTouches[0];try{t.target.addEventListener("contextmenu",(function(t){t.preventDefault()}))}catch(t){}"function"==typeof e&&(e(),this.timer=0)}}touchend(){const t=this;t.dom.removeEventListener("touchend",(function(e){t.handleTouchend(e,null)})),t.dom.addEventListener("touchend",(function(e){return t.handleTouchend(e,null),!1}))}handleTouchend(t,e){const r=this;if(!_(this.dom)&&(clearTimeout(this.timer),0!=this.timer))try{e&&e.removeEventListener("touchend",(t=>{clearTimeout(r.timer)}))}catch(t){}}touchmove(){const t=this;function e(){_(t.dom)||(clearTimeout(t.timer),t.timer=0)}t.dom.removeEventListener("touchmove",(function(t){e()})),t.dom.addEventListener("touchmove",(function(t){return e(),!1}))}}function _(t){return!t||(t=window.getComputedStyle(t))&&("none"===t.display||"hidden"===t.visibility)}class w{constructor(t,e){this.dom=t,this.stayLongPressTimer=0,this.distance=10,this.init(e)}getDomPageStartX(){return this.dom.getBoundingClientRect().left}getDomPageStartY(){return(document.documentElement.scrollTop||window.pageYOffset)+this.dom.getBoundingClientRect().top}getDomPageEndX(){return this.getDomPageStartX()+this.dom.clientWidth}getDomPageEndY(){return this.getDomPageStartY()+this.dom.clientHeight}init(t){this.touchstart(t),this.touchend(),this.touchmove(),this.bindLongPressEventFlag()}bindLongPressEventFlag(){this.dom.setAttribute("stay-long-press","yes")}touchstart(t){const e=this;document.body.removeEventListener("touchstart",(function(r){return e.handleTargetEvent(r,t),!1})),document.body.addEventListener("touchstart",(function(r){return e.handleTargetTouchend(r.target),e.handleTargetEvent(r,t),!1}),!1)}handleTargetTouchend(t){const e=this;t&&t.addEventListener("touchend",(r=>{e.touchEndCallback(r,t)}))}handleTargetEvent(t,e){t.stopPropagation(),t.preventDefault();const r=this;t=t.changedTouches[0];var n=t.pageX,o=t.pageY;!_(r.dom)&&Math.abs(t.pageX-n)<=r.distance&&n>=r.getDomPageStartX()&&n<=r.getDomPageEndX()&&o>=r.getDomPageStartY()&&o<=r.getDomPageEndY()&&(this.stayLongPressTimer=window.setTimeout(((t,e)=>{r.stayLongPressTimer=0;try{var n=t.target.classList;n.contains("__stay-unselect")||n.add("__stay-unselect"),n.contains("__stay-touch-action")||n.add("__stay-touch-action"),"function"==typeof e&&e(),t.target.addEventListener("contextmenu",(function(t){t.preventDefault()}))}catch(t){}}),600,t,e))}touchend(){const t=this;document.body.removeEventListener("touchend",(function(e){t.touchEndCallback(e,null)})),document.body.addEventListener("touchend",(function(e){return t.touchEndCallback(e,null),!1}))}touchEndCallback(t,e){const r=this;if(!_(this.dom)&&(clearTimeout(this.stayLongPressTimer),0!=this.stayLongPressTimer))try{e&&e.removeEventListener("touchend",(t=>{r.touchEndCallback(t,null)}))}catch(t){}}touchmove(){const t=this;function e(){_(t.dom)||(window.clearTimeout(t.stayLongPressTimer),t.stayLongPressTimer=0)}document.body.removeEventListener("touchmove",(function(t){t.preventDefault(),t.stopPropagation(),e()})),document.body.addEventListener("touchmove",(function(t){return t.preventDefault(),t.stopPropagation(),e(),!1}))}}function x(t){new y((function(t){try{t.forEach((function(t){a=window.location.host,g=document.querySelectorAll("video");var e=t.target.querySelectorAll("video");("VIDEO"===t.target.nodeName||e&&e.length)&&g&&g.length&&E(g)}))}catch(t){}})).observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0});let e=(g=document.querySelectorAll("video"))&&g.length;if(e||(g=document.querySelectorAll(".post-content shreddit-player"),e=g&&g.length),e)E(g);else if(E(),t){let t=!1;for(let e=1;e<10;e++){let r;if(function(e){r=setTimeout((()=>{g=document.querySelectorAll("video"),(t=g&&g.length)&&(E(g),h.forEach((t=>{clearTimeout(t)})))}),200*e)}(e),t)break;h.push(r)}}}function E(t){if(t&&t.length){var r=t.length;let n=0;Array.from(t).forEach((t=>{if(t&&t instanceof HTMLElement){let s=t.getAttribute("stay-sniffing");s||(s=v.generateUuid(),t.setAttribute("stay-sniffing",s));var r,o=t;let l=t.getAttribute("src");l||(r=t.querySelector("source"))&&(t=r,l=r.getAttribute("src")),l&&function(t,r,n){let o={},s=t.getAttribute("poster"),l=t.getAttribute("title"),c=t.getAttribute("src"),u=[],f=(i=window.location.href,r);if(c=v.completionSourceUrl(c),s||(y=document.querySelector("source[type='image/webp'] img"),s=y?y.getAttribute("src"):"",l=l||(y?y.getAttribute("alt"):"")),-1<a.indexOf("youtube.com")){let r=document.querySelector("#player-control-overlay .player-controls-background-container .player-controls-background");(r=(r=r||document.querySelector("#player-control-overlay"))||document.querySelector(".carousel-wrapper .video-wrapper .reel-player-overlay-main-content"))&&(f=r),o=function(t){var r=window.ytplayer,n=v.queryURLParams(i,"v");let o={},a=(o.poster=t.getAttribute("poster")||"",o.downloadUrl=t.getAttribute("src"),t.getAttribute("title"));if(o.title=a,t=r?r.bootstrapPlayerResponse:{},t&&t.videoDetails&&t.streamingData&&(!n||n===t.videoDetails.videoId)){var s=t.videoDetails,l=s.title||"",c=(s=(o.title=l,s.thumbnail),s=(s&&(s=s.thumbnails)&&s.length&&(o.poster=s.pop().url),t.microformat&&t.microformat.playerMicroformatRenderer&&t.microformat.playerMicroformatRenderer.thumbnail&&t.microformat.playerMicroformatRenderer.thumbnail.thumbnails.length&&(o.poster=t.microformat.playerMicroformatRenderer.thumbnail.thumbnails[0].url),t.streamingData),s.adaptiveFormats);if(s.formats,a=a||"",c&&c.length&&a.replace(/\s+/g,"")===l.replace(/\s+/g,"")){let n=[],i=new Set;!function(r){try{if(r){let t="";var n=(d=r).split("/");(t=r.startsWith("/")?n[3]:n[2])&&(e.randomCode=t)}}catch(t){}}(r.bootstrapWebPlayerContextConfig?r.bootstrapWebPlayerContextConfig.jsUrl:""),s=c.filter((t=>{if(-1<t.mimeType.indexOf("audio/mp4"))return t}));let a=R(s),l=(c.forEach((t=>{var e=t.mimeType;let r=t.qualityLabel;if(r=r?r.replace(/p[\d]*$/,"P"):"",-1<e.indexOf("video/mp4")&&t.url&&!i.has(t.quality)){i.add(t.quality);let s="";e.match(/.*codecs=.*webm.*/g)||(s=a),v.isURL(s)||(o.shouldDecode=!0),n.push({downloadUrl:t.url,qualityLabel:r,quality:t.quality,audioUrl:s})}if(-1<e.indexOf("video/mp4")&&t.signatureCipher&&!i.has(t.quality)){var s=P(t.signatureCipher);let l="";((l=e.match(/.*codecs=.*mp4.*/g)?l:a)&&!v.isURL(l)||s&&!v.isURL(s))&&(o.shouldDecode=!0),i.add(t.quality),n.push({downloadUrl:s,qualityLabel:r,quality:t.quality,protect:!0,audioUrl:l})}})),R(c.filter((t=>{if(-1<t.mimeType.indexOf("audio/webm"))return t}))));c.forEach((t=>{var e=t.mimeType;let r=t.qualityLabel;if(r=r?r.replace(/p[\d]*$/,"P"):"",-1<e.indexOf("video/webm")&&t.url&&!i.has(t.quality)){i.add(t.quality);let a="";(a=e.match(/.*codecs=.*webm.*/g)?a:l)&&!v.isURL(a)&&(o.shouldDecode=!0),n.push({downloadUrl:t.url,qualityLabel:r,quality:t.quality,audioUrl:a})}if(-1<e.indexOf("video/webm")&&t.signatureCipher&&!i.has(t.quality)){var a=P(t.signatureCipher);let s="";((s=e.match(/.*codecs=.*webm.*/g)?s:l)&&!v.isURL(s)||a&&!v.isURL(a))&&(o.shouldDecode=!0),i.add(t.quality),n.push({downloadUrl:a,qualityLabel:r,quality:t.quality,protect:!0,audioUrl:s})}})),n&&n.length&&(o.qualityList=n)}else o.title=a||F();o.downloadUrl=j(),o.poster||(o.poster=z())}else(o={}).title=a||F(),o.downloadUrl=j();let u=o.poster;return u=u||z(),n!=t.videoDetails.videoId&&(u=`https://i.ytimg.com/vi/${n}/hqdefault.jpg`),u=u||`https://i.ytimg.com/vi/${n}/hqdefault.jpg`,o.poster=u,function(t){return t&&-1<t.indexOf("pltype=adhost")?1:(t=document.querySelector("#container .video-ads"),!(!t||_(t)))}(o.downloadUrl)&&(o.type="ad"),o}(t)}else{var y,g;-1<a.indexOf("baidu.com")?o=function(t){let e={};if(e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title"),"activity.baidu.com"===a){var r=window.PAGE_DATA;if(r&&r.pageData&&r.pageData.remote&&r.pageData.remote.mainVideoList&&r.pageData.remote.mainVideoList.length)return n=r.pageData.remote.mainVideoList[0],r=r.pageData.remote.moreVideoList,e.title=n.title,e.poster=n.poster,e.downloadUrl=n.videoUrl,r&&r.length&&r.forEach((t=>{m.size&&m.has(t.vid)||v.isURL(t.videoUrl)&&(m.add(t.vid),p.push({title:t.title,poster:t.poster,downloadUrl:t.videoUrl,hostUrl:i,videoUuid:t.vid}))})),e;e.title=M();const t=document.querySelector(".stickyBlock .curVideoPlay video");t&&(e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"))}else if("mbd.baidu.com"===a){var n=window.jsonData;if(n&&n.curVideoMeta&&(r=n.curVideoMeta,(e=k(r))&&Object.keys(e).length))return e;e.title=M(),e.poster=I()}else if("haokan.baidu.com"===a){var o=window.__PRELOADED_STATE__,s=v.queryURLParams(i,"vid"),l=t.getAttribute("src");if(l&&s&&-1<l.indexOf(s)){if(o&&o.curVideoMeta&&(l=o.curVideoMeta,(e=k(l))&&Object.keys(e).length))return e;e.title=M(),e.poster=I()}else e.title=t.parentElement.parentElement.querySelector("h3.land-recommend-bottom-title")?t.parentElement.parentElement.querySelector("h3.land-recommend-bottom-title").textContent:"",e.poster=t.parentElement&&t.parentElement.querySelector("img.video-img")?t.parentElement.querySelector("img.video-img").getAttribute("src"):""}else"pan.baidu.com"===a&&(e.title=M()),"m.baidu.com"===a&&((s=document.querySelector(".sfc-video-page-info .sfc-video-page-info-title h3.title-waterfallB"))&&(e.title=s.textContent),o=document.querySelector(".video-poster .c-img-wrapper img.c-img-img"))&&(e.poster=o.getAttribute("src"));return e}(t):-1<a.indexOf("bilibili.com")?o=function(t){let e={},r=(e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),document.querySelector(".main-container .ep-info-pre .ep-info-title"));if(!r){let t=setTimeout((function(){return(r=document.querySelector(".video .share-video-info .title-wrapper .title-name span"))&&(e.title=r.textContent),clearTimeout(t),t=0,e}),200)}return r&&(e.title=r.textContent),e}(t):-1<a.indexOf("mobile.twitter.com")?((y=document.querySelector(".r-eqz5dr .r-1pi2tsx .r-1pi2tsx .r-1udh08x .r-1p0dtai div.css-1dbjc4n.r-6koalj.r-eqz5dr.r-1pi2tsx.r-13qz1uu"))&&(f=y),o=function(t){let e={},r=(e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextElementSibling.childNodes[1]);return(r=r&&r.querySelector(".css-1dbjc4n .r-92ivih.r-1t01tom .r-1t982j2.r-1j3t67a .css-1dbjc4n.r-1kw4oii a[data-testid='tweetText'] span"))&&(e.title=v.checkCharLengthAndSubStr(r.textContent)),e}(t)):-1<a.indexOf("m.weibo.cn")?o=function(t){var e={};return e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),i.match(/^.*\/detail\/.*/g)&&(e.title=v.checkCharLengthAndSubStr(document.querySelector(".weibo-main .weibo-text").textContent)),e}(t):-1<a.indexOf("iesdouyin.com")?o=function(t){var e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),t=document.querySelector(".video-container img.poster");return t&&(e.poster=t.getAttribute("src")),t=document.querySelector(".desc .multi-line .multi-line_text"),t&&(e.title=t.textContent),e}(t):-1<a.indexOf("douyin.com")?(g=window.location.pathname,o=(-1<g.indexOf("/video")?function(t){var e={};return e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),t=document.querySelector("div[data-e2e=video-detail] div[data-e2e=detail-video-info] div h2"),t&&(e.title=t.textContent),e}:function(t){var e,r={};r.poster=t.getAttribute("poster"),r.downloadUrl=t.getAttribute("src"),t=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;return t&&((e=t.querySelector(".imgBackground img"))&&(r.poster=e.getAttribute("src")),e=t.querySelector(".video-info-detail .title span.e_h_fqNj"))&&(r.title=e.textContent),r})(t)):-1<a.indexOf("m.toutiao.com")?o=function(t){var e={};return e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),t=document.querySelector(".video .xgplayer-placeholder .xgplayer-poster"),t&&(t=t.getAttribute("style"))&&(t=v.matchUrlInString(t),e.poster=t),t=document.querySelector(".video .video-header .video-title-wrapper .video-title"),t&&(e.title=t.textContent),e}(t):-1<a.indexOf("m.v.qq.com")?o=function(t){var e={};if(e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),t=document.querySelector(".mod_play .player_container .txp_poster_img"),t&&(t=t.getAttribute("src"),t=v.completionSourceUrl(t),e.poster=t),t=document.querySelector(".mod_box .mod_bd .mod_video_info .video_title"),t){let r=t.textContent;r=r?r.trim():"",t=document.querySelector(".mod_box .mod_bd .mod_list_slider .slider_box .item.current span"),t&&(r=(r+=t.textContent)?r.trim():""),e.title=r}return e}(t):-1<a.indexOf("www.reddit.com")?o=function(t){var e={};return e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),t=document.querySelector("shreddit-app shreddit-title"),t&&(e.title=t.getAttribute("title")),e}(t):-1<a.indexOf("pornhub.com")?((g=document.querySelector("#videoShow #videoPlayerPlaceholder .playerFlvContainer"))&&(f=g),o=function(t){var e={},r=(e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),t.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement);return r&&r.classList.contains("playerWrapper")?((r=document.querySelector("#videoShow .categoryTags .headerWrap h1"))&&(r=r.textContent)&&(e.title=r.trim()),(r=document.querySelector("#videoPlayerPlaceholder img.videoElementPoster"))&&(e.poster=r.getAttribute("src")),N(e)):(r=t.parentNode.parentNode.parentNode.parentNode.parentNode,r&&"li"==r.tagName.toLowerCase()&&(t=r.querySelector(".videoWrapper .singleVideo a img.videoThumb"))&&(e.title=t.getAttribute("alt"),e.title&&(e.title="[Related videos] "+e.title),e.poster=t.getAttribute("src")),e)}(t)):-1<a.indexOf("facebook.com")?o=function(t){var e,r={};r.poster=t.getAttribute("poster"),r.downloadUrl=t.getAttribute("src"),r.title=t.getAttribute("title"),t=t.parentElement.parentElement.parentElement.parentElement.parentElement;return t&&t.classList.contains("displayed")&&"container"==t.getAttribute("data-type")&&((e=t.querySelector("div[data-type='video'] img.img"))&&(r.poster=e.getAttribute("src")),e=t.querySelector("div.displayed > div[data-type='container'] > div[data-type='container'] > div[data-type='container'] > div[data-type='text'] > div.native-text"))&&(r.title=e.textContent),r}(t):-1<a.indexOf("instagram.com")?o=function(t){let e={},r=(e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title"),t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode);var n;return r&&r.classList.contains("_ab8w")&&r.classList.contains("_ab94")&&r.classList.contains("_ab99")&&r.classList.contains("_ab9h")&&r.classList.contains("_ab9m")&&r.classList.contains("_ab9p")&&r.classList.contains("_abcm")?((n=r.querySelector("._aatk .x1uhb9sk .x10l6tqk .x78zum5 img.x5yr21d"))&&(e.poster=n.getAttribute("src")),(n=r.querySelector("._ab9f div._ae1h._ae1i ._ae2s div._ae5q._akdn div div div"))&&n.textContent&&(e.title=n.textContent.replace("... more",""))):(r=t.parentNode.parentNode.parentNode.parentNode.parentNode)&&r.classList.contains("_a8b4")&&r.classList.contains("_acjh")&&(n=r.querySelector("div > div > div.x9f619.x1d8287x.xz4gly6  div.x6ikm8r.x10wlt62 span"))&&(e.title=n.textContent),e}(t):-1<a.indexOf("xiaohongshu.com")?o=function(t){var e={};if(e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title"),t=document.querySelector(".video-container .video-banner .img-box"),t&&(t=t.getAttribute("style"),t=v.matchUrlInString(t))&&(e.poster=v.completionSourceUrl(t)),t=document.querySelector(".video-container .stage-bottom .author-desc-wrapper .author-desc"),t){let r=t.textContent;r&&(r=r.replace(/^展开/g,""),e.title=v.checkCharLengthAndSubStr(r))}return e}(t):-1<a.indexOf("jable.tv")?o=function(t){var e={};return e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title"),t=document.querySelector(".video-info .info-header .header-left h4"),t&&(e.title=t.textContent),e}(t):-1<a.indexOf("hxaa79.com")&&(o=function(t){var e={};return e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title"),t=document.querySelector(".play_main .play_main_1"),t&&(e.title=t.textContent),e}(t))}return o.downloadUrl&&(c=o.downloadUrl),c=v.completionSourceUrl(c),s=s||o.poster,l=l||o.title,o.qualityList&&o.qualityList.length&&(u=o.qualityList),l=l||document.title,l=l||v.getUrlPathName(c),s=v.completionSourceUrl(s),o.title=o.type&&"ad"==o.type?'<span style="font-weight: 700;">Ad·</span>'+l:l,o.poster=s,o.downloadUrl=c,o.hostUrl=i,o.qualityList=u,o.videoUuid=n,c&&S(r,f,o),o}(t,o,s).downloadUrl||n++}else n++})),n==r&&C()}else C()}function S(t,e,r){var a=r.downloadUrl;v.isURL(a)||(r.downloadUrl=i),r.videoKey&&!r.videoUuid&&(r.videoUuid=r.videoKey),a=r.qualityList;r.shouldDecode&&(r.qualityList=[],f[r.videoUuid]=a),async function(t,e,r){if(e&&v.isMobile()&&(o=o||await T())&&(!o||"off"!=o)&&(n||(i=await L(),n=i),"a"==n)){var i=e.getAttribute("stay-long-press");if(!i||"yes"!=i){document.querySelector("#__style_sinffer_unselect")||document.body.append(v.parseToDOM('<style id="__style_sinffer_unselect">\n          .__stay-unselect, video{\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            -webkit-touch-callout: none;\n          }\n          .__stay-touch-action{\n            touch-action: none!important;\n          }\n        </style>')),e.classList.add("__stay-unselect"),e.classList.add("__stay-touch-action");var a=r.hostUrl;if(-1<a.indexOf("youtube.com")){var s=document.querySelector("#player-control-overlay");s=(s&&(s.classList.contains("__stay-touch-action")||s.classList.add("__stay-touch-action"),s.classList.contains("__stay-unselect")||s.classList.add("__stay-unselect")),document.querySelector("#player-control-overlay .player-controls-background-container .player-controls-background"));s&&(s.classList.contains("__stay-touch-action")||s.classList.add("__stay-touch-action"),s.classList.contains("__stay-unselect")||s.classList.add("__stay-unselect")),new b(e,(()=>{q(t,e,r)}))}else if(!(-1<a.indexOf("mobile.twitter.com")))if(-1<a.indexOf("pornhub.com"))e&&(e.classList.contains("__stay-touch-action")||e.classList.add("__stay-touch-action"),e.classList.contains("__stay-unselect")||e.classList.add("__stay-unselect")),new b(e,(()=>{q(t,e,r)}));else if(-1<a.indexOf("muiplayer.js.org")){let e=document.querySelector("#mplayer-media-wrapper");(e=e||document.querySelector("#mplayer-cover"))&&new b(e,(()=>{q(t,e,r)}))}new w(e,(()=>{q(t,e,r)}))}}}(t,e,r),m.size&&(m.has(r.videoUuid)||m.has(r.videoKey))?p.forEach((t=>(t.videoUuid!=r.videoUuid&&t.videoUuid!=r.videoKey||(t.downloadUrl=r.downloadUrl,t.poster=r.poster||"",t.title=r.title,t.hostUrl=r.hostUrl,t.qualityList=r.qualityList&&r.qualityList.length?r.qualityList:[],t.type=r.type||""),t))):(r.videoUuid&&m.add(r.videoUuid),p.push(r)),O()}function U(){return l&&Object.keys(l).length&&u&&l.decodeFunStr&&u==l.pathUuid}function A(){Object.keys(f).length&&U()&&(Object.keys(f).forEach(((t,e)=>{if(e.length){e.forEach((t=>(t.downloadUrl&&!v.isURL(t.downloadUrl)&&(t.downloadUrl=D(t.downloadUrl)),t.audioUrl&&!v.isURL(t.audioUrl)&&(t.audioUrl=D(t.audioUrl)),t)));let r=e.filter((t=>{if(t.downloadUrl)return t}));p.forEach((e=>{if(e.videoUuid==t)return e.qualityList=r,e})),delete f[t]}})),O())}function O(){var e=v.hexMD5(JSON.stringify(p));r&&r==e||(r=e,t?(e={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoInfoList:p},s.runtime.sendMessage(e,(t=>{}))):window.postMessage({name:"VIDEO_INFO_CAPTURE",videoList:p}))}function L(){return new Promise(((e,r)=>{if(t)s.runtime.sendMessage({from:"sniffer",operate:"GET_STAY_AROUND"},(t=>{t.body&&"{}"!=JSON.stringify(t.body)&&e(t.body)}));else{const t=Math.random().toString(36).substring(2,9),r=n=>{n.data.pid===t&&"GET_STAY_AROUND_RESP"===n.data.name&&(n=n.data&&n.data.response?n.data.response.body:"b",e(n),window.removeEventListener("message",r))};window.postMessage({id:t,pid:t,name:"GET_STAY_AROUND"}),window.addEventListener("message",r)}}))}function T(){return new Promise(((e,r)=>{if(t)s.runtime.sendMessage({from:"popup",operate:"getLongPressStatus"},(t=>{t=t&&t.longPressStatus?t.longPressStatus:"on",e(t)}));else{const t=Math.random().toString(36).substring(2,9),r=n=>{n.data.pid===t&&"GET_LONG_PRESS_STATUS_RESP"===n.data.name&&(e(n.data.longPressStatusRes),window.removeEventListener("message",r))};window.postMessage({id:t,pid:t,name:"GET_LONG_PRESS_STATUS"}),window.addEventListener("message",r)}}))}function q(e,r,n){r.clientWidth;let o=r.clientHeight,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var a=window.innerWidth||document.documentElement.innerWidth||document.body.innerWidth;let l=r.getBoundingClientRect().top,c=r.getBoundingClientRect().left,u=("VIDEO"==r.tagName&&(l=r.parentNode.getBoundingClientRect().top,c=r.parentNode.getBoundingClientRect().left),c=10,a),d=v.div(v.mul(u,9),16),p=(o<v.div(i,2)&&(d=o),document.querySelector("#__stay_sinffer_modal"));(p=p||function(){let r=[{title:n.title,downloadUrl:n.downloadUrl,poster:n.poster,hostUrl:v.getHostname(n.hostUrl),uuid:""}],a="stay://x-callback-url/snifferVideo?list="+encodeURIComponent(JSON.stringify(r)),p="background-color: rgb(247,247,247);",f="rgb(54, 54, 57)",m="#E0E0E0",y="background-color: rgba(255, 255, 255, 1);",g="color:#000000;",h=t?s.runtime.getURL("img/popup-download-light.png"):"https://res.stayfork.app/scripts/8DF5C8391ED58046174D714911AD015E/icon.png",b="#F7B500",_="#000",w="https://res.stayfork.app/scripts/22BF8566F3522614F4F3A15EBC87378E/icon.png",x="https://res.stayfork.app/scripts/D660FA085601F608C3BE6F9CDB44DFCC/icon.png",E="https://res.stayfork.app/scripts/3F8E6C0D8F4FDD3767A7F0B151A72E94/icon.png";v.isDark()&&(y="background-color: rgba(0, 0, 0, 1);",g="color:#DCDCDC;",p="background-color: rgb(54, 54, 57);",h=t?s.runtime.getURL("img/popup-download-dark.png"):"https://res.stayfork.app/scripts/CFFCD2186E164262E0E776A545327605/icon.png",f="rgb(247,247,247)",m="#37372F",_="rgb(247,247,247)",w="https://res.stayfork.app/scripts/102BDC80B489A31FCA2F4E3A3B7CCE74/icon.png",x="https://res.stayfork.app/scripts/F6E653EE027B789962CEE7E6FB2CF65F/icon.png",E="https://res.stayfork.app/scripts/DC8756A3CE2F2752ED738E5C1A71FCFF/icon.png");let S=1,U=`<div stay-download="${a}" class="_stay-quality-item ">${"ad"==n.type?"Download Ad":"Download"}</div>`,A=n.qualityList;if(A&&A.length){let t="";S=0,A.forEach((e=>{let o=e.downloadUrl,i=e.audioUrl;if(n.shouldDecode){if(!v.isURL(o)&&!(o=D(o)))return;if(i&&!v.isURL(i)&&!(i=D(i)))return}r=[{title:n.title,downloadUrl:o,poster:n.poster,hostUrl:v.getHostname(n.hostUrl),uuid:"",protect:e.protect||!1,audioUrl:i,qualityLabel:e.qualityLabel}],o="stay://x-callback-url/snifferVideo?list="+encodeURIComponent(JSON.stringify(r));let a=e.quality,s="";if(a)try{a=a.replace(/[^0-9]/g,""),780<Number(a)&&(s='<span class="__stay-hd">HD</span>')}catch(e){}t+=`<div stay-download="${o}" class="_stay-quality-item">${e.qualityLabel}${s}</div>`,S+=1})),U=t}let O=l,L=l;l<0?(L=0,i<=o&&(L=v.div(v.sub(i,d),2))):0==l?i<=o&&(L=v.div(v.sub(i,d),2)):(R=v.add(4,36),R=v.add(v.add(d,R),v.add(v.mul(S,38),36)),R=v.add(R,38),l>v.sub(i,R)&&(L=v.sub(i,R)));let T="",q=t?s.runtime.getURL("img/video-default.png"):"https://res.stayfork.app/scripts/BB8CD00276006365956C32A6556696AD/icon.png",P='<div class="__stay-poster-box" ><div class="__stay-default-poster"><img style="max-width:100%;max-height:100%;" src="'+q+'"/></div><span style="font-size:13px;padding-top: 20px; -webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;'+g+'">'+v.getHostname(n.hostUrl)+"</span></div>";n.poster&&(T="border-radius: 15px;",P=`<div class="__stay-video-poster" style="background:url('${n.poster}') 50% 50% no-repeat;background-size: cover;"></div>`),function(t,e,r){if(t&&"VIDEO"==t.tagName){t.setAttribute("autoplay","autoplay"),t.setAttribute("crossOrigin","anonymous");var n=document.createElement("canvas");e=(n.width=e,n.height=r,n.getContext("2d"));e.drawImage(t,0,0,n.width,n.height)}}(e,u,d);var R=`<style id="__style_sinffer_style">\n          .__stay-modal-box{\n            position: fixed; \n            z-index: 9999999; \n            width: 100%; \n            height: 100%; \n            text-align: center; \n            top: 0px;\n            -webkit-overflow-scrolling: touch;\n            margin: 0 auto;\n            transition: all 0.6s;\n            box-sizing: border-box;\n            visibility: hidden;\n          }\n          .__stay-show-modal{\n            background-color: rgba(0, 0, 0, 0.4);\n            -webkit-backdrop-filter: blur(8px); \n          }\n          .__stay-sinffer-content{\n            width:100%;\n            position: absolute;\n            left: 0;\n            -webkit-transform: translate3d(0, ${O}px, 0);\n            transform: translate3d(0, ${O}px, 0);\n            will-change: transform;\n            -webkit-transition: -webkit-transform .4s cubic-bezier(0,0,.25,1) 80ms;\n            transition: transform .4s cubic-bezier(0,0,.25,1) 80ms;\n            box-sizing: border-box;\n          }\n          .__stay-trans{\n            -webkit-transform: translate3d(0,${L}px,0);\n            transform: translate3d(0,${L}px,0);\n          }\n          .__stay-content{\n            width:100%;\n            position: relative;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            justify-items: center;\n            align-items: center;\n          }\n          ._stay-sinffer-popup{\n            width:230px;padding-top: 10px;box-sizing: border-box;border-radius:15px;\n            ${p}\n            position: relative;\n            margin: 16px auto 0 auto;\n            z-index:999999;\n            visibility: hidden;\n            animation: fadein .5s;\n          }\n          .__stay-sinffer-poster{\n            width: 100%;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            height: ${d}px;\n            padding: 0 ${c}px;\n            margin:0 auto;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            justify-items: center;\n            align-items: center;\n            box-sizing: border-box;\n            box-shadow: 0 0px 10px rgba(54,54,57,0.1);\n            transition: All 0.4s ease-in-out;\n            -webkit-transition: All 0.4s ease-in-out;\n            -moz-transition: All 0.4s ease-in-out;\n            -o-transition: All 0.4s ease-in-out;\n            animation-name: zoom;\n            animation-duration: 0.6s;\n          }\n          .__stay-video-poster{\n            // object-fit: contain;\n            // object-position: center;\n            width:100%;\n            height:100%;\n            background-position: center;\n            background-repeat: no-repeat;\n            border-radius: 15px;\n           \n          }\n          .__stay-poster-box{\n            width:100%;\n            height:100%;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            ${y}\n            border-radius: 10px;\n            box-shadow: 0 0px 10px rgba(54,54,57,0.1);\n          }\n          .__stay-default-poster{\n            width:80px;\n            height:60px;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            justify-items: center;\n            align-items: center;\n            box-sizing: border-box;\n          }\n          ._stay-sinffer-title{\n            padding-left: 44px;\n            padding-right: 15px;\n            width: 100%;\n            height:36px;\n            line-height: 18px;\n            word-break:break-all;\n            word-wrap:break-word;\n            color: ${f};\n            -webkit-box-orient: vertical;\n            -webkit-user-select: none;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            text-align: left;\n            margin-bottom: 10px;\n            box-sizing: border-box;\n            font-size: 16px;\n            position: relative;\n          }\n          ._stay-sinffer-title::before{\n            content: '';\n            background: url(${w}) 50% 50% no-repeat;\n            background-size: 18px;\n            width: 18px;\n            height: 18px;\n            position: absolute;\n            left: 15px;\n            top: 50%;\n            transform: translate(0, -50%);\n            }\n          }\n          ._stay-sinffer-title span{\n            font-weight: 600;\n            color: ${g}\n          }\n          ._stay-sinffer-tool{\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 9px 15px;\n            height: 38px;\n            box-sizing: border-box;\n          }\n          ._stay-sinffer-tool .__tool{\n            width: 50%;\n            height: 100%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            color: ${g}\n          }\n          ._stay-sinffer-tool .__tool img{\n            width: 20px;\n          }\n          ._stay-sinffer-tool .__tool span{\n            padding-left: 10px;\n          }\n          ._stay-sinffer-tool .__airplay{\n            \n            border-right: 0.5px solid ${m};\n          }\n          ._stay-sinffer-tool .__pip{\n\n          }\n          ._stay-sinffer-download{\n            width:100%;\n            box-sizing: border-box;\n            display: flex;\n            justify-content: flex-start;\n            flex-direction: column;\n            align-items: center;\n          }\n          ._stay-quality-item{\n            height: 38px;\n            box-sizing: border-box;\n            width:100%;\n            padding-right: 20px;\n            position: relative;\n            color: ${f};\n            text-align:left;\n            font-size: 16px;\n            border-top: 0.5px solid ${m};\n            padding: 0 15px;\n            display: flex;\n            align-items: center;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n          }\n          ._stay-quality-item .__stay-hd{\n            border: 1px solid ${b};\n            background: ${_};\n            color: ${b};\n            font-size: 12px;\n            font-weight: 600;\n            display: inline-block;\n            padding: 0px 4px;\n            border-radius: 4px;\n            margin-left: 10px;\n            align-items: center;\n          }\n          ._stay-quality-item::after{\n            content:"";\n            background: url(${h}) no-repeat 50% 50%;  \n            background-size: 14px;\n            position: absolute;\n            right: 15px;\n            top: 50%;\n            transform: translate(0, -52%);\n            width: 14px;\n            height: 20px;\n          }\n          @keyframes zoom {\n            0% {transform: scale(1.05)}\n            100% {transform: scale(1);${T}}\n          }\n          @keyframes fadein {\n            0% {\n              transform: translate(0, -100%);\n            }\n            100% {\n              transform: none;\n            }\n          }\n          @keyframes fadeout {\n              0% {\n                transform: translate(0,100%);\n              }\n              100% {\n                  transform: none;\n              }\n          }\n        </style>`,C=['<div id="__stay_sinffer_modal" class="__stay-modal-box" >','<div class="__stay-sinffer-content">','<div class="__stay-content">','<div class="__stay-sinffer-poster">'+P+"</div>",'<div class="_stay-sinffer-popup">','<div class="_stay-sinffer-title">'+n.title+"</div>",`<div class="_stay-sinffer-tool"><div id="__stay_airplay" class="__tool __airplay"><img src="${x}" /><span>Airplay</span></div><div id="__stay_pip" class="__tool __pip"><img src="${E}" /><span>PIP</span></div></div>`,'<div class="_stay-sinffer-download">',U,"</div>","</div>","</div>","</div>","</div>"];return document.body.append(v.parseToDOM(R)),document.body.append(v.parseToDOM(C.join(""))),document.querySelector("#__stay_sinffer_modal")}()).style.visibility="visible";const f=document.querySelector("#__stay_sinffer_modal ._stay-sinffer-popup");document.querySelector("#__stay_sinffer_modal .__stay-sinffer-content").classList.add("__stay-trans");let m=setTimeout((function(){p.classList.add("__stay-show-modal"),f.style.visibility="visible",clearTimeout(m),m=0}),400);p.addEventListener("touchmove",(t=>{t.preventDefault(),t.stopPropagation()}),!1),p.addEventListener("touchstart",(t=>{t.preventDefault(),p.classList.remove("__stay-show-modal"),f.style.animation="fadeout .5s;";let e=setTimeout((()=>{p&&document.body.removeChild(p),document.body.removeChild(document.querySelector("#__style_sinffer_style")),clearTimeout(e),e=0}),200)}),!1);const y=document.querySelectorAll("#__stay_sinffer_modal ._stay-quality-item");if(y&&y.length)for(let t=0;t<y.length;t++)y[t].addEventListener("touchstart",(t=>{t=t.target.getAttribute("stay-download");var e=document.createElement("a");e.href=t,e.click()}));document.querySelector("#__stay_pip").addEventListener("touchstart",(t=>{!async function(t){try{await t.requestPictureInPicture()}catch(t){}}(e)}))}function D(t){var e,r;return U()?(e=l.decodeFunStr,e=new Function("return "+e),r=v.queryParams(t,"url"),t=v.queryParams(t,"s"),t=e()(decodeURIComponent(t)),decodeURIComponent(r)+"&sig="+t):""}function P(t){return U()?D(t):t}function R(t){return t&&t.length?(t=t.sort(v.compare("bitrate")).pop()).url||(U()?D(t.signatureCipher):t.signatureCipher):""}function C(){let t=setTimeout((()=>{{let t={},e=window.location.host,r=(i=window.location.href,t.hostUrl=i,null);-1<e.indexOf("pornhub.com")&&(r=(r=document.querySelector("#videoShow #videoPlayerPlaceholder .mgp_videoWrapper .mgp_videoPoster img"))||document.querySelector("#videoShow #videoPlayerPlaceholder .mgp_videoWrapper"),t=N(t)),t.downloadUrl&&S(null,r,t)}clearTimeout(t),t=0}),400)}function N(t){if((t=t||{}).videoKey=v.queryURLParams(window.location.href,"viewkey"),window.VIDEO_SHOW&&(!t.videoKey||t.videoKey==window.VIDEO_SHOW.vkey)){t.title||(t.title=window.VIDEO_SHOW.videoTitle),t.poster||(t.poster=window.VIDEO_SHOW.videoImage);var e=window.VIDEO_SHOW.playerId;if(e&&(e=e.split("_"),1<e.length&&(e="flashvars_"+e[1],e=window[e].mediaDefinitions,e&&e.length))){let r,n=[];e.forEach((e=>{"hls"==e.format&&"string"==typeof e.quality&&e.videoUrl&&n.push({downloadUrl:e.videoUrl,qualityLabel:e.quality,quality:Number(e.quality)}),!e.defaultQuality||"boolean"!=typeof e.defaultQuality&&"number"!=typeof e.defaultQuality||(r=e.defaultQuality,t.downloadUrl)||(t.downloadUrl=e.videoUrl)})),t.qualityList=n}}return t}function k(t){if(!t)return{};var e={};if(e.title=t.title,e.poster=t.poster,e.downloadUrl=t.playurl,t.clarityUrl&&t.clarityUrl.length){let r=[];t.clarityUrl.forEach((t=>{t.vodVideoHW,r.push({downloadUrl:t.url,qualityLabel:t.title,quality:t.key})})),e.qualityList=r}return e}function I(){var t=document.querySelector(".art-player-wrapper .art-video-player .art-poster");return t&&(t=t.getAttribute("style"),t)?v.matchUrlInString(t):(t=document.querySelector("#bdMainPlayer .art-video-player .art-poster"),t&&(t=t.getAttribute("style"),t)?v.matchUrlInString(t):"")}function M(){var t=document.querySelector(".adVideoPageV3 .curVideoInfo h3.videoTitle");return(t=t||document.querySelector(".video-info .video-info-title"))||(t=document.querySelector(".video-main .video-content .video-title .video-title-left"))?t.textContent:""}function j(){var t=document.querySelector(".html5-video-player .html5-video-container video");return t?t.getAttribute("src"):""}function F(){var t=document.querySelector(".slim-video-metadata-header .slim-video-information-content .slim-video-information-title");return(t=t||document.querySelector("#title h1.style-scope"))?t.textContent:""}function z(){var t=document.querySelector(".ytp-cued-thumbnail-overlay-image");return t&&(t=t.getAttribute("style"),t)?v.matchUrlInString(t):(t=document.querySelector(".html5-video-player .ytp-cued-thumbnail-overlay .ytp-cued-thumbnail-overlay-image"),t&&(t=t.getAttribute("style"),t)?v.matchUrlInString(t):(t=document.querySelector(".video-wrapper .background-style-black"),t&&(t=t.getAttribute("style"),t)?v.matchUrlInString(t):""))}function V(){for(let e=1;e<10;e++){let r;if(t=e,r=setTimeout((()=>{if((c=document.querySelector("#player-base"))&&c.getAttribute("src")){var t=c.getAttribute("src");let r=t;var e=t.split("/");$(r=t.startsWith("/")?e[3]:e[2],t,!0),h.forEach((t=>{clearTimeout(t)}))}}),200*t),c&&c.getAttribute("src"))break;h.push(r)}var t}async function $(e,r,n){o=e,i=r;var o,i;r=await new Promise(((e,r)=>{if(t)s.runtime.sendMessage({from:"sniffer",operate:"fetchYoutubeDecodeFun",pathUuid:o,pathUrl:i},(t=>{t=t&&t.decodeFun?t.decodeFun:"",e(t)}));else{const t=Math.random().toString(36).substring(2,9),r=n=>{n.data.pid===t&&"GET_YOUTUBE_DECODE_FUN_RESP"===n.data.name&&(e(n.data.decodeFun),window.removeEventListener("message",r))};window.postMessage({id:t,pid:t,name:"GET_YOUTUBE_DECODE_FUN",pathUuid:o,pathUrl:i}),window.addEventListener("message",r)}}));r?(l={pathUuid:e,decodeFunStr:r},window.localStorage.setItem("__stay_decode_str",JSON.stringify(l)),n&&A()):(l={pathUuid:e,decodeFunStr:""},window.localStorage.setItem("__stay_decode_str",JSON.stringify(l)))}function W(t){!async function(){n=n||await L(),o=o||await T()}(),async function(){var t;-1<a.indexOf("youtube.com")&&((t=window.localStorage.getItem("__stay_decode_str"))&&(l=JSON.parse(t)).decodeFunStr?A:V)()}(),x(t)}W(!1),document.onreadystatechange=()=>{"complete"===document.readyState&&W(!0)},Object.defineProperty(e,"randomCode",{get:function(){return randomCode},set:function(t){(randomCode=t)!=u&&$(u=t,d,!1)}})}let l,c=window.location.href,u=void new Set;window.addEventListener("message",(t=>{if(t&&t.data&&t.data.name){var e=t.data.name;if("VIDEO_LINK_CAPTURE"===e){var r=t.data.urls||new Set;r=(u=r,{from:"sniffer",operate:"VIDEO_INFO_PUSH",videoPageUrl:c,videoLinkSet:u});s.runtime.sendMessage(r,(t=>{}))}else if("VIDEO_INFO_CAPTURE"===e)r=t.data.videoList||[],l=r,r={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoPageUrl:c,videoInfoList:l},s.runtime.sendMessage(r,(t=>{}));else if("GET_STAY_AROUND"===e){let e=t.data.pid;s.runtime.sendMessage({from:"sniffer",operate:"GET_STAY_AROUND"},(t=>{window.postMessage({pid:e,name:"GET_STAY_AROUND_RESP",response:t})}))}else if("GET_LONG_PRESS_STATUS"===e){let e=t.data.pid;s.runtime.sendMessage({from:"popup",operate:"getLongPressStatus"},(t=>{t=t&&t.longPressStatus?t.longPressStatus:"on",window.postMessage({pid:e,name:"GET_LONG_PRESS_STATUS_RESP",longPressStatusRes:t})}))}else if("GET_YOUTUBE_DECODE_FUN"===e){let n=t.data.pid;r=t.data.pathUuid,e=t.data.pathUrl,s.runtime.sendMessage({from:"sniffer",operate:"fetchYoutubeDecodeFun",pathUrl:e,pathUuid:r},(t=>{t=t&&t.decodeFun?t.decodeFun:"",window.postMessage({pid:n,name:"GET_YOUTUBE_DECODE_FUN_RESP",decodeFun:t})}))}}}))}}})();