(()=>{var __webpack_modules__={"./src/sniffer/sniffer.user.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{eval("__webpack_require__(/*! core-js/modules/web.dom-exception.stack.js */ \"./node_modules/core-js/modules/web.dom-exception.stack.js\");\n__webpack_require__(/*! core-js/modules/es.array.push.js */ \"./node_modules/core-js/modules/es.array.push.js\");\n/**\n * 解析页面video标签\n */\n\nlet __b;\nif (typeof window.browser !== 'undefined') {\n  __b = window.browser;\n}\nif (typeof window.chrome !== 'undefined') {\n  __b = window.chrome;\n}\nconst browser = __b;\n(function () {\n  try {\n    // for page\n    handleInjectScript();\n    document.addEventListener('securitypolicyviolation', e => {\n      // for content\n      injectParseVideoJS(true);\n    });\n  } catch (error) {}\n  /**\n   * for page \n   */\n  function handleInjectScript() {\n    const MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;\n    let contentHost = window.location.host;\n    let scriptTag = document.createElement('script');\n    scriptTag.type = 'text/javascript';\n    scriptTag.id = 'stay_inject_parse_video_js_' + contentHost;\n    let injectJSContent = `\\n\\nconst handleInjectParseVideoJS = ${injectParseVideoJS}\\n\\nhandleInjectParseVideoJS(false);`;\n    scriptTag.appendChild(document.createTextNode(injectJSContent));\n    // console.log('document.body--------------------------',document.body)\n    if (document.body) {\n      // console.log('document.body--------------------------')\n      document.body.appendChild(scriptTag);\n    } else {\n      // console.log('else-----------------document.body--------------------------');\n      let observerBody = new MutationObserver((mutations, observer) => {\n        // console.log('---------mutations-------',mutations);\n        // console.log('---------observer---------',observer);\n        if (document.body) {\n          // console.log('document.body---------gogogogogogogogogogo-----------------');\n          document.body.appendChild(scriptTag);\n          observerBody.disconnect();\n        }\n      });\n      observerBody.observe(document.documentElement, {\n        attributes: true,\n        childList: true,\n        characterData: true,\n        subtree: true\n      });\n    }\n  }\n  function injectParseVideoJS(isContent) {\n    let isLoadingAround = false;\n    let isLoadingLongPressStatus = false;\n    let definedObj = {};\n    let videoListMd5 = '';\n    let isStayAround = '';\n    let longPressStatus = '';\n    let hostUrl = window.location.href;\n    let host = window.location.host;\n    let decodeSignatureCipher = {};\n    let playerBase = '';\n    let ytBaseJSUuid = '';\n    let ytRandomBaseJs = '';\n    let ytPublicParam = {}; //cpn,cver,ptk,oid,ptchn,pltype\n    let ytParam_N_Obj = {};\n    // console.log('------------injectParseVideoJS-----start------------------',decodeSignatureCipher)\n    let videoList = [];\n    // key:videoUuid,\n    // value:qualityList,\n    let shouldDecodeQuality = {};\n    // 获取到的videoId 集合\n    let videoIdSet = new Set();\n    // Firefox和Chrome早期版本中带有前缀  \n    const MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;\n    let videoDoms;\n    let timerArr = [];\n    const Utils = {\n      compare: function (key) {\n        return (cur, next) => {\n          let curValue = cur[key];\n          let nextValue = next[key];\n          if (typeof curValue != 'number') {\n            curValue = curValue.replace(/[^0-9]/g, '');\n            if (!curValue) {\n              curValue = 0;\n            } else {\n              curValue = Number(curValue);\n            }\n          }\n          if (typeof nextValue != 'number') {\n            nextValue = nextValue.replace(/[^0-9]/g, '');\n            if (!nextValue) {\n              nextValue = 0;\n            } else {\n              nextValue = Number(nextValue);\n            }\n          }\n          return nextValue - curValue;\n        };\n      },\n      isMobileOrIpad: function () {\n        const userAgentInfo = navigator.userAgent;\n        let Agents = ['Android', 'iPhone', 'SymbianOS', 'Windows Phone', 'iPad', 'iPod'];\n        let getArr = Agents.filter(i => userAgentInfo.includes(i));\n        let isIphoneOrIpad = getArr.length ? true : false;\n        if (isIphoneOrIpad) {\n          return isIphoneOrIpad;\n        } else {\n          if (userAgentInfo.match(/Macintosh/) && navigator.maxTouchPoints > 1) {\n            return true;\n          }\n        }\n        return isIphoneOrIpad;\n      },\n      isMobile: function () {\n        const userAgentInfo = navigator.userAgent;\n        let Agents = ['Android', 'iPhone', 'SymbianOS', 'Windows Phone', 'iPod'];\n        let getArr = Agents.filter(i => userAgentInfo.includes(i));\n        return getArr.length ? true : false;\n      },\n      /*\n      * 替换URL的参数值\n      * url 目标url\n      * arg 需要替换的参数名称(区分大小写)\n      * arg_val 替换后的参数的值\n      * return url 参数替换后的url\n      */\n      replaceUrlArg: function (url, arg, argVal) {\n        const urlObj = new URL(url);\n        urlObj.searchParams.set(arg, argVal);\n        return urlObj.href;\n      },\n      queryURLParams: function (url, name) {\n        const pattern = new RegExp('[?&#]+' + name + '=([^?&#]+)');\n        const res = pattern.exec(url);\n        if (!res) return '';\n        if (!res[1]) return '';\n        return res[1];\n      },\n      queryParams: function (path, name) {\n        if (!path) {\n          return '';\n        }\n        let url = 'https;//stap.app?' + path;\n        return this.queryURLParams(url, name);\n      },\n      getLastPathParameter: function (url) {\n        const path = new URL(url).pathname;\n        const segments = path.split('/').filter(segment => segment !== '');\n        return segments[segments.length - 1];\n      },\n      matchUrlInString: function (imgText) {\n        const urlReg = new RegExp('(https?|http)?(:)?//[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]', 'g');\n        const imgMatchs = imgText.match(urlReg);\n        //   poster = imgMatchs && imgMatchs.length ? imgMatchs[0] : '';\n        if (imgMatchs && imgMatchs.length) {\n          return imgMatchs[0];\n        }\n        return '';\n      },\n      isURL: function (s) {\n        if (!s) {\n          return false;\n        }\n        return /^http[s]?:\\/\\/.*/.test(s);\n      },\n      completionSourceUrl: function (downloadUrl) {\n        if (!downloadUrl) {\n          return '';\n        }\n        if (!/^(f|ht)tps?:\\/\\//i.test(downloadUrl)) {\n          if (/^\\/\\//i.test(downloadUrl)) {\n            downloadUrl = window.location.protocol + downloadUrl;\n          } else {\n            if (/^\\//i.test(downloadUrl)) {\n              downloadUrl = window.location.origin + downloadUrl;\n            } else {\n              downloadUrl = window.location.origin + window.location.pathname + downloadUrl;\n            }\n          }\n        }\n        return downloadUrl;\n      },\n      checkCharLengthAndSubStr: function (text, len) {\n        if (!text) {\n          return '';\n        }\n        if (!len) {\n          len = 80;\n        }\n        let textTemp = text.replace(/[^x00-xff]/g, '01');\n        if (textTemp.length <= len) {\n          return text;\n        } else {\n          return text.substr(0, len);\n        }\n      },\n      isChinese(obj) {\n        if (!obj) {\n          return false;\n        }\n        if (/.*[u4e00-u9fa5]+.*$/.test(obj)) {\n          return true;\n        }\n        return false;\n      },\n      urlEncodeChinese(urlStr) {\n        if (!urlStr) {\n          return urlStr;\n        }\n        let reg = new RegExp('[\\\\u4E00-\\\\u9FFF]', 'g');\n        return urlStr.replace(reg, function (match) {\n          return window.encodeURI(match);\n        });\n      },\n      getUrlPathName: function (srcUrl) {\n        let pathName = '';\n        if (this.isURL(srcUrl)) {\n          pathName = new URL(srcUrl).pathname;\n        } else {\n          pathName = new URL(hostUrl).pathname;\n        }\n        let pathArr = pathName.split('/');\n        pathArr = pathArr.filter(item => {\n          if (item && item != '') {\n            return item;\n          }\n        });\n        return pathArr.pop();\n      },\n      generateUuid: function (len, radix) {\n        len = len || 32;\n        let chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\n        let uuid = [],\n          i;\n        radix = radix || chars.length;\n        if (len) {\n          // Compact form\n          for (i = 0; i < len; i++) uuid[i] = chars[0 | Math.random() * radix];\n        } else {\n          // rfc4122, version 4 form\n          let r;\n\n          // rfc4122 requires these characters\n          uuid[8] = uuid[13] = uuid[18] = uuid[23] = '_';\n          uuid[14] = '4';\n\n          // Fill in random data.  At i==19 set the high bits of clock sequence as\n          // per rfc4122, sec. 4.1.5\n          for (i = 0; i < 36; i++) {\n            if (!uuid[i]) {\n              r = 0 | Math.random() * 16;\n              uuid[i] = chars[i == 19 ? r & 0x3 | 0x8 : r];\n            }\n          }\n        }\n        return uuid.join('');\n      },\n      isBase64(str) {\n        if (!str) {\n          return false;\n        }\n        if (/^data:.*\\w+;base64,/.test(str)) {\n          return true;\n        }\n        if (str === '' || str.trim() === '') {\n          return false;\n        }\n        try {\n          return window.btoa(window.atob(str)) == str;\n        } catch (err) {\n          return false;\n        }\n      },\n      isDark() {\n        return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n      },\n      parseToDOM(str) {\n        let divDom = document.createElement('template');\n        if (typeof str == 'string') {\n          divDom.innerHTML = str;\n          return divDom.content;\n        }\n        return str;\n      },\n      getHostname(url) {\n        if (!url) {\n          return '';\n        }\n        try {\n          return new URL(url).hostname.toLowerCase();\n        } catch (error) {\n          return url.split('/')[0].toLowerCase();\n        }\n      },\n      div(a, b) {\n        let c,\n          d,\n          e = 0,\n          f = 0;\n        try {\n          e = a.toString().split('.')[1].length;\n        } catch (g) {\n          e = 0;\n        }\n        try {\n          f = b.toString().split('.')[1].length;\n        } catch (g) {\n          f = 0;\n        }\n        c = Number(a.toString().replace('.', ''));\n        d = Number(b.toString().replace('.', ''));\n        return this.mul(c / d, Math.pow(10, f - e));\n      },\n      sub(a, b) {\n        let c, d, e;\n        try {\n          c = a.toString().split('.')[1].length;\n        } catch (f) {\n          c = 0;\n        }\n        try {\n          d = b.toString().split('.')[1].length;\n        } catch (f) {\n          d = 0;\n        }\n        e = Math.pow(10, Math.max(c, d));\n        return (this.mul(a, e) - this.mul(b, e)) / e;\n      },\n      mul(a, b) {\n        let c = 0,\n          d = a.toString(),\n          e = b.toString();\n        try {\n          c += d.split('.')[1].length;\n        } catch (f) {}\n        try {\n          c += e.split('.')[1].length;\n        } catch (f) {}\n        return Number(d.replace('.', '')) * Number(e.replace('.', '')) / Math.pow(10, c);\n      },\n      add(a, b) {\n        let c, d, e;\n        try {\n          c = a.toString().split('.')[1].length;\n        } catch (f) {\n          c = 0;\n        }\n        try {\n          d = b.toString().split('.')[1].length;\n        } catch (f) {\n          d = 0;\n        }\n        e = Math.pow(10, Math.max(c, d));\n        return (this.mul(a, e) + this.mul(b, e)) / e;\n      },\n      hexMD5(str) {\n        /*\n        * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n        * Digest Algorithm, as defined in RFC 1321.\n        * Version 1.1 Copyright (C) Paul Johnston 1999 - 2002.\n        * Code also contributed by Greg Holt\n        * See http://pajhome.org.uk/site/legal.html for details.\n        */\n\n        /*\n        * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n        * to work around bugs in some JS interpreters.\n        */\n        function safe_add(x, y) {\n          let lsw = (x & 0xFFFF) + (y & 0xFFFF);\n          let msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n          return msw << 16 | lsw & 0xFFFF;\n        }\n\n        /*\n        * Bitwise rotate a 32-bit number to the left.\n        */\n        function rol(num, cnt) {\n          return num << cnt | num >>> 32 - cnt;\n        }\n\n        /*\n        * These functions implement the four basic operations the algorithm uses.\n        */\n        function cmn(q, a, b, x, s, t) {\n          return safe_add(rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);\n        }\n        function ff(a, b, c, d, x, s, t) {\n          return cmn(b & c | ~b & d, a, b, x, s, t);\n        }\n        function gg(a, b, c, d, x, s, t) {\n          return cmn(b & d | c & ~d, a, b, x, s, t);\n        }\n        function hh(a, b, c, d, x, s, t) {\n          return cmn(b ^ c ^ d, a, b, x, s, t);\n        }\n        function ii(a, b, c, d, x, s, t) {\n          return cmn(c ^ (b | ~d), a, b, x, s, t);\n        }\n\n        /*\n        * Calculate the MD5 of an array of little-endian words, producing an array\n        * of little-endian words.\n        */\n        function coreMD5(x) {\n          let a = 1732584193;\n          let b = -271733879;\n          let c = -1732584194;\n          let d = 271733878;\n          for (let i = 0; i < x.length; i += 16) {\n            let olda = a;\n            let oldb = b;\n            let oldc = c;\n            let oldd = d;\n            a = ff(a, b, c, d, x[i + 0], 7, -680876936);\n            d = ff(d, a, b, c, x[i + 1], 12, -389564586);\n            c = ff(c, d, a, b, x[i + 2], 17, 606105819);\n            b = ff(b, c, d, a, x[i + 3], 22, -1044525330);\n            a = ff(a, b, c, d, x[i + 4], 7, -176418897);\n            d = ff(d, a, b, c, x[i + 5], 12, 1200080426);\n            c = ff(c, d, a, b, x[i + 6], 17, -1473231341);\n            b = ff(b, c, d, a, x[i + 7], 22, -45705983);\n            a = ff(a, b, c, d, x[i + 8], 7, 1770035416);\n            d = ff(d, a, b, c, x[i + 9], 12, -1958414417);\n            c = ff(c, d, a, b, x[i + 10], 17, -42063);\n            b = ff(b, c, d, a, x[i + 11], 22, -1990404162);\n            a = ff(a, b, c, d, x[i + 12], 7, 1804603682);\n            d = ff(d, a, b, c, x[i + 13], 12, -40341101);\n            c = ff(c, d, a, b, x[i + 14], 17, -1502002290);\n            b = ff(b, c, d, a, x[i + 15], 22, 1236535329);\n            a = gg(a, b, c, d, x[i + 1], 5, -165796510);\n            d = gg(d, a, b, c, x[i + 6], 9, -1069501632);\n            c = gg(c, d, a, b, x[i + 11], 14, 643717713);\n            b = gg(b, c, d, a, x[i + 0], 20, -373897302);\n            a = gg(a, b, c, d, x[i + 5], 5, -701558691);\n            d = gg(d, a, b, c, x[i + 10], 9, 38016083);\n            c = gg(c, d, a, b, x[i + 15], 14, -660478335);\n            b = gg(b, c, d, a, x[i + 4], 20, -405537848);\n            a = gg(a, b, c, d, x[i + 9], 5, 568446438);\n            d = gg(d, a, b, c, x[i + 14], 9, -1019803690);\n            c = gg(c, d, a, b, x[i + 3], 14, -187363961);\n            b = gg(b, c, d, a, x[i + 8], 20, 1163531501);\n            a = gg(a, b, c, d, x[i + 13], 5, -1444681467);\n            d = gg(d, a, b, c, x[i + 2], 9, -51403784);\n            c = gg(c, d, a, b, x[i + 7], 14, 1735328473);\n            b = gg(b, c, d, a, x[i + 12], 20, -1926607734);\n            a = hh(a, b, c, d, x[i + 5], 4, -378558);\n            d = hh(d, a, b, c, x[i + 8], 11, -2022574463);\n            c = hh(c, d, a, b, x[i + 11], 16, 1839030562);\n            b = hh(b, c, d, a, x[i + 14], 23, -35309556);\n            a = hh(a, b, c, d, x[i + 1], 4, -1530992060);\n            d = hh(d, a, b, c, x[i + 4], 11, 1272893353);\n            c = hh(c, d, a, b, x[i + 7], 16, -155497632);\n            b = hh(b, c, d, a, x[i + 10], 23, -1094730640);\n            a = hh(a, b, c, d, x[i + 13], 4, 681279174);\n            d = hh(d, a, b, c, x[i + 0], 11, -358537222);\n            c = hh(c, d, a, b, x[i + 3], 16, -722521979);\n            b = hh(b, c, d, a, x[i + 6], 23, 76029189);\n            a = hh(a, b, c, d, x[i + 9], 4, -640364487);\n            d = hh(d, a, b, c, x[i + 12], 11, -421815835);\n            c = hh(c, d, a, b, x[i + 15], 16, 530742520);\n            b = hh(b, c, d, a, x[i + 2], 23, -995338651);\n            a = ii(a, b, c, d, x[i + 0], 6, -198630844);\n            d = ii(d, a, b, c, x[i + 7], 10, 1126891415);\n            c = ii(c, d, a, b, x[i + 14], 15, -1416354905);\n            b = ii(b, c, d, a, x[i + 5], 21, -57434055);\n            a = ii(a, b, c, d, x[i + 12], 6, 1700485571);\n            d = ii(d, a, b, c, x[i + 3], 10, -1894986606);\n            c = ii(c, d, a, b, x[i + 10], 15, -1051523);\n            b = ii(b, c, d, a, x[i + 1], 21, -2054922799);\n            a = ii(a, b, c, d, x[i + 8], 6, 1873313359);\n            d = ii(d, a, b, c, x[i + 15], 10, -30611744);\n            c = ii(c, d, a, b, x[i + 6], 15, -1560198380);\n            b = ii(b, c, d, a, x[i + 13], 21, 1309151649);\n            a = ii(a, b, c, d, x[i + 4], 6, -145523070);\n            d = ii(d, a, b, c, x[i + 11], 10, -1120210379);\n            c = ii(c, d, a, b, x[i + 2], 15, 718787259);\n            b = ii(b, c, d, a, x[i + 9], 21, -343485551);\n            a = safe_add(a, olda);\n            b = safe_add(b, oldb);\n            c = safe_add(c, oldc);\n            d = safe_add(d, oldd);\n          }\n          return [a, b, c, d];\n        }\n        /*\n        * Convert an 8-bit character string to a sequence of 16-word blocks, stored\n        * as an array, and append appropriate padding for MD4/5 calculation.\n        * If any of the characters are >255, the high byte is silently ignored.\n        */\n        function str2binl(str) {\n          let bin = [];\n          for (let i = 0; i < str.length * 8; i += 8) {\n            bin[i >> 5] |= (str.charCodeAt(i / 8) & 0xFF) << i % 32;\n          }\n          return bin;\n        }\n\n        /*\n        * Convert an array of little-endian words to a hex string.\n        */\n        function binl2hex(binarray) {\n          let hex_tab = '0123456789abcdef';\n          let str = '';\n          for (let i = 0; i < binarray.length * 4; i++) {\n            str += hex_tab.charAt(binarray[i >> 2] >> i % 4 * 8 + 4 & 0xF) + hex_tab.charAt(binarray[i >> 2] >> i % 4 * 8 & 0xF);\n          }\n          return str;\n        }\n        return binl2hex(coreMD5(str2binl(str)));\n      }\n    };\n\n    /**\n     * 长按功能，长按 700ms 以上即可调用回调方法\n     *\n     * @class\n     */\n    class LongPress {\n      /**\n       * 构造器\n       *\n       * @public\n       * @param {String} dom 需要长按的 DOM 对象\n       * @param {function} callback 长按触发的回调函数\n       */\n      constructor(dom, callback) {\n        this.dom = dom;\n        this.timer = 0;\n        this.init(callback);\n      }\n\n      /**\n       * 初始化\n       *\n       * @private\n       \n       */\n      init(callback) {\n        this.touchstart(callback);\n        this.touchend();\n        this.touchmove();\n        this.bindLongPressEventFlag();\n      }\n\n      /**\n       * 标记是否绑定过长按事件\n       */\n      bindLongPressEventFlag() {\n        this.dom.setAttribute('stay-long-press', 'yes');\n        // this.dom.eventList['stayLongPress'] = 'yes';\n      }\n\n      /**\n       * 手指按下时开启定时器，700 毫秒后触发回调函数\n       *\n       * @private\n       * @param {function} callback 回调函数\n       */\n      touchstart(callback) {\n        const self = this;\n        self.dom.removeEventListener('touchstart', function (event) {\n          // event.preventDefault();\n          // event.stopPropagation();\n          self.handleLongPress(event, callback);\n        });\n        self.dom.addEventListener('touchstart', function (event) {\n          // console.log('this.dom----touchstart-----',event)\n          self.handleTargetTouchend(event.target);\n          self.timer = setTimeout((e, fun) => {\n            self.handleLongPress(e, fun);\n          }, 600, event, callback);\n          return false;\n        }, false);\n      }\n      handleTargetTouchend(target) {\n        const self = this;\n        if (!target) {\n          return;\n        }\n        target.addEventListener('touchend', event => {\n          // clearTimeout(self.timer);\n          self.handleTouchend(event, target);\n        });\n      }\n      handleLongPress(event, callback) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (isHidden(this.dom)) {\n          return;\n        }\n        let target = event.changedTouches[0];\n        try {\n          // target.target.click();\n          target.target.addEventListener('contextmenu', function (e) {\n            e.preventDefault();\n          });\n        } catch (error) {}\n        // 开启定时器\n        if (typeof callback === 'function') {\n          callback();\n          this.timer = 0;\n        } else {\n          console.error('callback is not a function!');\n        }\n      }\n      /**\n       * 手指抬起时清除定时器，无论按住时间是否达到 700 毫秒的阈值\n       *\n       * @private\n       */\n      touchend() {\n        const self = this;\n        self.dom.removeEventListener('touchend', function (event) {\n          self.handleTouchend(event, null);\n        });\n        self.dom.addEventListener('touchend', function (event) {\n          self.handleTouchend(event, null);\n          return false;\n        });\n      }\n      handleTouchend(event, isTarget) {\n        const self = this;\n        // console.log('this.dom----handleTouchend-----isTarget', isTarget, event);\n        if (isHidden(this.dom)) {\n          return;\n        }\n        // event.stopPropagation();\n        // 清除定时器\n        clearTimeout(this.timer);\n        if (this.timer != 0) {\n          try {\n            if (isTarget) {\n              isTarget.removeEventListener('touchend', event => {\n                clearTimeout(self.timer);\n              });\n            }\n          } catch (error) {}\n        }\n      }\n\n      /**\n       * 如果手指有移动，则取消所有事件，此时说明用户只是要移动而不是长按\n       */\n      touchmove() {\n        const self = this;\n        self.dom.removeEventListener('touchmove', function (event) {\n          // event.preventDefault();\n          handleTouchmove(event);\n        });\n        self.dom.addEventListener('touchmove', function (event) {\n          // console.log('this.dom-----touchmove-------',event);\n          // event.preventDefault();\n          handleTouchmove(event);\n          return false;\n        });\n        function handleTouchmove(event) {\n          if (isHidden(self.dom)) {\n            return;\n          }\n          clearTimeout(self.timer); //清除定时器\n          self.timer = 0;\n        }\n      }\n    }\n    function isHidden(el) {\n      if (!el) {\n        return true;\n      }\n      let style = window.getComputedStyle(el); //el即DOM元素\n      if (!style) {\n        return false;\n      }\n      return style.display === 'none' || style.visibility === 'hidden';\n    }\n    /**\n     * 判断当前target是否是显示的video或video所在位置的dom\n     * 1、判断当前target是否是video标签\n     * 2、是video标签，在判断是否有src,或者childNodes是否有Source标签及其src信息，再判断\n     * 3、不是video标签\n     *    3.1、判断该target是否展示，展示则true, 不展示则false;\n     *    3.2、document.querySelectorAll('video'); ，没有则false,有再判断是否有src及childNodes是否有Source内容，空则false\n     * @param {*} target \n     * @returns \n     */\n    function checkTargetIfShowOnScreen(target) {\n      if (!target) {\n        return true;\n      }\n      return true;\n    }\n\n    /**\n     * 长按功能，长按 700ms 以上即可调用回调方法\n     *\n     * @class\n     */\n    class DocumentLongPress {\n      /**\n       * 构造器\n       *\n       * @public\n       * @param {String} dom 需要长按的 DOM 对象\n       * @param {function} callback 长按触发的回调函数\n       */\n      constructor(dom, callback) {\n        this.callback = callback;\n        this.dom = dom;\n        // this.startTime = 0; // 触摸起始时间\n        // this.endTime = 0; // 触摸终止时间\n        this.stayLongPressTimer = 0;\n        this.distance = 10; // 触摸距离值\n        this.handleTouchStartEvent = this.handleTouchStartEvent.bind(this);\n        this.touchmoveCallback = this.touchmoveCallback.bind(this);\n        this.touchEndCallback = this.touchEndCallback.bind(this);\n        this.init();\n      }\n      getDomPageStartX() {\n        return this.dom.getBoundingClientRect().left;\n      }\n      getDomPageStartY() {\n        return (document.documentElement.scrollTop || window.pageYOffset) + this.dom.getBoundingClientRect().top;\n      }\n      getDomPageEndX() {\n        return this.getDomPageStartX() + this.dom.clientWidth;\n      }\n      getDomPageEndY() {\n        return this.getDomPageStartY() + this.dom.clientHeight;\n      }\n\n      /**\n       * 初始化(监听长按事件)\n       *\n       * @private\n       */\n      init() {\n        this.stayLongPressTimer = 0;\n        this.distance = 10; // 触摸距离值\n        this.touchstart();\n        this.touchmove();\n        this.touchend();\n        this.bindLongPressEventFlag();\n      }\n\n      /**\n       * 移除长按事件\n       */\n      removeEvent() {\n        // console.log('removeEvent------------------',this.stayLongPressTimer);\n        if (this.stayLongPressTimer) {\n          clearTimeout(this.stayLongPressTimer);\n          this.stayLongPressTimer = 0;\n        }\n        this.removeTouchstart();\n        this.removeTouchmove();\n        this.removeTouchend();\n      }\n\n      /**\n       * 标记是否绑定过长按事件\n       */\n      bindLongPressEventFlag() {\n        this.dom.setAttribute('stay-long-press', 'yes');\n      }\n\n      /**\n       * 手指按下时开启定时器，700 毫秒后触发回调函数\n       *\n       * @private\n       */\n      touchstart() {\n        this.removeTouchstart();\n        document.body.addEventListener('touchstart', this.handleTouchStartEvent);\n      }\n      removeTouchstart() {\n        document.body.removeEventListener('touchstart', this.handleTouchStartEvent);\n      }\n      handleTouchStartEvent(event) {\n        const self = this;\n        let target = event.changedTouches[0];\n        if (!target) {\n          return;\n        }\n        const targetPageX = target.pageX;\n        const targetPageY = target.pageY;\n        // console.log('this.dom------------',this.dom.getBoundingClientRect());\n        // console.log('targetPageX=',targetPageX,',targetPageY=',targetPageY,'this.domPageStartX=',self.getDomPageStartX(), 'this.domPageStartY=',self.getDomPageStartY() ,'this.domPageEndX=',self.getDomPageEndX(),',this.domPageEndY=',self.getDomPageEndY());\n        if (!isHidden(self.dom) && Math.abs(target.pageX - targetPageX) <= self.distance && targetPageX >= self.getDomPageStartX() && targetPageX <= self.getDomPageEndX() && targetPageY >= self.getDomPageStartY() && targetPageY <= self.getDomPageEndY()) {\n          event.stopPropagation();\n          event.preventDefault();\n          // console.log('start-------', new Date().getTime());\n          this.stayLongPressTimer = window.setTimeout(curTarget => {\n            try {\n              let classList = curTarget.target.classList;\n              // console.log('start----------event----',event);\n              if (!classList.contains('__stay-unselect')) {\n                classList.add('__stay-unselect');\n              }\n              if (!classList.contains('__stay-touch-action')) {\n                classList.add('__stay-touch-action');\n              }\n              if (typeof this.callback === 'function') {\n                this.callback();\n              } else {\n                console.error('callback is not a function!');\n              }\n              // console.log('end-------', new Date().getTime());\n              curTarget.target.addEventListener('contextmenu', handleContextmenuEvent);\n              // eslint-disable-next-line no-inner-declarations\n              function handleContextmenuEvent(e) {\n                e.preventDefault();\n                curTarget.target.removeEventListener('contextmenu', handleContextmenuEvent);\n              }\n\n              // this.removeEvent();\n            } catch (error) {} finally {\n              // this.removeEvent();\n            }\n          }, 600, target);\n          // console.log('end.end-------', new Date().getTime());\n        }\n\n        self.handleTargetTouchend(event.target);\n      }\n      handleTargetTouchend(target) {\n        const self = this;\n        if (!target) {\n          return;\n        }\n        target.addEventListener('touchend', handleTargetEvent);\n        function handleTargetEvent(event) {\n          self.touchEndCallback(event);\n          target.removeEventListener('touchend', handleTargetEvent);\n        }\n      }\n\n      /**\n       * 手指抬起时清除定时器，无论按住时间是否达到 600 毫秒的阈值\n       *\n       * @private\n       */\n      touchend() {\n        // console.log('handle------touchend---' );\n        this.removeTouchend();\n        document.body.addEventListener('touchend', this.touchEndCallback);\n      }\n      removeTouchend() {\n        document.body.removeEventListener('touchend', this.touchEndCallback);\n      }\n      touchEndCallback(event) {\n        const self = this;\n        // event.stopPropagation();\n        if (isHidden(this.dom)) {\n          return;\n        }\n        // console.log('touchEndCallback----event-------', event);\n        if (this.stayLongPressTimer != 0) {\n          try {\n            clearTimeout(this.stayLongPressTimer);\n            // 清除定时器\n            this.stayLongPressTimer = 0;\n          } catch (error) {}\n        }\n      }\n\n      /**\n       * 如果手指有移动，则取消所有事件，此时说明用户只是要移动而不是长按\n       */\n      touchmove() {\n        this.removeTouchmove();\n        document.body.addEventListener('touchmove', this.touchmoveCallback, {\n          passive: true\n        });\n      }\n      removeTouchmove() {\n        document.body.removeEventListener('touchmove', this.touchmoveCallback, {\n          passive: true\n        });\n      }\n      touchmoveCallback(event) {\n        const self = this;\n        if (isHidden(self.dom)) {\n          return;\n        }\n        window.clearTimeout(self.stayLongPressTimer); //清除定时器\n        self.stayLongPressTimer = 0;\n      }\n    }\n    function startFindVideoInfo(completed) {\n      observerVideo();\n      videoDoms = document.querySelectorAll('video');\n      // console.log('startFindVideoInfo---------videoDoms------',videoDoms)\n      // let flag = false;\n      let flag = videoDoms && videoDoms.length;\n      if (!flag) {\n        videoDoms = document.querySelectorAll('.post-content shreddit-player');\n        flag = videoDoms && videoDoms.length;\n      }\n      if (flag) {\n        // console.log('videoDoms---false-----',videoDoms)\n        parseVideoNodeList(videoDoms);\n      } else {\n        parseVideoNodeList();\n        // console.log('else-------else------',isContent)\n        if (completed) {\n          afterCompleteQueryVideo();\n        }\n      }\n    }\n    function afterCompleteQueryVideo() {\n      let flag = false;\n      for (let i = 1; i < 10; i++) {\n        let timer;\n        (function (i) {\n          timer = setTimeout(() => {\n            videoDoms = document.querySelectorAll('video');\n            // console.log('startFindVideoInfo------i-----',i, new Date().getTime());\n            flag = videoDoms && videoDoms.length;\n            if (flag) {\n              parseVideoNodeList(videoDoms);\n              // console.log('startFindVideoInfo---iiiiiii---break-----');\n              timerArr.forEach(timerItem => {\n                // console.log('clearTimer---------timerItem-----',timerItem);\n                clearTimeout(timerItem);\n              });\n            }\n          }, i * 200);\n        })(i);\n        if (flag) {\n          break;\n        }\n        timerArr.push(timer);\n      }\n    }\n    function observerVideo() {\n      // console.log('observerVideo-------------');\n      // 创建观察者对象  \n      const observer = new MutationObserver(function (mutations) {\n        // console.log('----------------MutationObserver---------------',mutations)\n        try {\n          mutations.forEach(function (mutation) {\n            // todo\n            host = window.location.host;\n            videoDoms = document.querySelectorAll('video');\n            const mutationDoms = mutation.target.querySelectorAll('video');\n            if (('VIDEO' === mutation.target.nodeName || mutationDoms && mutationDoms.length) && videoDoms && videoDoms.length) {\n              // console.log('mutation.videoDoms-----',videoDoms)\n              // throw new Error('endloop');\n              parseVideoNodeList(videoDoms);\n            }\n          });\n        } catch (e) {\n          // if(e.message === 'endloop') {\n          //   // 随后,你还可以停止观察  \n          //   // observer.disconnect(); \n          // }else{\n          //   throw e\n          // }\n        }\n      });\n      /**\n      * 配置观察选项: \n      * attributes: 设为 true 以观察受监视元素的属性值变更。\n      * characterData: 设为 true 以监视指定目标节点或子节点树中节点所包含的字符数据的变化。\n      * childList: 设为 true 以监视目标节点（如果 subtree 为 true，则包含子孙节点）添加或删除新的子节点。\n      * subtree: 目标节点所有后代节点的attributes、childList、characterData变化\n      */\n      const config = {\n        attributes: true,\n        childList: true,\n        characterData: true,\n        subtree: true\n      };\n      // 传入目标节点和观察选项  \n      observer.observe(document, config);\n    }\n    function parseVideoNodeList(videoDoms) {\n      // console.log('parseVideoNodeList-----------------start------------------', videoDoms)\n      if (videoDoms && videoDoms.length) {\n        let videoCount = videoDoms.length;\n        let nullCount = 0;\n        let videoNodeList = Array.from(videoDoms);\n        videoNodeList.forEach(item => {\n          if (!item || !(item instanceof HTMLElement)) {\n            nullCount++;\n            return;\n          }\n          let videoUuid = item.getAttribute('stay-sniffing');\n          if (!videoUuid) {\n            videoUuid = Utils.generateUuid();\n            item.setAttribute('stay-sniffing', videoUuid);\n          }\n          const videoDom = item;\n          let downloadUrl = item.getAttribute('src');\n          // console.log('parseVideoNodeList-------1-------downloadUrl=',downloadUrl);\n          if (!downloadUrl) {\n            // console.log('parseVideoNodeList--------2------downloadUrl=',downloadUrl);\n            let sourceDom = item.querySelector('source');\n            // console.log('parseVideoNodeList--------------sourceDom=',sourceDom);\n            if (sourceDom) {\n              item = sourceDom;\n              downloadUrl = sourceDom.getAttribute('src');\n              // console.log('parseVideoNodeList--------------sourceDom.downloadUrl=',downloadUrl);\n            }\n          }\n\n          if (!downloadUrl) {\n            nullCount++;\n            // console.log('parseVideoNodeList--------nullCount++');\n            return;\n          }\n          // todo fetch other scenarios\n          let videoInfo = handleVideoInfoParse(item, videoDom, videoUuid);\n          // console.log('parseVideoNodeList------videoInfo---------',videoInfo)\n          if (!videoInfo.downloadUrl) {\n            nullCount++;\n            return;\n          }\n          // console.log('parseVideoNodeList------videoList---------',videoList)\n        });\n\n        if (nullCount == videoCount) {\n          setTimeoutParseVideoInfoByWindow();\n        }\n      } else {\n        // console.log('start------parseVideoInfoByWindow--------');\n        setTimeoutParseVideoInfoByWindow();\n      }\n    }\n\n    /**\n     * check video if exist\n     * @param {Object} videoDom  视频截图 \n     * @param {Object} posDom    添加长按事件的dom对象 \n     * @param {Object} videoInfo \n     */\n    async function checkVideoExist(videoDom, posDom, videoInfo) {\n      let downloadUrl = videoInfo.downloadUrl;\n      if (!videoInfo.videoKey && !videoInfo.videoUuid) {\n        return;\n      }\n      if (!Utils.isURL(downloadUrl)) {\n        videoInfo.downloadUrl = hostUrl;\n      }\n      if (videoInfo.videoKey && !videoInfo.videoUuid) {\n        videoInfo.videoUuid = videoInfo.videoKey;\n      }\n      videoInfo.title = videoInfo.title ? videoInfo.title.replace(/\\//g, '|') : '';\n      const qualityList = videoInfo.qualityList;\n      // videoInfo.qualityList是否需要解密，如需解密记录下来, 等handleDecodeSignatureAndPush来解密\n      if (videoInfo.shouldDecode) {\n        videoInfo.qualityList = [];\n        shouldDecodeQuality[videoInfo.videoUuid] = qualityList;\n      }\n      // videoInfo.downloadUrl = Utils.isChinese(videoInfo.downloadUrl) ? window.encodeURI(videoInfo.downloadUrl) : videoInfo.downloadUrl;\n\n      if (!isStayAround && !isLoadingAround) {\n        isLoadingAround = true;\n        isStayAround = await getStayAround();\n        isLoadingAround = false;\n      }\n      if ('b' == isStayAround) {\n        if (hostUrl.indexOf('youtube.com') > -1) {\n          videoInfo.downloadUrl = videoInfo.hostUrl;\n          videoInfo.audioUrl = '';\n          if (videoInfo.qualityList && videoInfo.qualityList.length) {\n            videoInfo.qualityList.forEach(item => {\n              item.downloadUrl = videoInfo.hostUrl;\n              item.audioUrl = '';\n              return item;\n            });\n          }\n        }\n      }\n      try {\n        addLongPress(videoDom, posDom, videoInfo);\n      } catch (error) {\n        console.log('addLongPress----', error);\n      }\n      if (videoIdSet.size && (videoIdSet.has(videoInfo.videoUuid) || videoIdSet.has(videoInfo.videoKey))) {\n        // console.log('parseVideoNodeList----------has exist, and modify-------',videoInfo, videoList);\n        videoList.forEach(item => {\n          if (item.videoUuid == videoInfo.videoUuid || item.videoUuid == videoInfo.videoKey) {\n            item.downloadUrl = videoInfo.downloadUrl;\n            item.audioUrl = videoInfo.audioUrl ? videoInfo.audioUrl : '';\n            item.poster = videoInfo.poster ? videoInfo.poster : '';\n            item.title = videoInfo.title;\n            item.hostUrl = videoInfo.hostUrl;\n            item.qualityList = videoInfo.qualityList && videoInfo.qualityList.length ? videoInfo.qualityList : [];\n            item.type = videoInfo.type ? videoInfo.type : '';\n            item.videoUuid = videoInfo.videoUuid;\n            item.videoKey = videoInfo.videoKey;\n            // console.log('checkVideoExist----------item===',item);\n          }\n\n          return item;\n        });\n        // console.log('parseVideoNodeList------videoList---modify------',videoList)\n      } else {\n        // console.log('parseVideoNodeList----------has not, and push-------',videoInfo);\n        if (videoInfo.videoUuid) {\n          videoIdSet.add(videoInfo.videoUuid);\n        }\n        if (videoInfo.videoKey) {\n          videoIdSet.add(videoInfo.videoKey);\n        }\n        // console.log('checkVideoExist----------',videoInfo, videoIdSet);\n        videoList.push(videoInfo);\n      }\n      pushVideoListToTransfer();\n    }\n    function getTopmostIframe() {\n      let currentWindow = window;\n      let parentWindow = window.parent;\n      while (parentWindow !== currentWindow) {\n        currentWindow = parentWindow;\n        parentWindow = parentWindow.parent;\n      }\n      return parentWindow.frameElement;\n    }\n    function checkDecodeFunIsValid() {\n      if (!decodeSignatureCipher || !Object.keys(decodeSignatureCipher).length) {\n        return false;\n      }\n      if (!ytBaseJSUuid) {\n        return false;\n      }\n      if (!decodeSignatureCipher.decodeFunStr) {\n        return false;\n      }\n      if (ytBaseJSUuid != decodeSignatureCipher.pathUuid) {\n        return false;\n      }\n      return true;\n    }\n    function checkDecodeWithSpeedFunIsValid() {\n      let isValid = checkDecodeFunIsValid();\n      if (isValid) {\n        if (!decodeSignatureCipher.decodeSpeedFunStr) {\n          isValid = false;\n        } else {\n          isValid = true;\n        }\n      }\n      return isValid;\n    }\n\n    /**\n     * 对videoList中qualityList的signature进行解密\n     */\n    function handleDecodeSignatureAndPush() {\n      if (!Object.keys(shouldDecodeQuality).length) {\n        return;\n      }\n      if (!checkDecodeFunIsValid()) {\n        return;\n      }\n      Object.keys(shouldDecodeQuality).forEach((videoUuid, qualityList) => {\n        if (qualityList.length) {\n          qualityList.forEach(quality => {\n            if (quality.downloadUrl && !Utils.isURL(quality.downloadUrl)) {\n              quality.downloadUrl = decodeYoutubeSourceUrl(quality.downloadUrl);\n            }\n            if (quality.audioUrl && !Utils.isURL(quality.audioUrl)) {\n              quality.audioUrl = decodeYoutubeSourceUrl(quality.audioUrl);\n            }\n            return quality;\n          });\n          let newQualityList = qualityList.filter(item => {\n            if (item.downloadUrl) {\n              return item;\n            }\n          });\n          videoList.forEach(videoItem => {\n            if (videoItem.videoUuid == videoUuid) {\n              videoItem.qualityList = newQualityList;\n              return videoItem;\n            }\n          });\n          delete shouldDecodeQuality[videoUuid];\n        }\n      });\n      pushVideoListToTransfer();\n    }\n\n    /**\n     * push videoList to transfer\n     */\n    function pushVideoListToTransfer() {\n      const videoInfoListMd5 = Utils.hexMD5(JSON.stringify(videoList));\n      if (videoListMd5 && videoListMd5 == videoInfoListMd5) {\n        return;\n      }\n      // console.log('pushVideoListToTransfer------',videoList);\n      videoListMd5 = videoInfoListMd5;\n      if (isContent) {\n        // console.log('isContent----------------------');\n        let message = {\n          from: 'sniffer',\n          operate: 'VIDEO_INFO_PUSH',\n          videoInfoList: videoList\n        };\n        browser.runtime.sendMessage(message, response => {});\n      } else {\n        window.postMessage({\n          name: 'VIDEO_INFO_CAPTURE',\n          videoList: videoList\n        });\n      }\n    }\n\n    /**\n     * 添加长按事件\n     * @param {Object} videoDom   视频video dom对象\n     * @param {Object} posDom     视频区域\n     * @param {Object} videoInfo  视频信息\n     * @returns \n     */\n    async function addLongPress(videoDom, posDom, videoInfo) {\n      // console.log('----addLongPress-----start------');\n      if (!posDom) {\n        // console.log('----posDomposDomposDomposDomposDom-----null',posDom);\n        return;\n      }\n      if (!Utils.isMobile()) {\n        return;\n      }\n      if (isLoadingLongPressStatus) {\n        return;\n      }\n      if (!longPressStatus) {\n        isLoadingLongPressStatus = true;\n        longPressStatus = await getLongPressStatus();\n        isLoadingLongPressStatus = false;\n      }\n      if (!longPressStatus || longPressStatus && longPressStatus == 'off') {\n        return;\n      }\n\n      // console.log('----getStayAround-----start------');\n      // if(!isStayAround){\n      //   isLoadingAround = true;\n      //   isStayAround = await getStayAround();\n      //   isLoadingAround = false;\n      // }\n      // // console.log('----isStayAround-----',isStayAround);\n      // if(isStayAround!='a'){\n      //   return;\n      // }\n\n      // console.log('addLongPress-------------',videoDom, posDom, videoInfo)\n      let stayLongPress = posDom.getAttribute('stay-long-press');\n      if (stayLongPress && stayLongPress == 'yes') {\n        // console.log('addLongPress already bind stay long press------1------');\n        return;\n      }\n      const sinfferUnselectDom = document.querySelector('#__style_sinffer_unselect');\n      if (!sinfferUnselectDom) {\n        let sinfferUnselect = `<style id=\"__style_sinffer_unselect\">\n          .__stay-unselect, video{\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            -webkit-touch-callout: none;\n          }\n          .__stay-touch-action{\n            touch-action: auto!important;\n          }\n        </style>`;\n        document.body.append(Utils.parseToDOM(sinfferUnselect));\n      }\n      posDom.classList.add('__stay-unselect');\n      posDom.classList.add('__stay-touch-action');\n      const hostUrl = videoInfo.hostUrl;\n      // console.log('addLongPress--------hostUrl=====',hostUrl)\n      if (hostUrl.indexOf('youtube.com') > -1) {\n        const playerOverlay = document.querySelector('#player-control-overlay');\n        if (playerOverlay) {\n          if (!playerOverlay.classList.contains('__stay-touch-action')) {\n            playerOverlay.classList.add('__stay-touch-action');\n          }\n          if (!playerOverlay.classList.contains('__stay-unselect')) {\n            playerOverlay.classList.add('__stay-unselect');\n          }\n        }\n        const playerBg = document.querySelector('#player-control-overlay .player-controls-background-container .player-controls-background');\n        if (playerBg) {\n          if (!playerBg.classList.contains('__stay-touch-action')) {\n            playerBg.classList.add('__stay-touch-action');\n          }\n          if (!playerBg.classList.contains('__stay-unselect')) {\n            playerBg.classList.add('__stay-unselect');\n          }\n        }\n        // console.log('addLongPress--------LongPress=====',hostUrl)\n        new LongPress(posDom, () => {\n          addSinfferModalByPosDom(videoDom, posDom, videoInfo);\n        });\n      } else if (hostUrl.indexOf('mobile.twitter.com') > -1) {} else if (hostUrl.indexOf('pornhub.com') > -1) {\n        if (posDom) {\n          if (!posDom.classList.contains('__stay-touch-action')) {\n            posDom.classList.add('__stay-touch-action');\n          }\n          if (!posDom.classList.contains('__stay-unselect')) {\n            posDom.classList.add('__stay-unselect');\n          }\n        }\n        new LongPress(posDom, () => {\n          addSinfferModalByPosDom(videoDom, posDom, videoInfo);\n        });\n      } else if (hostUrl.indexOf('muiplayer.js.org') > -1) {\n        let posterDom = document.querySelector('#mplayer-media-wrapper');\n        if (!posterDom) {\n          posterDom = document.querySelector('#mplayer-cover');\n        }\n        if (posterDom) {\n          // posDom = posterDom;\n          new LongPress(posterDom, () => {\n            addSinfferModalByPosDom(videoDom, posterDom, videoInfo);\n          });\n        }\n      }\n      new DocumentLongPress(posDom, () => {\n        addSinfferModalByPosDom(videoDom, posDom, videoInfo);\n      });\n    }\n    function getStayAround() {\n      return new Promise((resolve, reject) => {\n        if (isContent) {\n          browser.runtime.sendMessage({\n            from: 'sniffer',\n            operate: 'GET_STAY_AROUND'\n          }, response => {\n            if (response.body && JSON.stringify(response.body) != '{}') {\n              resolve(response.body);\n            }\n          });\n        } else {\n          const pid = Math.random().toString(36).substring(2, 9);\n          const callback = e => {\n            if (e.data.pid !== pid || e.data.name !== 'GET_STAY_AROUND_RESP') return;\n            let isStayPro = e.data ? e.data.response ? e.data.response.body : 'b' : 'b';\n            resolve(isStayPro);\n            window.removeEventListener('message', callback);\n          };\n          window.postMessage({\n            id: pid,\n            pid: pid,\n            name: 'GET_STAY_AROUND'\n          });\n          window.addEventListener('message', callback);\n        }\n      });\n    }\n    function getLongPressStatus() {\n      return new Promise((resolve, reject) => {\n        if (isContent) {\n          // console.log('getLongPressStatus-----true');\n          browser.runtime.sendMessage({\n            from: 'popup',\n            operate: 'getLongPressStatus'\n          }, response => {\n            // console.log('getLongPressStatus---------',response)\n            let longPressStatusRes = response && response.longPressStatus ? response.longPressStatus : 'on';\n            resolve(longPressStatusRes);\n          });\n        } else {\n          // console.log('getLongPressStatus-----false');\n          const pid = Math.random().toString(36).substring(2, 9);\n          const callback = e => {\n            if (e.data.pid !== pid || e.data.name !== 'GET_LONG_PRESS_STATUS_RESP') return;\n            // console.log('getLongPressStatus---------',e.data.longPressStatusRes)\n            resolve(e.data.longPressStatusRes);\n            window.removeEventListener('message', callback);\n          };\n          window.postMessage({\n            id: pid,\n            pid: pid,\n            name: 'GET_LONG_PRESS_STATUS'\n          });\n          window.addEventListener('message', callback);\n        }\n      });\n    }\n\n    /**\n     * 添加长按事件\n     * @param {Object} videoDom   视频video dom对象   用于截图,视频播放/暂停判断\n     * @param {Object} posDom     视频区域            用于绑定长按事件\n     * @param {Object} videoInfo  视频信息            用于popup信息展示\n     * @returns \n     */\n    function addSinfferModalByPosDom(videoDom, posDom, videoInfo) {\n      const posDomReact = posDom.getBoundingClientRect();\n      let top = posDomReact.y;\n      let left = posDomReact.x;\n      if (posDom.tagName && 'VIDEO' == posDom.tagName) {\n        // console.log('videoDom.parentNode====',videoDom.parentNode)\n        top = posDom.parentNode.getBoundingClientRect().top;\n        left = posDom.parentNode.getBoundingClientRect().left;\n      }\n      left = 10;\n      let position = {\n        width: posDomReact.width,\n        height: posDomReact.height,\n        x: left,\n        y: top\n      };\n      if (window === window.top) {\n        // 当前页面不在 <iframe> 中\n        addSinfferModal(videoDom, position, videoInfo);\n      } else {\n        // 当前页面在 <iframe> 中\n        // 向父页面发送消息，\n        // console.log('postMessage----to----parent-------');\n        const posDomReact = posDom.getBoundingClientRect();\n        let videoReact = {\n          x: posDomReact.x,\n          y: posDomReact.y,\n          width: posDomReact.width,\n          height: posDomReact.height\n        };\n        const pid = Math.random().toString(36).substring(2, 9);\n        window.postMessage({\n          pid: pid,\n          name: 'PUSH_VIDEO_INFO_TO_PARENT',\n          videoInfo,\n          videoReact\n        }, '*');\n      }\n    }\n\n    /**\n     * 添加长按事件\n     * @param {Object} videoDom   视频video dom对象   用于截图,视频播放/暂停判断\n     * @param {Object} posDomReact     视频区域            用于绑定长按事件\n     * @param {Object} videoInfo  视频信息            用于popup信息展示\n     * @returns \n     */\n    function addSinfferModal(videoDom, posDomReact, videoInfo) {\n      let vWidth = posDomReact.width;\n      let vHeight = posDomReact.height;\n      let top = posDomReact.y;\n      let left = posDomReact.x;\n      // console.log('videoDom.tagName====',videoDom, posDom)\n      let bodyClientHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n      let bodyClientWidth = window.innerWidth || document.documentElement.innerWidth || document.body.innerWidth;\n      // 算出16:9的宽高\n      let posterWidth = bodyClientWidth;\n      let posterHeight = Utils.div(Utils.mul(posterWidth, 9), 16);\n      if (vHeight < Utils.div(bodyClientHeight, 2)) {\n        posterHeight = vHeight;\n      }\n      // console.log('vWidth:',vWidth,',vHeight:',vHeight, ',posterHeight:', posterHeight, ',top:',top);\n\n      let modalDom = document.querySelector('#__stay_sinffer_modal');\n      if (!modalDom) {\n        modalDom = createModal();\n      }\n      modalDom.style.visibility = 'visible';\n      const popupDom = document.querySelector('#__stay_sinffer_modal ._stay-sinffer-popup');\n      const modalContent = document.querySelector('#__stay_sinffer_modal .__stay-sinffer-content');\n      modalContent.classList.add('__stay-trans');\n      let visibleTimer = setTimeout(function () {\n        modalDom.classList.add('__stay-show-modal');\n        popupDom.style.visibility = 'visible';\n        clearTimeout(visibleTimer);\n        visibleTimer = 0;\n      }, 400);\n\n      // window.open(downloadUrl);\n      function createModal() {\n        let list = [{\n          title: videoInfo.title,\n          downloadUrl: videoInfo.downloadUrl,\n          poster: videoInfo.poster,\n          hostUrl: Utils.getHostname(videoInfo.hostUrl),\n          uuid: ''\n        }];\n        let downloadUrl = 'stay://x-callback-url/snifferVideo?list=' + encodeURIComponent(JSON.stringify(list));\n        let downloadBg = 'background-color: rgb(247,247,247);';\n        let downloadColor = 'rgb(54, 54, 57)';\n        let lineColor = '#E0E0E0';\n        let bg = 'background-color: rgba(0, 0, 0, 0.4);';\n        let posterbg = 'background-color: rgba(255, 255, 255, 1);';\n        let fontColor = 'color:#000000;';\n        let downloadIcon = isContent ? browser.runtime.getURL('img/popup-download-light.png') : 'https://res.stayfork.app/scripts/8DF5C8391ED58046174D714911AD015E/icon.png';\n        let hdLine = '#F7B500';\n        let hdBg = '#000';\n        let titleIcon = 'https://res.stayfork.app/scripts/22BF8566F3522614F4F3A15EBC87378E/icon.png';\n        let airplayIcon = 'https://res.stayfork.app/scripts/D660FA085601F608C3BE6F9CDB44DFCC/icon.png';\n        let pipIcon = 'https://res.stayfork.app/scripts/3F8E6C0D8F4FDD3767A7F0B151A72E94/icon.png';\n        if (Utils.isDark()) {\n          // bg = 'background-color: rgba(0, 0, 0, 0.4);';\n          posterbg = 'background-color: rgba(0, 0, 0, 1);';\n          fontColor = 'color:#DCDCDC;';\n          downloadBg = 'background-color: rgb(54, 54, 57);';\n          downloadIcon = isContent ? browser.runtime.getURL('img/popup-download-dark.png') : 'https://res.stayfork.app/scripts/CFFCD2186E164262E0E776A545327605/icon.png';\n          // downloadBg = 'background-color: rgba(0, 0, 0, 0.8);';\n          downloadColor = 'rgb(247,247,247)';\n          lineColor = '#37372F';\n          hdBg = 'rgb(247,247,247)';\n          titleIcon = 'https://res.stayfork.app/scripts/102BDC80B489A31FCA2F4E3A3B7CCE74/icon.png';\n          airplayIcon = 'https://res.stayfork.app/scripts/F6E653EE027B789962CEE7E6FB2CF65F/icon.png';\n          pipIcon = 'https://res.stayfork.app/scripts/DC8756A3CE2F2752ED738E5C1A71FCFF/icon.png';\n        }\n        let countH = 1;\n        let downloadCon = `<div stay-download=\"${downloadUrl}\" class=\"_stay-quality-item \">${videoInfo.type == 'ad' ? 'Download Ad' : 'Download'}</div>`;\n        let qualityList = videoInfo.qualityList;\n        if (qualityList && qualityList.length) {\n          // checkQualityList Decode\n          let qualityItem = '';\n          countH = 0;\n          qualityList.forEach(item => {\n            let downloadUrl = item.downloadUrl;\n            let audioUrl = item.audioUrl;\n            if (videoInfo.shouldDecode) {\n              if (!Utils.isURL(downloadUrl)) {\n                downloadUrl = decodeYoutubeSourceUrl(downloadUrl);\n                if (!downloadUrl) {\n                  return;\n                }\n              }\n              if (audioUrl && !Utils.isURL(audioUrl)) {\n                audioUrl = decodeYoutubeSourceUrl(audioUrl);\n                if (!audioUrl) {\n                  return;\n                }\n              }\n            }\n            list = [{\n              title: videoInfo.title,\n              downloadUrl,\n              poster: videoInfo.poster,\n              hostUrl: Utils.getHostname(videoInfo.hostUrl),\n              uuid: '',\n              protect: item.protect ? item.protect : false,\n              audioUrl,\n              qualityLabel: item.qualityLabel\n            }];\n            downloadUrl = 'stay://x-callback-url/snifferVideo?list=' + encodeURIComponent(JSON.stringify(list));\n            let quality = item.qualityLabel;\n            let heightQualityLabel = '';\n            if (quality) {\n              try {\n                quality = quality.replace(/[^0-9]/g, '');\n                if (Number(quality) > 780) {\n                  heightQualityLabel = '<span class=\"__stay-hd\">HD</span>';\n                }\n              } catch (error) {}\n            }\n            qualityItem = qualityItem + `<div stay-download=\"${downloadUrl}\" class=\"_stay-quality-item\">${item.qualityLabel}${heightQualityLabel}</div>`;\n            countH = countH + 1;\n          });\n          downloadCon = qualityItem;\n        }\n\n        // 动画开始位置\n        let transPos = top;\n        // 计算高度\n        let vTop = top;\n        if (top < 0) {\n          vTop = 0;\n          if (bodyClientHeight <= vHeight) {\n            vTop = Utils.div(Utils.sub(bodyClientHeight, posterHeight), 2);\n          }\n        } else if (top == 0) {\n          // 处理全屏的top\n          if (bodyClientHeight <= vHeight) {\n            vTop = Utils.div(Utils.sub(bodyClientHeight, posterHeight), 2);\n          }\n        } else {\n          let paddingHeight = Utils.add(4, 36);\n          let modalContentHeight = Utils.add(Utils.add(posterHeight, paddingHeight), Utils.add(Utils.mul(countH, 38), 36));\n          // modalContentHeight = Utils.add(modalContentHeight, 38);\n          // 内容+定位的top 超出屏幕高度, 则可展示内容的top\n          if (top > Utils.sub(bodyClientHeight, modalContentHeight)) {\n            vTop = Utils.sub(bodyClientHeight, modalContentHeight);\n          }\n        }\n        let borderRadius = '';\n        let videoImg = isContent ? browser.runtime.getURL('img/video-default.png') : 'https://res.stayfork.app/scripts/BB8CD00276006365956C32A6556696AD/icon.png'; //browser.runtime.getURL('img/video-default.png');\n        let posterCon = '<div class=\"__stay-poster-box\" ><div class=\"__stay-default-poster\"><img style=\"max-width:100%;max-height:100%;\" src=\"' + videoImg + '\"/></div><span style=\"font-size:13px;padding-top: 20px; -webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;' + fontColor + '\">' + Utils.getHostname(videoInfo.hostUrl) + '</span></div>';\n        if (videoInfo.poster) {\n          borderRadius = 'border-radius: 15px;';\n          // posterCon = '<img style=\"max-width:100%; max-height: 100%; box-shadow: 0 0px 10px rgba(54,54,57,0.1);'+borderRadius+'\" src=\"'+videoInfo.poster+'\"/>'\n          posterCon = `<div class=\"__stay-video-poster\" style=\"background:url('${videoInfo.poster}') 50% 50% no-repeat;background-size: cover;\"></div>`;\n        }\n        // console.log('videoDom----1--',videoDom);\n        // const canvas = captureVideoAndDrawing(videoDom, posterWidth, posterHeight);\n\n        // console.log('posterCon----3--',posterCon);\n\n        let sinfferStyle = `<style id=\"__style_sinffer_style\">\n          :root {\n            --s-modal-bg: rgba(0, 0, 0, 0.4);\n            --s-dl-bg: rgb(247,247,247);\n            --s-posterbg: rgba(255, 255, 255, 1);\n            --s-000-bg: rgba(0,0,0,0);\n          }\n          @media (prefers-color-scheme: dark) {\n            :root {\n              --s-modal-bg: rgba(0, 0, 0, 0.4);\n              --s-dl-bg: rgb(54, 54, 57);\n              --s-posterbg: rgba(0, 0, 0, 1);\n            }\n          }\n          .__stay-modal-box{\n            position: fixed; \n            z-index: 2147483647; \n            width: 100%; \n            height: 100%; \n            text-align: center; \n            top: 0px;\n            -webkit-overflow-scrolling: touch;\n            margin: 0 auto;\n            transition: all 0.6s;\n            box-sizing: border-box;\n            visibility: hidden;\n            font-family: \"HelveticaNeue-Light\", \"Helvetica Neue Light\", \"Helvetica Neue\",Helvetica, Arial, \"Lucida Grande\", sans-serif;\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n          }\n          .__stay-show-modal{\n            background-color:var(--s-modal-bg)!important;\n            -webkit-backdrop-filter: blur(10px); \n          }\n          .__stay-sinffer-content{\n            background-color:var(--s-000-bg)!important;\n            width:100%;\n            position: absolute;\n            left: 0;\n            -webkit-transform: translate3d(0, ${transPos}px, 0);\n            transform: translate3d(0, ${transPos}px, 0);\n            will-change: transform;\n            -webkit-transition: -webkit-transform .4s cubic-bezier(0,0,.25,1) 80ms;\n            transition: transform .4s cubic-bezier(0,0,.25,1) 80ms;\n            box-sizing: border-box;\n          }\n          .__stay-trans{\n            -webkit-transform: translate3d(0,${vTop}px,0);\n            transform: translate3d(0,${vTop}px,0);\n          }\n          .__stay-content{\n            background-color:var(--s-000-bg)!important;\n            width:100%;\n            position: relative;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            justify-items: center;\n            align-items: center;\n          }\n          ._stay-sinffer-popup{\n            width:230px;\n            padding-top: 10px;\n            padding-bottom: 16px;\n            box-sizing: border-box;\n            border-radius:15px;\n            background-color: var(--s-dl-bg);\n            position: relative;\n            margin: 16px auto 0 auto;\n            z-index:999999;\n            visibility: hidden;\n            animation: fadein .5s;\n          }\n          .__stay-sinffer-poster{\n            width: 100%;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            height: ${posterHeight}px;\n            padding: 0 ${left}px;\n            margin:0 auto;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            justify-items: center;\n            align-items: center;\n            box-sizing: border-box;\n            box-shadow: 0 0px 10px rgba(54,54,57,0.1);\n            transition: All 0.4s ease-in-out;\n            -webkit-transition: All 0.4s ease-in-out;\n            -moz-transition: All 0.4s ease-in-out;\n            -o-transition: All 0.4s ease-in-out;\n            animation-name: zoom;\n            animation-duration: 0.6s;\n          }\n          .__stay-video-poster{\n            // object-fit: contain;\n            // object-position: center;\n            width:100%;\n            height:100%;\n            background-position: center;\n            background-repeat: no-repeat;\n            border-radius: 15px;\n           \n          }\n          .__stay-poster-box{\n            width:100%;\n            height:100%;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            background-color: var(--s-posterbg);\n            border-radius: 10px;\n            box-shadow: 0 0px 10px rgba(54,54,57,0.1);\n          }\n          .__stay-default-poster{\n            width:80px;\n            height:60px;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            justify-items: center;\n            align-items: center;\n            box-sizing: border-box;\n          }\n          ._stay-sinffer-title{\n            padding-left: 44px;\n            padding-right: 15px;\n            width: 100%;\n            height:36px;\n            line-height: 18px;\n            word-break:break-all;\n            word-wrap:break-word;\n            color: ${downloadColor};\n            -webkit-box-orient: vertical;\n            -webkit-user-select: none;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            text-align: left;\n            margin-bottom: 10px;\n            box-sizing: border-box;\n            font-size: 16px;\n            position: relative;\n          }\n          ._stay-sinffer-title::before{\n            content: '';\n            background: url(${titleIcon}) 50% 50% no-repeat;\n            background-size: 18px;\n            width: 18px;\n            height: 18px;\n            position: absolute;\n            left: 15px;\n            top: 50%;\n            transform: translate(0, -50%);\n            }\n          }\n          ._stay-sinffer-title span{\n            font-weight: 600;\n            color: ${fontColor}\n          }\n          ._stay-sinffer-tool{\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 9px 15px;\n            height: 38px;\n            box-sizing: border-box;\n          }\n          ._stay-sinffer-tool .__tool{\n            width: 50%;\n            height: 100%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            color: ${fontColor}\n          }\n          ._stay-sinffer-tool .__tool img{\n            width: 20px;\n          }\n          ._stay-sinffer-tool .__tool span{\n            padding-left: 10px;\n          }\n          ._stay-sinffer-tool .__airplay{\n            \n            border-right: 0.5px solid ${lineColor};\n          }\n          ._stay-sinffer-tool .__pip{\n\n          }\n          ._stay-sinffer-download{\n            width:100%;\n            box-sizing: border-box;\n            display: flex;\n            justify-content: flex-start;\n            flex-direction: column;\n            align-items: center;\n          }\n          ._stay-quality-item{\n            height: 38px;\n            box-sizing: border-box;\n            width:100%;\n            padding-right: 20px;\n            position: relative;\n            color: ${downloadColor};\n            text-align:left;\n            font-size: 16px;\n            border-top: 0.5px solid ${lineColor};\n            padding: 0 15px;\n            display: flex;\n            align-items: center;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n          }\n          ._stay-quality-item .__stay-hd{\n            border: 1px solid ${hdLine};\n            background: ${hdBg};\n            color: ${hdLine};\n            font-size: 12px;\n            font-weight: 600;\n            display: inline-block;\n            padding: 0px 4px;\n            border-radius: 4px;\n            margin-left: 10px;\n            align-items: center;\n          }\n          ._stay-quality-item::after{\n            content:\"\";\n            background: url(${downloadIcon}) no-repeat 50% 50%;  \n            background-size: 14px;\n            position: absolute;\n            right: 15px;\n            top: 50%;\n            transform: translate(0, -52%);\n            width: 14px;\n            height: 20px;\n          }\n          @keyframes zoom {\n            0% {transform: scale(1.05)}\n            100% {transform: scale(1);${borderRadius}}\n          }\n          @keyframes fadein {\n            0% {\n              transform: translate(0, -100%);\n            }\n            100% {\n              transform: none;\n            }\n          }\n          @keyframes fadeout {\n              0% {\n                transform: translate(0,100%);\n              }\n              100% {\n                  transform: none;\n              }\n          }\n        </style>`;\n        let sinfferModal = ['<div id=\"__stay_sinffer_modal\" class=\"__stay-modal-box\" >', '<div class=\"__stay-sinffer-content\">', '<div class=\"__stay-content\">', '<div class=\"__stay-sinffer-poster\">' + posterCon + '</div>', '<div class=\"_stay-sinffer-popup\">', '<div class=\"_stay-sinffer-title\">' + videoInfo.title + '</div>',\n        // `<div class=\"_stay-sinffer-tool\"><div id=\"__stay_airplay\" class=\"__tool __airplay\"><img src=\"${airplayIcon}\" /><span>Airplay</span></div><div id=\"__stay_pip\" title=\"Picture-in-Picture\" class=\"__tool __pip\"><img src=\"${pipIcon}\" /><span>PIP</span></div></div>`,\n        '<div class=\"_stay-sinffer-download\">', downloadCon, '</div>', '</div>', '</div>', '</div>', '</div>'];\n        document.body.append(Utils.parseToDOM(sinfferStyle));\n        document.body.append(Utils.parseToDOM(sinfferModal.join('')));\n        // document.querySelector\n\n        return document.querySelector('#__stay_sinffer_modal');\n      }\n      modalDom.addEventListener('touchstart', handleModalEvent);\n      function handleModalEvent(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        // modalDom.style.display = 'none';\n        // removeModalMouseMoveEvent();\n        modalDom.classList.remove('__stay-show-modal');\n        popupDom.style.animation = 'fadeout .5s;';\n        let removeTimer = setTimeout(() => {\n          if (modalDom) {\n            modalDom.removeEventListener('touchstart', handleModalEvent);\n            document.body.removeChild(modalDom);\n          }\n          document.body.removeChild(document.querySelector('#__style_sinffer_style'));\n          clearTimeout(removeTimer);\n          removeTimer = 0;\n        }, 200);\n      }\n      const downloadItems = document.querySelectorAll('#__stay_sinffer_modal ._stay-quality-item');\n      if (downloadItems && downloadItems.length) {\n        for (let i = 0; i < downloadItems.length; i++) {\n          (function (n) {\n            downloadItems[i].addEventListener('touchstart', handleDownloadItemEvent);\n            function handleDownloadItemEvent(e) {\n              let openUrl = e.target.getAttribute('stay-download');\n              let targetGun = document.createElement('a');\n              targetGun.href = openUrl;\n              targetGun.click();\n              downloadItems[i].removeEventListener('touchstart', handleDownloadItemEvent);\n            }\n          })(i);\n        }\n      }\n      async function openPiP(video) {\n        try {\n          const pipWindow = await video.requestPictureInPicture();\n          // 进入画中画模式...\n        } catch (e) {\n          console.error(e); // 处理异常\n        }\n      }\n\n      // const pip_button_act = (isPip) => {\n      //   if(isPip){\n      //     document.querySelector('#__stay_pip img').style.opacity = 0.2;\n      //   }else{\n      //     document.querySelector('#__stay_pip img').style.opacity = 1;\n      //   }\n      // }\n\n      // const enterpictureinpicture = e => pip_button_act(true);\n      // const leavepictureinpicture = e => pip_button_act(false);\n      // const webkitpresentationmodechanged = event => {\n      //   event.target.webkitPresentationMode == 'picture-in-picture'\n      //     ? (pip_button_act(true), event.stopImmediatePropagation())\n      //     : pip_button_act(false);\n      // }\n\n      // const pip_init = video => {\n      //   if (!video || video.nodeName != 'VIDEO' || !video.hasAttribute('src')) return;\n      //   if (video.webkitPresentationMode === undefined) {\n      //     video.addEventListener('enterpictureinpicture', enterpictureinpicture);\n      //     video.addEventListener('leavepictureinpicture', leavepictureinpicture);\n      //   } else {\n      //     video.addEventListener('webkitpresentationmodechanged', webkitpresentationmodechanged, true);\n      //   }\n      // }\n\n      // pip_init(videoDom);\n\n      // document.querySelector('#__stay_pip').addEventListener('touchstart', event => {\n      //   // console.log('touch--pip--------',e);\n      //   // e.stopPropagation();\n      //   if (videoDom.webkitPresentationMode === undefined) {\n      //     if (document.pictureInPictureElement) {\n      //       document.exitPictureInPicture();\n      //     } else {\n      //       videoDom.requestPictureInPicture();\n      //     }\n      //   } else {\n      //     if (videoDom.webkitPresentationMode != 'inline') {\n      //       videoDom.webkitSetPresentationMode('inline');\n      //     } else {\n      //       videoDom.webkitSetPresentationMode('picture-in-picture');\n      //     }\n      //   }\n      //   event.preventDefault();\n      //   event.stopImmediatePropagation();\n      // })\n    }\n\n    /**\n     * \n     * @param {object} videoDom \n     * @param {number} width \n     * @param {number} height \n     */\n    function captureVideoAndDrawing(videoDom, width, height) {\n      // console.log('captureVideoAndDrawing-------',videoDom.tagName);\n      if (!videoDom || 'VIDEO' != videoDom.tagName) {\n        return null;\n      }\n      videoDom.setAttribute('autoplay', 'autoplay');\n      videoDom.setAttribute('crossOrigin', 'anonymous'); //添加srossOrigin属性，解决跨域问题\n      const canvas = document.createElement('canvas');\n      // canvas.setAttribute('crossOrigin', 'anonymous');\n      canvas.width = width;\n      canvas.height = height;\n      const ctx = canvas.getContext('2d');\n\n      // draw the current video frame on the canvas\n      ctx.drawImage(videoDom, 0, 0, canvas.width, canvas.height);\n      // console.log(canvas)\n\n      if (canvas) {\n        // let dataURL = canvas.toDataURL('image/png');  //将图片转成base64格式\n        // console.log('----dataURL-',dataURL);\n        // let newImg = document.createElement('img');\n        // newImg.src = dataURL;\n        // document.body.appendChild(newImg);\n\n        // canvas.toBlob(function(blob) {\n        //   let newImg = document.createElement('img');\n        //   console.log('toBlob--1----');\n        //   let url = window.URL.createObjectURL(blob);\n        //   console.log('toBlob--2----');\n        //   newImg.onload = function() {\n        //     window.URL.revokeObjectURL(url);\n        //   };\n        //   newImg.src = url;\n        //   // posterCon = newImg.toString();\n        //   console.log('toBlob--3----',newImg);\n        //   document.body.appendChild(newImg);\n        // });\n      }\n\n      // let dataURL = window.URL.createObjectURL(canvas.toBlob());\n      // let dataURL = canvas.toDataURL('image/png');  //将图片转成base64格式\n      // console.log('----dataURL-',dataURL)\n\n      return canvas;\n    }\n\n    /**\n     * decodeURIComponent(sourceUrl)+\"&sig=\"+Gta(decodeURIComponent(signature))\n     * @param {string} decodeSignatureCipherFunStr \n     * @param {String} signatureCipher \n     * @returns \n     */\n    function decodeYoutubeSourceUrl(signatureCipher) {\n      if (!checkDecodeFunIsValid()) {\n        console.log('decodeSignatureCipherFunStr------decodeSignatureCipherFunStr or signatureCipher is null', signatureCipher);\n        return '';\n      }\n      let decodeFunStr = decodeSignatureCipher.decodeFunStr;\n      // console.log('decodeYoutubeSourceUrl---------',signatureCipher);\n      const decodeSignatureCipherFun = new Function('return ' + decodeFunStr);\n      let sourceUrl = Utils.queryParams(signatureCipher, 'url');\n      let signature = Utils.queryParams(signatureCipher, 's');\n      // console.log('decodeYoutubeSourceUrl------------sourceUrl=',sourceUrl, signature);\n      signature = decodeSignatureCipherFun()(decodeURIComponent(signature));\n      sourceUrl = `${decodeURIComponent(sourceUrl)}&sig=${signature}`;\n      sourceUrl = decodeYoutubeSpeedFun(sourceUrl);\n      return sourceUrl;\n    }\n    function decodeYoutubeSpeedFun(sourceUrl) {\n      if (!checkDecodeWithSpeedFunIsValid()) {\n        console.log('decodeYoutubeSpeedFun------checkDecodeWithSpeedFunIsValid is false', sourceUrl);\n        return sourceUrl;\n      }\n      if (Utils.queryURLParams(sourceUrl, 'oid')) {\n        return sourceUrl;\n      }\n\n      // if(Object.keys(ytPublicParam).length<6){\n      //   return sourceUrl\n      // }\n      let paramStr = '';\n      let paramCount = 0;\n      for (let name in ytPublicParam) {\n        if (ytPublicParam[name] && typeof ytPublicParam[name] != 'undefined') {\n          paramCount = paramCount + 1;\n          paramStr += '&' + name + '=' + ytPublicParam[name];\n        }\n      }\n      // console.log('decodeYoutubeSpeedFun----paramStr------',paramStr)\n      // if(paramCount<6){\n      //   console.log('decodeYoutubeSpeedFun---paramCount<6---', ytPublicParam);\n      //   return sourceUrl;\n      // }\n\n      let n = Utils.queryURLParams(sourceUrl, 'n');\n      if (!n) {\n        console.log('decodeYoutubeSpeedFun---n-is-null---', n);\n        return sourceUrl;\n      }\n      if (!ytParam_N_Obj[n]) {\n        ytParam_N_Obj[n] = getYoutubeNParam(n);\n      }\n      if (!ytParam_N_Obj[n]) {\n        console.log('decodeYoutubeSpeedFun---ytParam_N_Obj[n]-is-null---', n);\n        return sourceUrl;\n      }\n      sourceUrl = Utils.replaceUrlArg(sourceUrl, 'n', ytParam_N_Obj[n]);\n      sourceUrl = sourceUrl + paramStr;\n      // console.log('decodeYoutubeSpeedFun---sourceUrl----',sourceUrl);\n      return sourceUrl;\n    }\n    function getYoutubeNParam(n) {\n      try {\n        let decodeSpeedFunStr = decodeSignatureCipher.decodeSpeedFunStr;\n        const decodeSpeedFun = new Function('return ' + decodeSpeedFunStr);\n        return decodeSpeedFun()(decodeURIComponent(n));\n      } catch (error) {\n        return '';\n      }\n    }\n\n    /**\n     * 获取 sourceUrl 公共参数\n     * cpn,cver,ptk,oid,ptchn,pltype\n     * @param {*} sourceUrl video标签下src的url\n     * return cpn=b_JppE6c7Cd9y2Z9&cver=2.20230331.01.00&ptk=youtube_single&oid=grYThWmtgGXLlb99XVUPQQ&ptchn=aO6TYtlC8U5ttz62hTrZgg&pltype=content\n     */\n    function setYoutubePublicParam(sourceUrl, playerRes) {\n      if (sourceUrl) {\n        let cver = Utils.queryURLParams(sourceUrl, 'cver');\n        ytPublicParam.cver = cver ? cver : ytPublicParam.cver;\n        setYtParmeObj(sourceUrl);\n      }\n      if (playerRes && Object.keys(playerRes).length) {\n        // https://m.youtube.com/ptracking?ei=EJotZK4dw-CwApmmldgO&oid=noTyR-gah-30KqQfy7jXjw&plid=AAX4mNQPIivbGnid&pltype=content&ptchn=hB3UnDddahXU7FKZXmpzMA&ptk=youtube_single&video_id=EQOarcurXfY\n        // window.ytplayer.bootstrapPlayerResponse.playbackTracking.ptrackingUrl.baseUrl\n        // window.ytplayer.bootstrapPlayerResponse.responseContext.serviceTrackingParams[1].params[2].cver\n        if (playerRes.playbackTracking && playerRes.playbackTracking.ptrackingUrl && playerRes.playbackTracking.ptrackingUrl.baseUrl) {\n          setYtParmeObj(playerRes.playbackTracking.ptrackingUrl.baseUrl);\n        }\n        if (playerRes.responseContext && playerRes.responseContext.serviceTrackingParams && playerRes.responseContext.serviceTrackingParams.length) {\n          playerRes.responseContext.serviceTrackingParams.forEach(item => {\n            if ('CSI' == item.service && item.params.length) {\n              item.params.forEach(param => {\n                if ('cver' == param.key) {\n                  ytPublicParam.cver = param.value ? param.value : ytPublicParam.cver;\n                }\n              });\n            }\n          });\n        }\n      }\n      // console.log('ytPublicParam-------',ytPublicParam)\n    }\n\n    function setYtParmeObj(sourceUrl) {\n      let cpn = Utils.queryURLParams(sourceUrl, 'cpn');\n      ytPublicParam.cpn = cpn ? cpn : ytPublicParam.cpn;\n      let ptk = Utils.queryURLParams(sourceUrl, 'ptk');\n      ytPublicParam.ptk = ptk ? ptk : ytPublicParam.ptk;\n      let oid = Utils.queryURLParams(sourceUrl, 'oid');\n      ytPublicParam.oid = oid ? oid : ytPublicParam.oid;\n      let ptchn = Utils.queryURLParams(sourceUrl, 'ptchn');\n      ytPublicParam.ptchn = ptchn ? ptchn : ytPublicParam.ptchn;\n      let pltype = Utils.queryURLParams(sourceUrl, 'pltype');\n      ytPublicParam.pltype = pltype ? pltype : ytPublicParam.pltype;\n    }\n    function getYoutubeVideoUrlOrSignture(signatureCipher) {\n      if (!checkDecodeFunIsValid()) {\n        return signatureCipher;\n      } else {\n        return decodeYoutubeSourceUrl(signatureCipher);\n      }\n    }\n    function getYoutubeAudioUrlOrSignture(audioArr) {\n      if (audioArr && audioArr.length) {\n        audioArr.sort(Utils.compare('bitrate'));\n        let audioItem = audioArr[0];\n        if (audioItem.url) {\n          return audioItem.url;\n        } else {\n          if (!checkDecodeFunIsValid()) {\n            return audioItem.signatureCipher;\n          }\n          // console.log('audioItem--------',audioItem)\n          return decodeYoutubeSourceUrl(audioItem.signatureCipher);\n        }\n      } else {\n        return '';\n      }\n    }\n\n    /**\n     * 获取页面上video标签获取视频信息\n     * @return videoInfo{videoKey(从原页面中取到的video唯一标识), downloadUrl, poster, title, hostUrl, qualityList, videoUuid(解析给video标签生成的uuid), audioUrl（音频url）, protect(视频是否受保护, true/false)}\n     * \n     * qualityList[{downloadUrl,qualityLabel, quality, audioUrl（音频url）, protect(视频是否受保护, true/false) }]\n     * // https://www.pornhub.com/view_video.php?viewkey=ph63c4fdb2826eb\n     */\n    function handleVideoInfoParse(videoSnifferDom, videoDom, videoUuid) {\n      let videoInfo = {};\n      let poster = videoSnifferDom.getAttribute('poster') || videoSnifferDom.getAttribute('data-poster');\n      let title = videoSnifferDom.getAttribute('title');\n      let downloadUrl = videoSnifferDom.getAttribute('src');\n      let qualityList = [];\n      hostUrl = window.location.href;\n      let longPressDom = videoDom;\n      downloadUrl = Utils.completionSourceUrl(downloadUrl);\n      if (!poster) {\n        let posterDom = document.querySelector('source[type=\\'image/webp\\'] img');\n        poster = posterDom ? posterDom.getAttribute('src') : '';\n        if (!title) {\n          title = posterDom ? posterDom.getAttribute('alt') : '';\n        }\n      }\n      // console.log('handleVideoInfoParse---host---', host);\n      if (host.indexOf('youtube.com') > -1) {\n        setYoutubePublicParam(downloadUrl, '');\n        let playerDom = document.querySelector('#player-control-overlay .player-controls-background-container .player-controls-background');\n        if (!playerDom) {\n          playerDom = document.querySelector('#player-control-overlay');\n        }\n        // 短视频\n        if (!playerDom) {\n          playerDom = document.querySelector('.carousel-wrapper .video-wrapper .reel-player-overlay-main-content');\n        }\n        if (playerDom) {\n          longPressDom = playerDom;\n        }\n        videoInfo = handleYoutubeVideoInfo(videoSnifferDom);\n        if (!videoInfo.videoKey) {\n          return videoInfo;\n        }\n      } else if (host.indexOf('baidu.com') > -1) {\n        videoInfo = handleBaiduVideoInfo(videoSnifferDom);\n      } else if (host.indexOf('bilibili.com') > -1) {\n        videoInfo = handleBilibiliVideoInfo(videoSnifferDom);\n      } else if (host.indexOf('mobile.twitter.com') > -1) {\n        // console.log('parse---------mobile.twitter.com');\n        let playerDom = document.querySelector('.r-eqz5dr .r-1pi2tsx .r-1pi2tsx .r-1udh08x .r-1p0dtai div.css-1dbjc4n.r-6koalj.r-eqz5dr.r-1pi2tsx.r-13qz1uu');\n        if (!playerDom) {\n          // console.log('--------playerDom--------is null----------');\n        }\n        if (playerDom) {\n          longPressDom = playerDom;\n        }\n        videoInfo = handleMobileTwitterVideoInfo(videoSnifferDom);\n      } else if (host.indexOf('m.weibo.cn') > -1) {\n        videoInfo = handleMobileWeiboVideoInfo(videoSnifferDom);\n      } else if (host.indexOf('iesdouyin.com') > -1) {\n        videoInfo = handleMobileDouyinVideoInfo(videoSnifferDom);\n      } else if (host.indexOf('douyin.com') > -1) {\n        const pathName = window.location.pathname;\n        if (pathName.indexOf('/video') > -1) {\n          videoInfo = handlePCDetailDouyinVideoInfo(videoSnifferDom);\n        } else {\n          videoInfo = handlePCHomeDouyinVideoInfo(videoSnifferDom);\n        }\n      } else if (host.indexOf('m.toutiao.com') > -1) {\n        // longPressDom = document.querySelector('.video .xgplayer-wrapper .xgplayer-mobile .trigger');\n        videoInfo = handleMobileToutiaoVideoInfo(videoSnifferDom);\n      } else if (host.indexOf('m.v.qq.com') > -1) {\n        videoInfo = handleMobileTenxunVideoInfo(videoSnifferDom);\n      } else if (host.indexOf('www.reddit.com') > -1) {\n        videoInfo = handleRedditVideoInfo(videoSnifferDom);\n      }\n      // https://cn.pornhub.com/view_video.php?viewkey=ph61ab31f8a70fe\n      else if (host.indexOf('pornhub.com') > -1) {\n        let dom = document.querySelector('#videoShow #videoPlayerPlaceholder .playerFlvContainer');\n        if (dom) {\n          longPressDom = dom;\n        }\n        videoInfo = handlePornhubVideoInfo(videoSnifferDom);\n      } else if (host.indexOf('91porn.com') > -1) {\n        const dom = document.querySelector('#videodetails .video-container');\n        if (dom) {\n          longPressDom = dom;\n        }\n        videoInfo = handle91PormVideoInfo(videoSnifferDom);\n      } else if (host.indexOf('facebook.com') > -1) {\n        videoInfo = handleFacebookVideoInfo(videoSnifferDom);\n      } // https://www.instagram.com\n      else if (host.indexOf('instagram.com') > -1) {\n        videoInfo = handleInstagramVideoInfo(videoSnifferDom);\n      } else if (host.indexOf('xiaohongshu.com') > -1) {\n        videoInfo = handleXiaohongshuVideoInfo(videoSnifferDom);\n      }\n      // https://jable.tv/videos/dvaj-605/\n      else if (host.indexOf('jable.tv') > -1) {\n        videoInfo = handleJableVideoInfo(videoSnifferDom);\n      }\n      // ztawxd5l.hxaa79.com\n      else if (host.indexOf('hxaa79.com') > -1) {\n        videoInfo = handleHxaa79VideoInfo(videoSnifferDom);\n      } else if (host.indexOf('555yy4.com') > -1) {\n        videoInfo = handle555yy4VideoInfo(videoSnifferDom);\n      } else if (host.indexOf('web.telegram.org') > -1) {\n        if (downloadUrl) {\n          const sourcePath = decodeURIComponent(downloadUrl);\n          let fileNameArr = sourcePath.match(/\"fileName\":\".*\"/g);\n          if (fileNameArr && fileNameArr.length) {\n            let fileName = fileNameArr[0];\n            fileName = fileName.replace('\"fileName\":', '');\n            title = fileName.replace(/\"/g, '');\n          }\n        }\n      }\n      if (videoInfo.downloadUrl) {\n        downloadUrl = videoInfo.downloadUrl;\n      }\n      downloadUrl = Utils.completionSourceUrl(downloadUrl);\n      if (!poster) {\n        poster = videoInfo.poster;\n      }\n      if (!title) {\n        title = videoInfo.title;\n      }\n      if (videoInfo.qualityList && videoInfo.qualityList.length) {\n        qualityList = videoInfo.qualityList;\n      }\n      if (!title) {\n        title = document.title;\n      }\n      if (!title) {\n        title = Utils.getUrlPathName(downloadUrl);\n      }\n      poster = Utils.completionSourceUrl(poster);\n      videoInfo['title'] = videoInfo.type && videoInfo.type == 'ad' ? '<span style=\"font-weight: 700;\">Ad·</span>' + title : title;\n      videoInfo['poster'] = poster;\n      videoInfo['downloadUrl'] = downloadUrl;\n      videoInfo['hostUrl'] = hostUrl;\n      videoInfo['qualityList'] = qualityList;\n      videoInfo['videoUuid'] = videoUuid;\n\n      // console.log('parse------videoInfo========',videoInfo);\n      if (downloadUrl) {\n        checkVideoExist(videoDom, longPressDom, videoInfo);\n      }\n      return videoInfo;\n    }\n    function setTimeoutParseVideoInfoByWindow() {\n      // console.log('setTimeoutParseVideoInfoByWindow-------')\n      let loadingTimer = setTimeout(() => {\n        parseVideoInfoByWindow();\n        clearTimeout(loadingTimer);\n        loadingTimer = 0;\n      }, 400);\n    }\n    function parseVideoInfoByWindow() {\n      let videoInfo = {};\n      let host = window.location.host;\n      hostUrl = window.location.href;\n      videoInfo.hostUrl = hostUrl;\n      let posDom = null;\n      if (host.indexOf('pornhub.com') > -1) {\n        posDom = document.querySelector('#videoShow #videoPlayerPlaceholder .mgp_videoWrapper .mgp_videoPoster img');\n        // if(!posDom){\n        //   posDom = document.querySelector('#videoShow #videoPlayerPlaceholder .mgp_videoWrapper video');\n        // }\n        // if(!posDom){\n        //   posDom = document.querySelector('#videoShow #videoPlayerPlaceholder .playerFlvContainer .mgp_controls');\n        // }\n        if (!posDom) {\n          posDom = document.querySelector('#videoShow #videoPlayerPlaceholder .mgp_videoWrapper');\n        }\n        videoInfo = parsePornhubVideoInfoByWindow(videoInfo);\n      } else if (host.indexOf('youtube.com') > -1) {\n        videoInfo = handleYoutubeVideoInfo();\n      }\n\n      // console.log('pornhub------------------',dom);\n      if (!videoInfo.downloadUrl) {\n        return;\n      }\n      checkVideoExist(null, posDom, videoInfo);\n    }\n    function handleBilibiliVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster');\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      let titleDom = document.querySelector('.main-container .ep-info-pre .ep-info-title');\n      if (!titleDom) {\n        titleDom = document.querySelector('.video .share-video-info .title-wrapper .title .title-name span');\n        if (!titleDom) {\n          let bilibiliTimer = setTimeout(function () {\n            titleDom = document.querySelector('.video .share-video-info .title-wrapper .title .title-name span');\n            if (titleDom) {\n              videoInfo.title = titleDom.textContent;\n            }\n            clearTimeout(bilibiliTimer);\n            bilibiliTimer = 0;\n            return videoInfo;\n          }, 200);\n        }\n      }\n      if (titleDom) {\n        videoInfo.title = titleDom.textContent;\n      }\n      const episodeDom = document.querySelector('div.m-video-part-new > ul.list > li.part-item.on > span');\n      if (episodeDom) {\n        let episode = episodeDom.textContent;\n        videoInfo.title = episode + videoInfo.title;\n      }\n      return videoInfo;\n    }\n    function handleMobileTwitterVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster');\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      let titleDom = videoDom.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextElementSibling.childNodes[1];\n      if (titleDom) {\n        titleDom = titleDom.querySelector('.css-1dbjc4n .r-92ivih.r-1t01tom .r-1t982j2.r-1j3t67a .css-1dbjc4n.r-1kw4oii a[data-testid=\\'tweetText\\'] span');\n        if (titleDom) {\n          videoInfo.title = Utils.checkCharLengthAndSubStr(titleDom.textContent);\n        }\n      }\n      return videoInfo;\n    }\n    function handleMobileWeiboVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster');\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      if (hostUrl.match(/^.*\\/detail\\/.*/g)) {\n        videoInfo.title = Utils.checkCharLengthAndSubStr(document.querySelector('.weibo-main .weibo-text').textContent);\n        // videoInfo.poster = Utils.completionSourceUrl(document.querySelector('.weibo-main .weibo-media .card-video .mwb-video .m-img-box img').getAttribute('src'));\n      }\n\n      return videoInfo;\n    }\n    function handleMobileDouyinVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster');\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      let posterDom = document.querySelector('.video-container img.poster');\n      if (posterDom) {\n        videoInfo.poster = posterDom.getAttribute('src');\n      }\n      let titleDom = document.querySelector('.desc .multi-line .multi-line_text');\n      if (titleDom) {\n        videoInfo.title = titleDom.textContent;\n      }\n      return videoInfo;\n    }\n    function handlePCDetailDouyinVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster');\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      const titleDom = document.querySelector('div[data-e2e=video-detail] div[data-e2e=detail-video-info] div h2');\n      if (titleDom) {\n        videoInfo.title = titleDom.textContent;\n      }\n      return videoInfo;\n    }\n    function handlePCHomeDouyinVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster');\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      let slideDom = videoDom.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;\n      if (slideDom) {\n        let posterDom = slideDom.querySelector('.imgBackground img');\n        if (posterDom) {\n          videoInfo.poster = posterDom.getAttribute('src');\n        }\n        let titleDom = slideDom.querySelector('.video-info-detail .title span.e_h_fqNj');\n        if (titleDom) {\n          videoInfo.title = titleDom.textContent;\n        }\n      }\n      return videoInfo;\n    }\n    function handleMobileToutiaoVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster');\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      const posterDom = document.querySelector('.video .xgplayer-placeholder .xgplayer-poster');\n      if (posterDom) {\n        let posterInfo = posterDom.getAttribute('style');\n        if (posterInfo) {\n          let poster = Utils.matchUrlInString(posterInfo);\n          // console.log('poster-----',poster);\n          videoInfo.poster = poster;\n        }\n      }\n      const titleDom = document.querySelector('.video .video-header .video-title-wrapper .video-title');\n      if (titleDom) {\n        videoInfo.title = titleDom.textContent;\n      }\n      return videoInfo;\n    }\n    function handleMobileTenxunVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster');\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      const posterDom = document.querySelector('.mod_play .player_container .txp_poster_img');\n      if (posterDom) {\n        let poster = posterDom.getAttribute('src');\n        poster = Utils.completionSourceUrl(poster);\n        videoInfo.poster = poster;\n      }\n      const titleDom = document.querySelector('.mod_box .mod_bd .mod_video_info .video_title');\n      if (titleDom) {\n        let title = titleDom.textContent;\n        title = title ? title.trim() : '';\n        const sliderDom = document.querySelector('.mod_box .mod_bd .mod_list_slider .slider_box .item.current span');\n        if (sliderDom) {\n          title = title + sliderDom.textContent;\n          title = title ? title.trim() : '';\n        }\n        videoInfo.title = title;\n      }\n      return videoInfo;\n    }\n    function handleRedditVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster');\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      const titleDom = document.querySelector('shreddit-app shreddit-title');\n      if (titleDom) {\n        videoInfo.title = titleDom.getAttribute('title');\n      }\n      return videoInfo;\n    }\n    function handle91PormVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.title = videoDom.getAttribute('title');\n      videoInfo.poster = videoDom.getAttribute('poster');\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      if (!videoInfo.poster) {\n        const posterDom = document.querySelector('#player_one');\n        if (posterDom) {\n          videoInfo.poster = posterDom.getAttribute('poster');\n        }\n      }\n      return videoInfo;\n    }\n    function handlePornhubVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster');\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      let videoDetailDom = videoDom.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;\n      if (videoDetailDom && videoDetailDom.classList.contains('playerWrapper')) {\n        // video detail info\n        const titleDom = document.querySelector('#videoShow .categoryTags .headerWrap h1');\n        if (titleDom) {\n          let title = titleDom.textContent;\n          if (title) {\n            videoInfo.title = title.trim();\n          }\n        }\n        const posterDom = document.querySelector('#videoPlayerPlaceholder img.videoElementPoster');\n        if (posterDom) {\n          videoInfo.poster = posterDom.getAttribute('src');\n        }\n        return parsePornhubVideoInfoByWindow(videoInfo);\n      }\n      let videoLiDom = videoDom.parentNode.parentNode.parentNode.parentNode.parentNode;\n      if (videoLiDom && 'li' == videoLiDom.tagName.toLowerCase()) {\n        let videoThumbDom = videoLiDom.querySelector('.videoWrapper .singleVideo a img.videoThumb');\n        if (videoThumbDom) {\n          videoInfo.title = videoThumbDom.getAttribute('alt');\n          if (videoInfo.title) {\n            videoInfo.title = '[Related videos] ' + videoInfo.title;\n          }\n          videoInfo.poster = videoThumbDom.getAttribute('src');\n          return videoInfo;\n        }\n      }\n      return videoInfo;\n    }\n    function parsePornhubVideoInfoByWindow(videoInfo) {\n      videoInfo = videoInfo || {};\n      // console.log('videoInfo.window.location.href========',window.location.href)\n      videoInfo.videoKey = Utils.queryURLParams(window.location.href, 'viewkey');\n      // console.log('videoInfo.videoKey========',videoInfo.videoKey)\n      // console.log('window.VIDEO_SHOW========',window.VIDEO_SHOW.vkey)\n      if (window.VIDEO_SHOW && (!videoInfo.videoKey || videoInfo.videoKey == window.VIDEO_SHOW.vkey)) {\n        if (!videoInfo.title) {\n          videoInfo.title = window.VIDEO_SHOW.videoTitle;\n        }\n        if (!videoInfo.poster) {\n          videoInfo.poster = window.VIDEO_SHOW.videoImage;\n        }\n        let playerId = window.VIDEO_SHOW.playerId;\n        // console.log('playerId=========',playerId);\n        if (playerId) {\n          let idArr = playerId.split('_');\n          // console.log('idArr=========',idArr);\n          if (idArr.length > 1) {\n            let flashvarsId = 'flashvars_' + idArr[1];\n            // console.log('flashvarsId=========',flashvarsId);\n            let mediaDefinitions = window[flashvarsId].mediaDefinitions;\n            // console.log('mediaDefinitions===========',mediaDefinitions)\n            if (mediaDefinitions && mediaDefinitions.length) {\n              let qualityList = [];\n              let defaultQuality = '';\n              mediaDefinitions.forEach(item => {\n                if ('hls' == item.format && typeof item.quality == 'string' && item.videoUrl) {\n                  qualityList.push({\n                    downloadUrl: item.videoUrl,\n                    qualityLabel: item.quality,\n                    quality: Number(item.quality)\n                  });\n                }\n                if (item.defaultQuality && ('boolean' == typeof item.defaultQuality || 'number' == typeof item.defaultQuality)) {\n                  defaultQuality = item.defaultQuality;\n                  if (!videoInfo.downloadUrl) {\n                    videoInfo.downloadUrl = item.videoUrl;\n                  }\n                }\n              });\n              // console.log('qualityList========',qualityList)\n              // console.log('defaultQuality========',defaultQuality, typeof defaultQuality)\n              videoInfo['qualityList'] = qualityList;\n            }\n          }\n        }\n      }\n      return videoInfo;\n    }\n    function handleFacebookVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster');\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      videoInfo.title = videoDom.getAttribute('title');\n      let videoDetailDom = videoDom.parentElement.parentElement.parentElement.parentElement.parentElement;\n      if (videoDetailDom && videoDetailDom.classList.contains('displayed') && 'container' == videoDetailDom.getAttribute('data-type')) {\n        let imgDom = videoDetailDom.querySelector('div[data-type=\\'video\\'] img.img');\n        if (imgDom) {\n          videoInfo.poster = imgDom.getAttribute('src');\n        }\n        let titleDom = videoDetailDom.querySelector('div.displayed > div[data-type=\\'container\\'] > div[data-type=\\'container\\'] > div[data-type=\\'container\\'] > div[data-type=\\'text\\'] > div.native-text');\n        if (titleDom) {\n          videoInfo.title = titleDom.textContent;\n        }\n      }\n      return videoInfo;\n    }\n    function handleInstagramVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster') || '';\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      videoInfo.title = videoDom.getAttribute('title');\n      let videoDetailDom = videoDom.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;\n      if (videoDetailDom && videoDetailDom.classList.contains('_ab8w') && videoDetailDom.classList.contains('_ab94') && videoDetailDom.classList.contains('_ab99') && videoDetailDom.classList.contains('_ab9h') && videoDetailDom.classList.contains('_ab9m') && videoDetailDom.classList.contains('_ab9p') && videoDetailDom.classList.contains('_abcm')) {\n        // console.log('handleInstagramVideoInfo--------------',videoDetailDom);\n        let posterDom = videoDetailDom.querySelector('._aatk .x1uhb9sk .x10l6tqk .x78zum5 img.x5yr21d');\n        // console.log('posterDom-----------',posterDom)\n        if (posterDom) {\n          videoInfo.poster = posterDom.getAttribute('src');\n        }\n        let titleDom = videoDetailDom.querySelector('._ab9f div._ae1h._ae1i ._ae2s div._ae5q._akdn div div div');\n        // console.log('titleDom-----------',titleDom)\n        if (titleDom && titleDom.textContent) {\n          videoInfo.title = titleDom.textContent.replace('... more', '');\n        }\n      } else {\n        videoDetailDom = videoDom.parentNode.parentNode.parentNode.parentNode.parentNode;\n        // console.log(videoDetailDom.classList, 'videoDetailDom.classList.contains(\\'_a8b4\\') ===', videoDetailDom.classList.contains('_a8b4') )\n        if (videoDetailDom && videoDetailDom.classList.contains('_a8b4') && videoDetailDom.classList.contains('_acjh')) {\n          // let posterDom = videoDetailDom.querySelector('div > div div.xryxfnj.x1nhvcw1 div.xxk0z11.x1qihbgi a.x1i10hfl._a6hd div._aagu div._aagv img');\n          // if(posterDom){\n          //   videoInfo.poster = posterDom.getAttribute('src');\n          // }\n          let titleDom = videoDetailDom.querySelector('div > div > div.x9f619.x1d8287x.xz4gly6  div.x6ikm8r.x10wlt62 span');\n          if (titleDom) {\n            videoInfo.title = titleDom.textContent;\n          }\n        }\n      }\n      return videoInfo;\n    }\n    function handleXiaohongshuVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster') || '';\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      videoInfo.title = videoDom.getAttribute('title');\n      const bgDom = document.querySelector('.video-container .video-banner .img-box');\n      if (bgDom) {\n        let posterInfo = bgDom.getAttribute('style');\n        let poster = Utils.matchUrlInString(posterInfo);\n        if (poster) {\n          videoInfo.poster = Utils.completionSourceUrl(poster);\n        }\n      }\n      const titleDom = document.querySelector('.video-container .stage-bottom .author-desc-wrapper .author-desc');\n      if (titleDom) {\n        let title = titleDom.textContent;\n        if (title) {\n          title = title.replace(/^展开/g, '');\n          videoInfo.title = Utils.checkCharLengthAndSubStr(title);\n        }\n      }\n      return videoInfo;\n    }\n    function handleJableVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster') || '';\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      videoInfo.title = videoDom.getAttribute('title');\n      const titleDom = document.querySelector('.video-info .info-header .header-left h4');\n      if (titleDom) {\n        videoInfo.title = titleDom.textContent;\n      }\n      return videoInfo;\n    }\n    function handleHxaa79VideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster') || '';\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      videoInfo.title = videoDom.getAttribute('title');\n      const titleDom = document.querySelector('.play_main .play_main_1');\n      if (titleDom) {\n        videoInfo.title = titleDom.textContent;\n      }\n      return videoInfo;\n    }\n    function handle555yy4VideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster') || '';\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      videoInfo.title = videoDom.getAttribute('title');\n      let videoTitle = window.parent.document.title;\n      console.log('videoTitle------', videoTitle, window.parent.ep_title, window.parent.MAC.Title);\n      if (!videoTitle) {\n        videoTitle = window.parent.ep_title;\n      }\n      if (!videoTitle) {\n        videoTitle = window.parent.MAC.Title;\n      }\n      videoInfo.title = videoTitle;\n      return videoInfo;\n    }\n\n    /**\n     * 解析baidu视频信息\n     * @return videoInfo{downloadUrl,poster,title,hostUrl,qualityList,videoKey,videoUuid}\n     * keyName{sd(标清),hd(高清),sc(超清), 1080p(蓝光)}\n     * qualityList[{downloadUrl,qualityLabel, quality, keyName }]\n     */\n    function handleBaiduVideoInfo(videoDom) {\n      let videoInfo = {};\n      videoInfo.poster = videoDom.getAttribute('poster') || '';\n      videoInfo.downloadUrl = videoDom.getAttribute('src');\n      videoInfo.title = videoDom.getAttribute('title');\n      /*--activity.baidu.com--*/\n      // window.PAGE_DATA.remote.mainVideoList\n      // window.PAGE_DATA.remote.moreVideoList\n      // window.PAGE_DATA.remote.rcmdVideoList\n      if (host === 'activity.baidu.com') {\n        const pageData = window.PAGE_DATA;\n        if (pageData && pageData.pageData && pageData.pageData.remote && pageData.pageData.remote.mainVideoList && pageData.pageData.remote.mainVideoList.length) {\n          const mainVideo = pageData.pageData.remote.mainVideoList[0];\n          const moreVideoList = pageData.pageData.remote.moreVideoList;\n          videoInfo['title'] = mainVideo.title;\n          videoInfo['poster'] = mainVideo.poster;\n          videoInfo['downloadUrl'] = mainVideo.videoUrl;\n          if (moreVideoList && moreVideoList.length) {\n            moreVideoList.forEach(item => {\n              if (videoIdSet.size && videoIdSet.has(item.vid)) {\n                return;\n              }\n              if (Utils.isURL(item.videoUrl)) {\n                videoIdSet.add(item.vid);\n                // more video\n                videoList.push({\n                  title: item.title,\n                  poster: item.poster,\n                  downloadUrl: item.videoUrl,\n                  hostUrl: hostUrl,\n                  videoUuid: item.vid\n                });\n              }\n            });\n          }\n          return videoInfo;\n        }\n        videoInfo['title'] = getBaiduVideoTitle();\n        const videoDom = document.querySelector('.stickyBlock .curVideoPlay video');\n        if (videoDom) {\n          videoInfo['poster'] = videoDom.getAttribute('poster');\n          videoInfo['downloadUrl'] = videoDom.getAttribute('src');\n        }\n        return videoInfo;\n      }\n      /*--https://mbd.baidu.com/--*/\n      // window.jsonData.curVideoMeta\n      if ('mbd.baidu.com' === host) {\n        const jsonData = window.jsonData;\n        if (jsonData && jsonData.curVideoMeta) {\n          const curVideoMeta = jsonData.curVideoMeta;\n          videoInfo = haokanBaiduVideoInfo(curVideoMeta);\n          // 接口中的数据和dom数据是否一致\n          if (videoInfo && Object.keys(videoInfo).length) {\n            return videoInfo;\n          }\n        }\n        videoInfo['title'] = getBaiduVideoTitle();\n        videoInfo['poster'] = getBaiduVideoPoster();\n        return videoInfo;\n      }\n\n      /*--https://haokan.baidu.com/--*/\n      // window.__PRELOADED_STATE__.curVideoMeta\n      if ('haokan.baidu.com' === host) {\n        // console.log('haokan----start-----');\n        const preloadedState = window.__PRELOADED_STATE__;\n        const videoId = Utils.queryURLParams(hostUrl, 'vid');\n        const srcUrl = videoDom.getAttribute('src');\n        // 主视频 \n        if (srcUrl && videoId && srcUrl.indexOf(videoId) > -1) {\n          // console.log('haokan----videoId-----',videoId);\n          if (preloadedState && preloadedState.curVideoMeta) {\n            const curVideoMeta = preloadedState.curVideoMeta;\n            videoInfo = haokanBaiduVideoInfo(curVideoMeta);\n            if (videoInfo && Object.keys(videoInfo).length) {\n              return videoInfo;\n            }\n          }\n          videoInfo['title'] = getBaiduVideoTitle();\n          videoInfo['poster'] = getBaiduVideoPoster();\n        } else {\n          videoInfo['title'] = videoDom.parentElement.parentElement.querySelector('h3.land-recommend-bottom-title') ? videoDom.parentElement.parentElement.querySelector('h3.land-recommend-bottom-title').textContent : '';\n          videoInfo['poster'] = videoDom.parentElement && videoDom.parentElement.querySelector('img.video-img') ? videoDom.parentElement.querySelector('img.video-img').getAttribute('src') : '';\n        }\n        return videoInfo;\n      }\n\n      /*--https://pan.baidu.com/--*/\n      // \n      if ('pan.baidu.com' === host) {\n        videoInfo['title'] = getBaiduVideoTitle();\n      }\n      if ('m.baidu.com' === host) {\n        const baiduTitle = document.querySelector('.sfc-video-page-info .sfc-video-page-info-title h3.title-waterfallB');\n        if (baiduTitle) {\n          videoInfo['title'] = baiduTitle.textContent;\n        }\n        const imgDom = document.querySelector('.video-poster .c-img-wrapper img.c-img-img');\n        if (imgDom) {\n          videoInfo['poster'] = imgDom.getAttribute('src');\n        }\n      }\n      return videoInfo;\n    }\n    function haokanBaiduVideoInfo(curVideoMeta) {\n      if (!curVideoMeta) {\n        return {};\n      }\n      let videoInfo = {};\n      videoInfo['title'] = curVideoMeta.title;\n      videoInfo['poster'] = curVideoMeta.poster;\n      videoInfo['downloadUrl'] = curVideoMeta.playurl;\n      if (curVideoMeta.clarityUrl && curVideoMeta.clarityUrl.length) {\n        let qualityList = [];\n        const clarityUrl = curVideoMeta.clarityUrl;\n        clarityUrl.forEach(item => {\n          let vodVideoHW = item.vodVideoHW;\n          qualityList.push({\n            downloadUrl: item.url,\n            qualityLabel: item.title,\n            quality: item.key\n          });\n        });\n        videoInfo['qualityList'] = qualityList;\n      }\n      return videoInfo;\n    }\n    function getBaiduVideoPoster() {\n      const haokanPosterDom = document.querySelector('.art-player-wrapper .art-video-player .art-poster');\n      if (haokanPosterDom) {\n        let haokanPosterInfo = haokanPosterDom.getAttribute('style');\n        if (haokanPosterInfo) {\n          return Utils.matchUrlInString(haokanPosterInfo);\n        }\n      }\n      const mhdPosterDom = document.querySelector('#bdMainPlayer .art-video-player .art-poster');\n      if (mhdPosterDom) {\n        let mhdPosterInfo = mhdPosterDom.getAttribute('style');\n        if (mhdPosterInfo) {\n          return Utils.matchUrlInString(mhdPosterInfo);\n        }\n      }\n      return '';\n    }\n    function getBaiduVideoTitle() {\n      const activityTitleDom = document.querySelector('.adVideoPageV3 .curVideoInfo h3.videoTitle');\n      if (activityTitleDom) {\n        return activityTitleDom.textContent;\n      }\n      const haokanTitleDom = document.querySelector('.video-info .video-info-title');\n      if (haokanTitleDom) {\n        return haokanTitleDom.textContent;\n      }\n      const panTitleDom = document.querySelector('.video-main .video-content .video-title .video-title-left');\n      if (panTitleDom) {\n        return panTitleDom.textContent;\n      }\n      return '';\n    }\n\n    /**\n     * 解析Youtube视频信息\n     * @param() videoSnifferDom\n     * @return videoInfo{downloadUrl,poster,title,hostUrl,qualityList}\n     */\n    function handleYoutubeVideoInfo(videoSnifferDom) {\n      let videoInfo = {};\n      const ytplayer = window.ytplayer;\n      let videoId = Utils.queryURLParams(hostUrl, 'v') || Utils.getLastPathParameter(hostUrl);\n      if (!videoId) {\n        // console.log('videoId-------',videoId);\n        let videoIdDom = document.querySelector('#player-control-container > ytm-custom-control > div.inline-player-controls > a.inline-player-overlay');\n        if (videoIdDom) {\n          let hrefLink = videoIdDom.getAttribute('href');\n          videoId = Utils.queryParams(hrefLink, 'v');\n        }\n      }\n\n      // console.log('handleYoutubeVideoInfo---------------videoId-------------',videoId)\n      const playerResp = ytplayer ? ytplayer.bootstrapPlayerResponse : {};\n      if (!videoId) {\n        return videoInfo;\n      }\n      let title = '';\n      if (videoSnifferDom) {\n        videoInfo.poster = videoSnifferDom.getAttribute('poster') || '';\n        videoInfo.downloadUrl = videoSnifferDom.getAttribute('src');\n        let title = videoSnifferDom.getAttribute('title');\n        videoInfo.title = title;\n      } else {\n        if (!ytplayer || !playerResp.videoDetails) {\n          return videoInfo;\n        }\n      }\n      if (playerResp && playerResp.videoDetails && playerResp.streamingData && (!videoId || videoId === playerResp.videoDetails.videoId)) {\n        setYoutubePublicParam('', playerResp);\n        const videoDetails = playerResp.videoDetails;\n        let detailTitle = videoDetails.title ? videoDetails.title : '';\n        videoInfo['title'] = detailTitle;\n        let thumbnail = videoDetails.thumbnail;\n        if (thumbnail) {\n          let thumbnails = thumbnail.thumbnails;\n          if (thumbnails && thumbnails.length) {\n            // console.log('thumbnails-----',thumbnails);\n            videoInfo['poster'] = thumbnails.pop().url;\n          }\n        }\n        if (playerResp.microformat && playerResp.microformat.playerMicroformatRenderer && playerResp.microformat.playerMicroformatRenderer.thumbnail && playerResp.microformat.playerMicroformatRenderer.thumbnail.thumbnails.length) {\n          // console.log('playerResp.microformat.playerMicroformatRenderer-----',playerResp.microformat.playerMicroformatRenderer);\n          videoInfo['poster'] = playerResp.microformat.playerMicroformatRenderer.thumbnail.thumbnails[0].url;\n        }\n        const streamingData = playerResp.streamingData;\n        const adaptiveFormats = streamingData.adaptiveFormats;\n        const formats = streamingData.formats;\n        title = title ? title : '';\n        // 取画质的时候防止原视频有广告\n        if (adaptiveFormats && adaptiveFormats.length && (!title || title.replace(/\\s+/g, '') === detailTitle.replace(/\\s+/g, ''))) {\n          let qualityList = [];\n          let qualitySet = new Set();\n          let jsPath = ytplayer.bootstrapWebPlayerContextConfig ? ytplayer.bootstrapWebPlayerContextConfig.jsUrl : '';\n          handleYTRandomPathUuidToDefinedObj(jsPath);\n          // key为分辨率quality,value为分辨率数组\n          let qualityVideoListMap = {};\n          let mp4AudioArr = [];\n          let webmAudioArr = [];\n          adaptiveFormats.forEach(item => {\n            let mimeType = item.mimeType;\n            if (mimeType.indexOf('video') > -1) {\n              let quality = item.height;\n              if (Object.prototype.hasOwnProperty.call(qualityVideoListMap, quality)) {\n                qualityVideoListMap[quality].push(item);\n              } else {\n                qualityVideoListMap[quality] = [item];\n              }\n            } else if (mimeType.indexOf('audio/mp4') > -1) {\n              mp4AudioArr.push(item);\n            } else if (mimeType.indexOf('audio/webm') > -1) {\n              webmAudioArr.push(item);\n            }\n          });\n\n          // 获取webm格式\n          let webmAudioUrl = getYoutubeAudioUrlOrSignture(webmAudioArr);\n\n          // 获取mp4音频\n          let mp4AudioUrl = getYoutubeAudioUrlOrSignture(mp4AudioArr);\n          Object.keys(qualityVideoListMap).map(key => {\n            let qualityVideoArr = qualityVideoListMap[key];\n            let qualityMp4VideoArr = qualityVideoArr.filter(item => {\n              let mimeType = item.mimeType;\n              if (mimeType.indexOf('video/mp4') > -1) {\n                return item;\n              }\n            });\n            let qualityWebmVideoArr = qualityVideoArr.filter(item => {\n              let mimeType = item.mimeType;\n              if (mimeType.indexOf('video/webm') > -1) {\n                return item;\n              }\n            });\n            let qualityVideoTempArr = [];\n            let qualityVideoItem = {};\n            // 大于1080的视频以webm优先\n            if (Number(key) >= 1080) {\n              if (qualityWebmVideoArr.length) {\n                qualityVideoTempArr = qualityWebmVideoArr;\n              } else {\n                qualityVideoTempArr = qualityMp4VideoArr;\n              }\n            }\n            // 小于1080的视频以mp4优先\n            else {\n              if (qualityMp4VideoArr.length) {\n                qualityVideoTempArr = qualityMp4VideoArr;\n              } else {\n                qualityVideoTempArr = qualityWebmVideoArr;\n              }\n            }\n            // console.log('qualityVideoTempArr--------',qualityVideoTempArr);\n            qualityVideoTempArr.sort(Utils.compare('fps'));\n            if (qualityVideoTempArr.length > 1) {\n              let qualityVideoItem0 = qualityVideoTempArr[0];\n              let qualityVideoItem1 = qualityVideoTempArr[1];\n              if (qualityVideoItem0.fps == qualityVideoItem1.fps) {\n                if (qualityVideoItem1.qualityLabel.toLowerCase().indexOf('hdr') > -1) {\n                  qualityVideoItem = qualityVideoItem1;\n                } else {\n                  qualityVideoItem = qualityVideoItem0;\n                }\n              } else {\n                qualityVideoItem = qualityVideoItem0;\n              }\n            } else {\n              qualityVideoItem = qualityVideoTempArr[0];\n            }\n            let qualityItem = handleParseYtQualityInfo(qualityVideoItem, webmAudioUrl, mp4AudioUrl);\n            if (qualityItem && Object.keys(qualityItem).length) {\n              if (qualityItem.audioUrl && !Utils.isURL(qualityItem.audioUrl) || qualityItem.videoUrl && !Utils.isURL(qualityItem.videoUrl)) {\n                videoInfo.shouldDecode = true;\n              }\n              qualityList.push(qualityItem);\n            }\n          });\n          // console.log('qualityList===================',qualityList, videoInfo);\n          if (qualityList && qualityList.length) {\n            if (!videoInfo['downloadUrl'] || videoInfo['downloadUrl'].startsWith('blob')) {\n              videoInfo['downloadUrl'] = qualityList[0].downloadUrl;\n              videoInfo['audioUrl'] = qualityList[0].audioUrl;\n              videoInfo['protect'] = qualityList[0].protect;\n            } else {\n              qualityList = matchDefaultUrlInQualityList(qualityList, videoInfo['downloadUrl']);\n            }\n            qualityList.sort(Utils.compare('qualityLabel'));\n            videoInfo['qualityList'] = qualityList;\n          }\n          if (!videoInfo['downloadUrl']) {\n            videoInfo['downloadUrl'] = getYoutubeVideoSourceByDom();\n          }\n        } else {\n          videoInfo['title'] = title ? title : getYoutubeVideoTitleByDom();\n          videoInfo['downloadUrl'] = getYoutubeVideoSourceByDom();\n        }\n        if (!videoInfo['poster']) {\n          videoInfo['poster'] = getYoutubeVideoPosterByDom();\n        }\n      } else {\n        videoInfo = {};\n        videoInfo['title'] = title ? title : getYoutubeVideoTitleByDom();\n        videoInfo['downloadUrl'] = getYoutubeVideoSourceByDom();\n        // console.log('videoInfo----------',videoInfo);\n      }\n\n      let posterImg = videoInfo['poster'];\n      if (!posterImg) {\n        posterImg = getYoutubeVideoPosterByDom();\n      }\n      if (playerResp.videoDetails && videoId != playerResp.videoDetails.videoId) {\n        posterImg = `https://i.ytimg.com/vi/${videoId}/hqdefault.jpg`;\n      }\n      if (!posterImg) {\n        posterImg = `https://i.ytimg.com/vi/${videoId}/hqdefault.jpg`;\n      }\n      videoInfo['poster'] = posterImg;\n      if (checkAdForYoutube(videoInfo['downloadUrl'])) {\n        videoInfo['type'] = 'ad';\n      }\n      videoInfo.videoKey = videoId;\n\n      // console.log('handleYoutubeVideoInfo-------videoId=',videoId);\n      return videoInfo;\n    }\n\n    /**\n     * 解析分辨率中视频信息\n     * @param {Object} qualityVideoItem  原数据中的分辨率信息\n     */\n    function handleParseYtQualityInfo(qualityVideoItem, webmAudioUrl, mp4AudioUrl) {\n      // console.log('handleParseYtQualityInfo---------',qualityVideoItem);\n      let mimeType = qualityVideoItem.mimeType;\n      let qualityLabel = qualityVideoItem.qualityLabel;\n      qualityLabel = qualityLabel ? qualityLabel.replace(/p[\\d]{2}/, 'P') : '';\n      let height = qualityVideoItem.height;\n      if (height < 1080) {\n        qualityLabel = qualityLabel ? qualityLabel.replace(/[\\s]?HDR|hdr/, '') : '';\n      }\n      if (qualityVideoItem.url) {\n        let audioUrl = '';\n        if (!mimeType.match(/.*codecs=.*webm.*/g)) {\n          audioUrl = webmAudioUrl;\n        }\n        if (!mimeType.match(/.*codecs=.*mp4.*/g)) {\n          audioUrl = mp4AudioUrl;\n        }\n        let sourceUrl = decodeYoutubeSpeedFun(qualityVideoItem.url);\n        return {\n          downloadUrl: sourceUrl,\n          qualityLabel,\n          quality: qualityVideoItem.quality,\n          audioUrl\n        };\n      } else {\n        let videoUrl = getYoutubeVideoUrlOrSignture(qualityVideoItem.signatureCipher);\n        let audioUrl = '';\n        let protect = true;\n        // 没有匹配到带音频的视频，需要加上audioUrl\n        if (!mimeType.match(/.*codecs=.*webm.*/g)) {\n          audioUrl = webmAudioUrl;\n        }\n        if (!mimeType.match(/.*codecs=.*mp4.*/g)) {\n          audioUrl = mp4AudioUrl;\n        }\n        return {\n          downloadUrl: videoUrl,\n          qualityLabel,\n          quality: qualityVideoItem.quality,\n          protect,\n          audioUrl\n        };\n      }\n    }\n    function matchDefaultUrlInQualityList(qualityList, downloadUrl) {\n      let itag = Utils.queryURLParams(downloadUrl, 'itag');\n      // console.log('itag------',itag);\n      if (!itag) {\n        return qualityList;\n      }\n      let qualityLabel = getResolutionFromItag(itag);\n\n      // console.log('qualityLabel------',qualityLabel);\n      if (!qualityLabel) {\n        return qualityList;\n      }\n      qualityList.forEach(item => {\n        if (item.qualityLabel && item.qualityLabel.toLowerCase().indexOf(qualityLabel.toLowerCase()) > -1) {\n          // console.log('match----qualityLabel------',qualityLabel);\n          item.downloadUrl = downloadUrl;\n          item.audioUrl = '';\n          item.protect = false;\n        }\n        return item;\n      });\n      return qualityList;\n    }\n    function getResolutionFromItag(itag) {\n      const resolutions = {\n        5: '240p',\n        6: '270p',\n        13: '144p',\n        17: '144p',\n        18: '360p',\n        22: '720p',\n        34: '360p',\n        35: '480p',\n        36: '240p',\n        37: '1080p',\n        38: '3072p',\n        43: '360p',\n        44: '480p',\n        45: '720p',\n        46: '1080p',\n        59: '480p',\n        78: '480p',\n        82: '360p',\n        83: '480p',\n        84: '720p',\n        85: '1080p',\n        91: '144p',\n        92: '240p',\n        93: '360p',\n        94: '480p',\n        95: '720p',\n        96: '1080p',\n        100: '360p',\n        101: '480p',\n        102: '720p',\n        132: '240p',\n        151: '720p',\n        133: '240p',\n        134: '360p',\n        135: '480p',\n        136: '720p',\n        137: '1080p',\n        138: '2160p',\n        160: '144p',\n        212: '480p',\n        213: '480p',\n        214: '720p',\n        215: '720p',\n        216: '1080p',\n        217: '1080p',\n        264: '1440p',\n        266: '2160p',\n        298: '720p',\n        299: '1080p',\n        399: '1080p',\n        398: '720p',\n        397: '480p',\n        396: '360p',\n        395: '240p',\n        313: '2160p',\n        337: '2160p HDR'\n      };\n      return resolutions[itag];\n    }\n    function handleYTRandomPathUuidToDefinedObj(jsPath) {\n      try {\n        if (jsPath) {\n          ytRandomBaseJs = jsPath;\n          let tempRandomCode = parseBaseJsPath(jsPath);\n          if (tempRandomCode) {\n            definedObj.randomPathUuid = tempRandomCode;\n          }\n        }\n      } catch (error) {}\n    }\n    function parseBaseJsPath(jsPath) {\n      if (!jsPath) {\n        return '';\n      }\n      let tempRandomCode = '';\n      let pathArr = jsPath.split('/');\n      if (jsPath.startsWith('/')) {\n        tempRandomCode = pathArr[3];\n      } else {\n        tempRandomCode = pathArr[2];\n      }\n      return tempRandomCode;\n    }\n    function checkAdForYoutube(downloadUrl) {\n      if (downloadUrl && downloadUrl.indexOf('pltype=adhost') > -1) {\n        return true;\n      }\n      const adPlayer = document.querySelector('#container .video-ads');\n      if (adPlayer && !isHidden(adPlayer)) {\n        return true;\n      }\n      return false;\n    }\n\n    /**\n     * youtube 移动端(PC)video标签\n     * @returns url\n     */\n    function getYoutubeVideoSourceByDom() {\n      let videoDom = document.querySelector('.html5-video-player .html5-video-container video');\n      if (videoDom) {\n        // console.log('----------------',videoDom);\n        return videoDom.getAttribute('src');\n      }\n      return '';\n    }\n    function getYoutubeVideoTitleByDom() {\n      const titleMobileDom = document.querySelector('.slim-video-metadata-header .slim-video-information-content .slim-video-information-title');\n      if (titleMobileDom) {\n        return titleMobileDom.textContent;\n      }\n      const titlePcDom = document.querySelector('#title h1.style-scope');\n      if (titlePcDom) {\n        return titlePcDom.textContent;\n      }\n      return '';\n    }\n    function getYoutubeVideoPosterByDom() {\n      const overlayImg = document.querySelector('.ytp-cued-thumbnail-overlay-image');\n      // console.log(overlayImg)\n      if (overlayImg) {\n        // console.log('overlayImg-------',overlayImg);\n        let imgText = overlayImg.getAttribute('style');\n        if (imgText) {\n          return Utils.matchUrlInString(imgText);\n        }\n      }\n      const overlayImgPc = document.querySelector('.html5-video-player .ytp-cued-thumbnail-overlay .ytp-cued-thumbnail-overlay-image');\n      if (overlayImgPc) {\n        let imgText = overlayImgPc.getAttribute('style');\n        if (imgText) {\n          return Utils.matchUrlInString(imgText);\n        }\n      }\n      const bgStyle = document.querySelector('.video-wrapper .background-style-black');\n      if (bgStyle) {\n        let imgText = bgStyle.getAttribute('style');\n        if (imgText) {\n          return Utils.matchUrlInString(imgText);\n        }\n      }\n      return '';\n    }\n\n    /**\n     * \n     * @param {String} pathUuid   /s/player/7862ca1f/player_ias.vflset/zh_CN/base.js中7862ca1f关键字符串\n     * @param {String} pathUrl    base.js的路径/s/player/7862ca1f/player_ias.vflset/zh_CN/base.js\n     * @returns \n     */\n    function fetchYoutubeDecodeFun(pathUuid, pathUrl) {\n      // console.log('fetchYoutubeDecodeFun-----pathUuid=',pathUuid, ',pathUrl=',pathUrl);\n      pathUrl = window.location.href;\n      return new Promise((resolve, reject) => {\n        if (isContent) {\n          // console.log('fetchYoutubeDecodeFun-----true');\n          browser.runtime.sendMessage({\n            from: 'sniffer',\n            operate: 'fetchYoutubeDecodeFun',\n            pathUuid: pathUuid,\n            pathUrl\n          }, response => {\n            // console.log('fetchYoutubeDecodeFun-----true----',response)\n            let decodeFunObj = response && response.decodeFunObj ? response.decodeFunObj : {};\n            resolve(decodeFunObj);\n          });\n        } else {\n          // console.log('fetchYoutubeDecodeFun-----false');\n          const pid = Math.random().toString(36).substring(2, 9);\n          const callback = e => {\n            if (e.data.pid !== pid || e.data.name !== 'GET_YOUTUBE_DECODE_FUN_RESP') return;\n            // console.log('fetchYoutubeDecodeFun-----false----',e.data)\n            resolve(e.data.decodeFunObj);\n            window.removeEventListener('message', callback);\n          };\n          window.postMessage({\n            id: pid,\n            pid: pid,\n            name: 'GET_YOUTUBE_DECODE_FUN',\n            pathUuid,\n            pathUrl\n          });\n          window.addEventListener('message', callback);\n        }\n      });\n    }\n\n    /**\n     * \n     * @param {String} pathUuid   /s/player/7862ca1f/player_ias.vflset/zh_CN/base.js中7862ca1f关键字符串\n     * @param {String} pathUrl    base.js的路径/s/player/7862ca1f/player_ias.vflset/zh_CN/base.js\n     * @returns \n     */\n    function saveYoutubeDecodeFun(pathUuid, randomFunStr, randomSpeedFunStr) {\n      console.log('saveYoutubeDecodeFun-----pathUuid=', pathUuid, ',randomFunStr=', randomFunStr);\n      if (isContent) {\n        console.log('saveYoutubeDecodeFun-----true');\n        browser.runtime.sendMessage({\n          from: 'sniffer',\n          operate: 'saveYoutubeDecodeFun',\n          pathUuid: pathUuid,\n          randomFunStr,\n          randomSpeedFunStr\n        }, response => {\n          console.log('saveYoutubeDecodeFun---------', response);\n        });\n      } else {\n        console.log('saveYoutubeDecodeFun-----false');\n        const pid = Math.random().toString(36).substring(2, 9);\n        const callback = e => {\n          if (e.data.pid !== pid || e.data.name !== 'SAVE_YOUTUBE_DECODE_FUN_STR_RESP') return;\n          console.log('saveYoutubeDecodeFun---------', e.data.decodeFun);\n          window.removeEventListener('message', callback);\n        };\n        window.postMessage({\n          id: pid,\n          pid: pid,\n          name: 'SAVE_YOUTUBE_DECODE_FUN_STR',\n          pathUuid,\n          randomFunStr,\n          randomSpeedFunStr\n        });\n        window.addEventListener('message', callback);\n      }\n    }\n    async function startFetchYoutubeFunStr() {\n      // console.log('startFetchYoutubeFunStr-------start-------------',host);\n      if (!(host.indexOf('youtube.com') > -1)) {\n        // console.log('startFetchYoutubeFunStr-------is not youtube-------------');\n        return;\n      }\n      queryYoutubePlayerPath((pathUuid, jsPath) => {\n        let decodeObjStr = window.localStorage.getItem('__stay_decode_str');\n        if (decodeObjStr) {\n          console.log('startFetchYoutubeFunStr------', pathUuid, jsPath, decodeObjStr);\n          decodeSignatureCipher = JSON.parse(decodeObjStr);\n          // pathUuid与本地匹配\n          if (decodeSignatureCipher.pathUuid && decodeSignatureCipher.pathUuid == pathUuid) {\n            if (decodeSignatureCipher.decodeFunStr) {\n              handleDecodeSignatureAndPush();\n              // 异步请求一次服务端的code, 获取服务端最新配置\n              handleFetchYoutubePlayer(pathUuid, jsPath, false);\n            } else {\n              handleFetchYoutubePlayer(pathUuid, jsPath, true);\n            }\n          } else {\n            // 本地不匹配器\n            handleFetchYoutubePlayer(pathUuid, jsPath, true);\n          }\n        } else {\n          handleFetchYoutubePlayer(pathUuid, jsPath, true);\n        }\n      });\n    }\n    function queryYoutubePlayerPath(callback) {\n      if (window.ytplayer) {\n        ytRandomBaseJs = window.ytplayer.bootstrapWebPlayerContextConfig ? window.ytplayer.bootstrapWebPlayerContextConfig.jsUrl : '';\n      }\n      if (ytRandomBaseJs) {\n        ytBaseJSUuid = parseBaseJsPath(ytRandomBaseJs);\n        callback(ytBaseJSUuid, ytRandomBaseJs);\n      } else {\n        for (let i = 1; i < 10; i++) {\n          let timer;\n          (function (i) {\n            timer = setTimeout(() => {\n              playerBase = document.querySelector('#player-base');\n              // console.log('queryYoutubePlayer------i-----',i, new Date().getTime());\n              if (playerBase && playerBase.getAttribute('src')) {\n                // console.log('queryYoutubePlayer---iiiiiii---break-----');\n                ytRandomBaseJs = playerBase.getAttribute('src');\n                ytBaseJSUuid = parseBaseJsPath(ytRandomBaseJs);\n                callback(ytBaseJSUuid, ytRandomBaseJs);\n                // handleFetchYoutubePlayer(pathUuid, jsPath, true)\n                timerArr.forEach(timerItem => {\n                  // console.log('clearTimer---------timerItem-----',timerItem);\n                  clearTimeout(timerItem);\n                });\n              }\n            }, i * 200);\n          })(i);\n          if (playerBase && playerBase.getAttribute('src')) {\n            break;\n          }\n          timerArr.push(timer);\n        }\n      }\n    }\n\n    /**\n     * {pathUuid:pathUuid, decodeStr: decodeSignatureCipher}\n     * @param {String} pathUuid \n     * @param {String} jsPath \n     * @param {boolean} shouldDecode   是否需要执行解密方法\n     */\n    async function handleFetchYoutubePlayer(pathUuid, jsPath, shouldDecode) {\n      let decodeFunObj = await fetchYoutubeDecodeFun(pathUuid, jsPath);\n      console.log('handleFetchYoutubePlayer------', decodeFunObj);\n      if (decodeFunObj && Object.keys(decodeFunObj).length) {\n        // 200匹配到方法，可解析，\n        if (decodeFunObj.status && 200 == decodeFunObj.status) {\n          setLocalYTRandomFunStr(pathUuid, decodeFunObj.decodeFunStr, decodeFunObj.decodeSpeedFunStr);\n          if (shouldDecode) {\n            handleDecodeSignatureAndPush();\n          }\n        } else {\n          // 404未匹配到，需要重新从base中匹配方法\n          fetchCurrentYtRandomStr(pathUuid, jsPath);\n        }\n      } else {\n        console.log('handleFetchYoutubePlayer---decodeFunObj--null-----');\n        fetchCurrentYtRandomStr(pathUuid, jsPath);\n      }\n    }\n    function setLocalYTRandomFunStr(pathUuid, decodeFunStr, decodeSpeedFunStr) {\n      decodeSignatureCipher = {\n        pathUuid,\n        decodeFunStr,\n        decodeSpeedFunStr\n      };\n      definedObj.decodeFunStr = decodeFunStr;\n      definedObj.decodeSpeedFunStr = decodeSpeedFunStr;\n      window.localStorage.setItem('__stay_decode_str', JSON.stringify(decodeSignatureCipher));\n    }\n    async function fetchCurrentYtRandomStr(pathUuid, jsPath) {\n      if (!jsPath || !pathUuid) {\n        setLocalYTRandomFunStr(pathUuid, '', '');\n        console.log('fetchCurrentYtRandomStr--------pathUuid=', pathUuid, ',jsPath=', jsPath);\n        return;\n      }\n      function testYtDecodeFun(randomFunStr) {\n        try {\n          let decodeFun = new Function('return ' + randomFunStr);\n          let signature = '%3D%3DQmbTSWlgLuztoft4F_uqQieS7_jBtboKab9zSp5WRdSAiApcTRtZLjBmFtzLXphJ0x_haWmWIhVtdAg8jD1rsKkRKAhIQRw8JQ0qOAOA';\n          // eslint-disable-next-line max-len\n          let sourceUrl = 'https://rr5---sn-o097znsk.googlevideo.com/videoplayback%3Fexpire%3D1679042695%26ei%3DJ9QTZJ6FFKeksfIPkaSL-Aw%26ip%3D2602%253Afeda%253A30%253Aae86%253A40e7%253A53ff%253Afe8b%253A9a97%26id%3Do-AI3u_uLu7PqvSwoVFwTG0fSk-puen4XBHxlLqco9MH8Q%26itag%3D135%26aitags%3D133%252C134%252C135%252C160%252C242%252C243%252C244%252C278%26source%3Dyoutube%26requiressl%3Dyes%26mh%3D_m%26mm%3D31%252C26%26mn%3Dsn-o097znsk%252Csn-a5meknzk%26ms%3Dau%252Conr%26mv%3Dm%26mvi%3D5%26pl%3D44%26initcwndbps%3D2135000%26vprv%3D1%26mime%3Dvideo%252Fmp4%26ns%3DwhOrAPi40PxLIKHeHvAaoDIL%26gir%3Dyes%26clen%3D18438908%26dur%3D584.533%26lmt%3D1635010443575003%26mt%3D1679020854%26fvip%3D5%26keepalive%3Dyes%26fexp%3D24007246%26c%3DMWEB%26txp%3D5432434%26n%3D3BrEIxrXFc7SkC%26sparams%3Dexpire%252Cei%252Cip%252Cid%252Caitags%252Csource%252Crequiressl%252Cvprv%252Cmime%252Cns%252Cgir%252Cclen%252Cdur%252Clmt%26lsparams%3Dmh%252Cmm%252Cmn%252Cms%252Cmv%252Cmvi%252Cpl%252Cinitcwndbps%26lsig%3DAG3C_xAwRgIhAKYBlOvRZiHPnnEJJ5foNn7LZU1cgGvfyO3WU9TjETfZAiEA6PvSgRq0gdcsBBTTj0VHXybmMwb-ouW2TVIYGmG_PG0%253D';\n          signature = decodeFun()(decodeURIComponent(signature));\n          sourceUrl = `${decodeURIComponent(sourceUrl)}&sig=${signature}`;\n          // console.log(sourceUrl);\n          if (sourceUrl) {\n            return true;\n          }\n        } catch (error) {}\n        return false;\n      }\n      try {\n        let jsResponse = await fetch(`https://m.youtube.com${jsPath}`);\n        let jsText = await jsResponse.text();\n        if (!jsText) {\n          setLocalYTRandomFunStr(pathUuid, '', '');\n          console.log('handleFetchYoutubePlayer------jsText is null');\n          return;\n        }\n        // eslint-disable-next-line no-useless-escape\n        let randomArr = jsText.match(/[a-zA-Z0-9$]+\\=function\\(a\\)\\{[\\r\\n|a]\\=a\\.split\\(\\\"\\\"\\).*return\\s+a\\.join\\(\\\"\\\"\\)\\};/g);\n        console.log(randomArr);\n        let randomFunStr = '';\n        if (randomArr && randomArr.length) {\n          randomFunStr = randomArr[0];\n          // console.log(randomFunStr);\n        }\n\n        if (!randomFunStr) {\n          setLocalYTRandomFunStr(pathUuid, '', '');\n          console.log('handleFetchYoutubePlayer---1---randomFunStr is null');\n          return;\n        }\n        let subRandomStr = '';\n        // eslint-disable-next-line no-useless-escape\n        let subRandomArr = jsText.match(/var\\s+[a-zA-Z0-9$]{2}\\=\\{[a-zA-Z0-9]{2}\\:function[\\s\\S]*(a\\.reverse\\(\\)|splice\\(0\\,b\\)|length\\]\\=c)\\}\\};/g);\n        if (subRandomArr && subRandomArr.length) {\n          subRandomStr = subRandomArr[0];\n          // console.log(subRandomStr);\n        }\n\n        if (!subRandomStr) {\n          setLocalYTRandomFunStr(pathUuid, '', '');\n          console.log('handleFetchYoutubePlayer------subRandomStr is null');\n          return;\n        }\n        // eslint-disable-next-line no-useless-escape\n        randomFunStr = randomFunStr.replace(/[a-zA-Z0-9$]+\\=function\\(a\\)\\{/g, 'function decodeFun(a){' + subRandomStr);\n        if (!randomFunStr) {\n          setLocalYTRandomFunStr(pathUuid, '', '');\n          console.log('handleFetchYoutubePlayer---2---randomFunStr is null');\n          return;\n        }\n        // console.log('randomFunStr-------',randomFunStr);\n        let randomSpeedFunStr = '';\n        // eslint-disable-next-line no-useless-escape\n        let randomSpeedArr = jsText.match(/[a-zA-Z0-9$]+\\=function\\(a\\)\\{var\\sb=a\\.split\\(\\\"\\\"\\)[\\s\\S]*\\}return\\sb\\.join\\(\\\"\\\"\\)\\};/g);\n        if (randomSpeedArr && randomSpeedArr.length) {\n          randomSpeedFunStr = randomSpeedArr[0];\n          // console.log(randomSpeedFunStr);\n        }\n\n        if (randomSpeedFunStr) {\n          // eslint-disable-next-line no-useless-escape\n          randomSpeedFunStr = randomSpeedFunStr.replace(/^[a-zA-Z0-9$]+\\=function\\(a\\)\\{/g, 'function decodeSpeedFun(a){');\n          // console.log('randomSpeedFunStr------',randomSpeedFunStr);\n        }\n\n        if (testYtDecodeFun(randomFunStr)) {\n          saveYoutubeDecodeFun(pathUuid, randomFunStr, randomSpeedFunStr);\n        } else {\n          console.log('handleFetchYoutubePlayer------testYtDecodeFun-------false', randomFunStr);\n        }\n        setLocalYTRandomFunStr(pathUuid, randomFunStr, randomSpeedFunStr);\n      } catch (error) {\n        console.error(jsPath, error);\n        setLocalYTRandomFunStr(pathUuid, '', '');\n      }\n    }\n    async function fetchSnifferConfig() {\n      if (!isStayAround && !isLoadingAround) {\n        isLoadingAround = true;\n        isStayAround = await getStayAround();\n        isLoadingAround = false;\n      }\n      if (!longPressStatus && !isLoadingLongPressStatus) {\n        isLoadingLongPressStatus = true;\n        longPressStatus = await getLongPressStatus();\n        isLoadingLongPressStatus = false;\n      }\n    }\n    function fetchIframeVideoInfo() {\n      if (window === window.top) {\n        // console.log('fetchIframeVideoInfo---------not in iframe----------');\n        // 当前页面不在 <iframe> 中, 接收iframe中video信息\n        window.addEventListener('message', event => {\n          let messagePid = event.data.pid;\n          let name = event.data.name;\n          // console.log('fetchIframeVideoInfo-----------event------',event)\n          if (name === 'PUSH_IFRAME_VIDEO_INFO_TO_PARENT') {\n            let pid = event.data.pid;\n            let videoReact = event.data.videoReact;\n            let iframeVideoInfo = event.data.iframeVideoInfo;\n            // console.log('fetchIframeVideoInfo----PUSH_IFRAME_VIDEO_INFO_TO_PARENT-------', iframeVideoInfo, videoReact)\n            const iframeDom = document.querySelector('iframe');\n            // console.log('fetchIframeVideoInfo----iframeDom-------', iframeDom)\n            if (iframeDom && iframeDom.getBoundingClientRect()) {\n              videoReact.x = iframeDom.getBoundingClientRect().x;\n              videoReact.y = iframeDom.getBoundingClientRect().y;\n            }\n            addSinfferModal(null, videoReact, iframeVideoInfo);\n          }\n        });\n      } else {\n        // 当前页面在 <iframe> 中\n        // 向父页面发送消息，请求获取父页面域名\n        const pid = Math.random().toString(36).substring(2, 9);\n        // window.parent.postMessage({pid:pid, name: 'GET_YOUTUBE_DECODE_FUN_RESP'}, '*');\n        // window.addEventListener('message', (event)=>{\n        //   let messagePid = event.data.pid;\n        //   if(messagePid == pid){\n\n        //   }\n        // })\n      }\n    }\n\n    async function startSnifferVideoInfoOnPage(complate) {\n      await fetchSnifferConfig();\n      startFetchYoutubeFunStr();\n      fetchIframeVideoInfo();\n      startFindVideoInfo(complate);\n    }\n    startSnifferVideoInfoOnPage(false);\n    document.onreadystatechange = () => {\n      // console.log('document.readyState==',document.readyState)\n      if (document.readyState === 'complete') {\n        // console.log('readyState-------------------', document.readyState)\n        startSnifferVideoInfoOnPage(true);\n      }\n    };\n\n    /* eslint-disable */\n    Object.defineProperty(definedObj, 'randomPathUuid', {\n      get: function () {\n        return randomPathUuid;\n      },\n      set: function (newValue) {\n        randomPathUuid = newValue;\n        //监听ytBaseJSUuid如果发生变化，则需要从basejs中重新匹配解密方法\n        if (newValue != ytBaseJSUuid) {\n          console.log('randomPathUuid--!==-newValue-----', randomPathUuid);\n          ytBaseJSUuid = newValue;\n          handleFetchYoutubePlayer(ytBaseJSUuid, ytRandomBaseJs, false);\n        }\n      }\n    });\n    Object.defineProperty(definedObj, 'decodeFunStr', {\n      get: function () {\n        return decodeFunStr;\n      },\n      set: function (newValue) {\n        decodeFunStr = newValue;\n        if (decodeFunStr) {\n          handleDecodeSignatureAndPush();\n        }\n      }\n    });\n  }\n  let videoPageUrl = window.location.href;\n  let videoInfoList = [];\n  let videoLinkSet = new Set();\n  window.addEventListener('message', e => {\n    if (!e || !e.data || !e.data.name) return;\n    const name = e.data.name;\n    // console.log('snifffer.user-----\x3ee.data.name=',name);\n    // @discarded  VIDEO_LINK_CAPTURE\n    if (name === 'VIDEO_LINK_CAPTURE') {\n      let tempSet = e.data.urls ? e.data.urls : new Set();\n      videoLinkSet = tempSet;\n      let message = {\n        from: 'sniffer',\n        operate: 'VIDEO_INFO_PUSH',\n        videoPageUrl,\n        videoLinkSet\n      };\n      browser.runtime.sendMessage(message, response => {});\n    } else if (name === 'VIDEO_INFO_CAPTURE') {\n      let videoInfoListTemp = e.data.videoList ? e.data.videoList : [];\n      videoInfoList = videoInfoListTemp;\n      let message = {\n        from: 'sniffer',\n        operate: 'VIDEO_INFO_PUSH',\n        videoPageUrl,\n        videoInfoList\n      };\n      browser.runtime.sendMessage(message, response => {});\n    } else if (name === 'GET_STAY_AROUND') {\n      let pid = e.data.pid;\n      browser.runtime.sendMessage({\n        from: 'sniffer',\n        operate: 'GET_STAY_AROUND'\n      }, response => {\n        window.postMessage({\n          pid: pid,\n          name: 'GET_STAY_AROUND_RESP',\n          response: response\n        });\n      });\n    } else if (name === 'GET_LONG_PRESS_STATUS') {\n      let pid = e.data.pid;\n      browser.runtime.sendMessage({\n        from: 'popup',\n        operate: 'getLongPressStatus'\n      }, response => {\n        let longPressStatusRes = response && response.longPressStatus ? response.longPressStatus : 'on';\n        window.postMessage({\n          pid: pid,\n          name: 'GET_LONG_PRESS_STATUS_RESP',\n          longPressStatusRes\n        });\n      });\n    } else if (name === 'GET_YOUTUBE_DECODE_FUN') {\n      let pid = e.data.pid;\n      let pathUuid = e.data.pathUuid;\n      let pathUrl = e.data.pathUrl;\n      browser.runtime.sendMessage({\n        from: 'sniffer',\n        operate: 'fetchYoutubeDecodeFun',\n        pathUrl,\n        pathUuid\n      }, response => {\n        // console.log('fetchYoutubeDecodeFun------response----',response);\n        let decodeFunObj = response && response.decodeFunObj ? response.decodeFunObj : {};\n        window.postMessage({\n          pid: pid,\n          name: 'GET_YOUTUBE_DECODE_FUN_RESP',\n          decodeFunObj: decodeFunObj\n        });\n      });\n    } else if (name === 'SAVE_YOUTUBE_DECODE_FUN_STR') {\n      let pid = e.data.pid;\n      let pathUuid = e.data.pathUuid;\n      let randomFunStr = e.data.randomFunStr;\n      let randomSpeedFunStr = e.data.randomSpeedFunStr;\n      browser.runtime.sendMessage({\n        from: 'sniffer',\n        operate: 'saveYoutubeDecodeFun',\n        pathUuid,\n        randomFunStr,\n        randomSpeedFunStr\n      }, response => {\n        let decodeFun = '';\n        window.postMessage({\n          pid: pid,\n          name: 'SAVE_YOUTUBE_DECODE_FUN_STR_RESP',\n          decodeFun\n        });\n      });\n    } else if (name === 'GET_ORIGIN_FROM_IFRAME') {\n      let pid = e.data.pid;\n      // 将父页面域名发送给子页面\n      e.source.postMessage({\n        name: 'RESP_ORIGIN_FROM_IFRAME',\n        parentOrigin: window.location.origin,\n        pid\n      }, e.origin);\n    }\n    // 接收iframe中video信息\n    else if (name === 'PUSH_VIDEO_INFO_TO_PARENT') {\n      let pid = e.data.pid;\n      let videoReact = e.data.videoReact;\n      let iframeVideoInfo = e.data.videoInfo;\n      // console.log('iframeVideoInfo-------', iframeVideoInfo, videoReact, window.location.origin)\n      // window.postMessage({pid:pid, name: 'GET_IFRAME_VIDEO_INFO', videoReact, iframeVideoInfo}, '*');\n      browser.runtime.sendMessage({\n        from: 'sniffer',\n        operate: 'PUSH_IFRAME_VIDEO_INFO_TO_BG',\n        iframeVideoInfo,\n        videoReact\n      }, response => {\n        // console.log('PUSH_IFRAME_VIDEO_INFO_TO_BG-----response----',response);\n      });\n    }\n  });\n  browser.runtime.onMessage.addListener((request, sender, sendResponse) => {\n    const requestFrom = request.from;\n    const operate = request.operate;\n    if ('background' === requestFrom) {\n      if ('PUSH_IFRAME_VIDEO_INFO_TO_PARENT' == operate) {\n        let videoReact = request.videoReact;\n        let iframeVideoInfo = request.iframeVideoInfo;\n        // console.log('PUSH_IFRAME_VIDEO_INFO_TO_PARENT------', videoReact, iframeVideoInfo)\n\n        const pid = Math.random().toString(36).substring(2, 9);\n        window.postMessage({\n          pid: pid,\n          name: 'PUSH_IFRAME_VIDEO_INFO_TO_PARENT',\n          videoReact,\n          iframeVideoInfo\n        });\n        sendResponse({\n          success: 'true'\n        });\n      }\n    }\n    return true;\n  });\n})();\n\n//# sourceURL=webpack://stay-popup/./src/sniffer/sniffer.user.js?")},"./node_modules/core-js/internals/a-callable.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");\nvar tryToString = __webpack_require__(/*! ../internals/try-to-string */ "./node_modules/core-js/internals/try-to-string.js");\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw $TypeError(tryToString(argument) + \' is not a function\');\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/a-callable.js?')},"./node_modules/core-js/internals/a-possible-prototype.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var isCallable = __webpack_require__(/*! ../internals/is-callable */ \"./node_modules/core-js/internals/is-callable.js\");\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'object' || isCallable(argument)) return argument;\n  throw $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/a-possible-prototype.js?")},"./node_modules/core-js/internals/an-instance.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ \"./node_modules/core-js/internals/object-is-prototype-of.js\");\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw $TypeError('Incorrect invocation');\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/an-instance.js?")},"./node_modules/core-js/internals/an-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var isObject = __webpack_require__(/*! ../internals/is-object */ \"./node_modules/core-js/internals/is-object.js\");\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw $TypeError($String(argument) + ' is not an object');\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/an-object.js?")},"./node_modules/core-js/internals/array-includes.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");\nvar toAbsoluteIndex = __webpack_require__(/*! ../internals/to-absolute-index */ "./node_modules/core-js/internals/to-absolute-index.js");\nvar lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/array-includes.js?')},"./node_modules/core-js/internals/array-set-length.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ \"./node_modules/core-js/internals/descriptors.js\");\nvar isArray = __webpack_require__(/*! ../internals/is-array */ \"./node_modules/core-js/internals/is-array.js\");\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/array-set-length.js?")},"./node_modules/core-js/internals/classof-raw.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ \"./node_modules/core-js/internals/function-uncurry-this.js\");\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/classof-raw.js?")},"./node_modules/core-js/internals/classof.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var TO_STRING_TAG_SUPPORT = __webpack_require__(/*! ../internals/to-string-tag-support */ \"./node_modules/core-js/internals/to-string-tag-support.js\");\nvar isCallable = __webpack_require__(/*! ../internals/is-callable */ \"./node_modules/core-js/internals/is-callable.js\");\nvar classofRaw = __webpack_require__(/*! ../internals/classof-raw */ \"./node_modules/core-js/internals/classof-raw.js\");\nvar wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ \"./node_modules/core-js/internals/well-known-symbol.js\");\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/classof.js?")},"./node_modules/core-js/internals/copy-constructor-properties.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");\nvar ownKeys = __webpack_require__(/*! ../internals/own-keys */ "./node_modules/core-js/internals/own-keys.js");\nvar getOwnPropertyDescriptorModule = __webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js");\nvar definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/copy-constructor-properties.js?')},"./node_modules/core-js/internals/create-non-enumerable-property.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");\nvar definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");\nvar createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/create-non-enumerable-property.js?')},"./node_modules/core-js/internals/create-property-descriptor.js":module=>{eval("module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/create-property-descriptor.js?")},"./node_modules/core-js/internals/define-built-in.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");\nvar definePropertyModule = __webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js");\nvar makeBuiltIn = __webpack_require__(/*! ../internals/make-built-in */ "./node_modules/core-js/internals/make-built-in.js");\nvar defineGlobalProperty = __webpack_require__(/*! ../internals/define-global-property */ "./node_modules/core-js/internals/define-global-property.js");\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/define-built-in.js?')},"./node_modules/core-js/internals/define-global-property.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/define-global-property.js?')},"./node_modules/core-js/internals/descriptors.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");\n\n// Detect IE8\'s incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/descriptors.js?')},"./node_modules/core-js/internals/document-all.js":module=>{eval("var documentAll = typeof document == 'object' && document.all;\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;\n\nmodule.exports = {\n  all: documentAll,\n  IS_HTMLDDA: IS_HTMLDDA\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/document-all.js?")},"./node_modules/core-js/internals/document-create-element.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");\nvar isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");\n\nvar document = global.document;\n// typeof document.createElement is \'object\' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/document-create-element.js?')},"./node_modules/core-js/internals/does-not-exceed-safe-integer.js":module=>{eval("var $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/does-not-exceed-safe-integer.js?")},"./node_modules/core-js/internals/dom-exception-constants.js":module=>{eval("module.exports = {\n  IndexSizeError: { s: 'INDEX_SIZE_ERR', c: 1, m: 1 },\n  DOMStringSizeError: { s: 'DOMSTRING_SIZE_ERR', c: 2, m: 0 },\n  HierarchyRequestError: { s: 'HIERARCHY_REQUEST_ERR', c: 3, m: 1 },\n  WrongDocumentError: { s: 'WRONG_DOCUMENT_ERR', c: 4, m: 1 },\n  InvalidCharacterError: { s: 'INVALID_CHARACTER_ERR', c: 5, m: 1 },\n  NoDataAllowedError: { s: 'NO_DATA_ALLOWED_ERR', c: 6, m: 0 },\n  NoModificationAllowedError: { s: 'NO_MODIFICATION_ALLOWED_ERR', c: 7, m: 1 },\n  NotFoundError: { s: 'NOT_FOUND_ERR', c: 8, m: 1 },\n  NotSupportedError: { s: 'NOT_SUPPORTED_ERR', c: 9, m: 1 },\n  InUseAttributeError: { s: 'INUSE_ATTRIBUTE_ERR', c: 10, m: 1 },\n  InvalidStateError: { s: 'INVALID_STATE_ERR', c: 11, m: 1 },\n  SyntaxError: { s: 'SYNTAX_ERR', c: 12, m: 1 },\n  InvalidModificationError: { s: 'INVALID_MODIFICATION_ERR', c: 13, m: 1 },\n  NamespaceError: { s: 'NAMESPACE_ERR', c: 14, m: 1 },\n  InvalidAccessError: { s: 'INVALID_ACCESS_ERR', c: 15, m: 1 },\n  ValidationError: { s: 'VALIDATION_ERR', c: 16, m: 0 },\n  TypeMismatchError: { s: 'TYPE_MISMATCH_ERR', c: 17, m: 1 },\n  SecurityError: { s: 'SECURITY_ERR', c: 18, m: 1 },\n  NetworkError: { s: 'NETWORK_ERR', c: 19, m: 1 },\n  AbortError: { s: 'ABORT_ERR', c: 20, m: 1 },\n  URLMismatchError: { s: 'URL_MISMATCH_ERR', c: 21, m: 1 },\n  QuotaExceededError: { s: 'QUOTA_EXCEEDED_ERR', c: 22, m: 1 },\n  TimeoutError: { s: 'TIMEOUT_ERR', c: 23, m: 1 },\n  InvalidNodeTypeError: { s: 'INVALID_NODE_TYPE_ERR', c: 24, m: 1 },\n  DataCloneError: { s: 'DATA_CLONE_ERR', c: 25, m: 1 }\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/dom-exception-constants.js?")},"./node_modules/core-js/internals/engine-user-agent.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ \"./node_modules/core-js/internals/get-built-in.js\");\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/engine-user-agent.js?")},"./node_modules/core-js/internals/engine-v8-version.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");\nvar userAgent = __webpack_require__(/*! ../internals/engine-user-agent */ "./node_modules/core-js/internals/engine-user-agent.js");\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split(\'.\');\n  // in old Chrome, versions of V8 isn\'t V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/engine-v8-version.js?')},"./node_modules/core-js/internals/enum-bug-keys.js":module=>{eval("// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/enum-bug-keys.js?")},"./node_modules/core-js/internals/error-stack-clear.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ \"./node_modules/core-js/internals/function-uncurry-this.js\");\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String($Error(arg).stack); })('zxcasd');\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/error-stack-clear.js?")},"./node_modules/core-js/internals/export.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");\nvar getOwnPropertyDescriptor = (__webpack_require__(/*! ../internals/object-get-own-property-descriptor */ "./node_modules/core-js/internals/object-get-own-property-descriptor.js").f);\nvar createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");\nvar defineBuiltIn = __webpack_require__(/*! ../internals/define-built-in */ "./node_modules/core-js/internals/define-built-in.js");\nvar defineGlobalProperty = __webpack_require__(/*! ../internals/define-global-property */ "./node_modules/core-js/internals/define-global-property.js");\nvar copyConstructorProperties = __webpack_require__(/*! ../internals/copy-constructor-properties */ "./node_modules/core-js/internals/copy-constructor-properties.js");\nvar isForced = __webpack_require__(/*! ../internals/is-forced */ "./node_modules/core-js/internals/is-forced.js");\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? \'.\' : \'#\') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, \'sham\', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/export.js?')},"./node_modules/core-js/internals/fails.js":module=>{eval("module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/fails.js?")},"./node_modules/core-js/internals/function-bind-native.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var fails = __webpack_require__(/*! ../internals/fails */ \"./node_modules/core-js/internals/fails.js\");\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/function-bind-native.js?")},"./node_modules/core-js/internals/function-call.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var NATIVE_BIND = __webpack_require__(/*! ../internals/function-bind-native */ "./node_modules/core-js/internals/function-bind-native.js");\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/function-call.js?')},"./node_modules/core-js/internals/function-name.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ \"./node_modules/core-js/internals/descriptors.js\");\nvar hasOwn = __webpack_require__(/*! ../internals/has-own-property */ \"./node_modules/core-js/internals/has-own-property.js\");\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/function-name.js?")},"./node_modules/core-js/internals/function-uncurry-this.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var NATIVE_BIND = __webpack_require__(/*! ../internals/function-bind-native */ "./node_modules/core-js/internals/function-bind-native.js");\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/function-uncurry-this.js?')},"./node_modules/core-js/internals/get-built-in.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");\nvar isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/get-built-in.js?')},"./node_modules/core-js/internals/get-method.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var aCallable = __webpack_require__(/*! ../internals/a-callable */ "./node_modules/core-js/internals/a-callable.js");\nvar isNullOrUndefined = __webpack_require__(/*! ../internals/is-null-or-undefined */ "./node_modules/core-js/internals/is-null-or-undefined.js");\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/get-method.js?')},"./node_modules/core-js/internals/global.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof __webpack_require__.g == 'object' && __webpack_require__.g) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/global.js?")},"./node_modules/core-js/internals/has-own-property.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");\nvar toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/has-own-property.js?')},"./node_modules/core-js/internals/hidden-keys.js":module=>{eval("module.exports = {};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/hidden-keys.js?")},"./node_modules/core-js/internals/ie8-dom-define.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");\nvar fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");\nvar createElement = __webpack_require__(/*! ../internals/document-create-element */ "./node_modules/core-js/internals/document-create-element.js");\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement(\'div\'), \'a\', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/ie8-dom-define.js?')},"./node_modules/core-js/internals/indexed-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ \"./node_modules/core-js/internals/function-uncurry-this.js\");\nvar fails = __webpack_require__(/*! ../internals/fails */ \"./node_modules/core-js/internals/fails.js\");\nvar classof = __webpack_require__(/*! ../internals/classof-raw */ \"./node_modules/core-js/internals/classof-raw.js\");\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : $Object(it);\n} : $Object;\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/indexed-object.js?")},"./node_modules/core-js/internals/inherit-if-required.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");\nvar isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");\nvar setPrototypeOf = __webpack_require__(/*! ../internals/object-set-prototype-of */ "./node_modules/core-js/internals/object-set-prototype-of.js");\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven\'t completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/inherit-if-required.js?')},"./node_modules/core-js/internals/inspect-source.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");\nvar isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");\nvar store = __webpack_require__(/*! ../internals/shared-store */ "./node_modules/core-js/internals/shared-store.js");\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can\'t use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/inspect-source.js?')},"./node_modules/core-js/internals/internal-state.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var NATIVE_WEAK_MAP = __webpack_require__(/*! ../internals/weak-map-basic-detection */ "./node_modules/core-js/internals/weak-map-basic-detection.js");\nvar global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");\nvar isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");\nvar createNonEnumerableProperty = __webpack_require__(/*! ../internals/create-non-enumerable-property */ "./node_modules/core-js/internals/create-non-enumerable-property.js");\nvar hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");\nvar shared = __webpack_require__(/*! ../internals/shared-store */ "./node_modules/core-js/internals/shared-store.js");\nvar sharedKey = __webpack_require__(/*! ../internals/shared-key */ "./node_modules/core-js/internals/shared-key.js");\nvar hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");\n\nvar OBJECT_ALREADY_INITIALIZED = \'Object already initialized\';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError(\'Incompatible receiver, \' + TYPE + \' required\');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey(\'state\');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/internal-state.js?')},"./node_modules/core-js/internals/is-array.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var classof = __webpack_require__(/*! ../internals/classof-raw */ \"./node_modules/core-js/internals/classof-raw.js\");\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/is-array.js?")},"./node_modules/core-js/internals/is-callable.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var $documentAll = __webpack_require__(/*! ../internals/document-all */ \"./node_modules/core-js/internals/document-all.js\");\n\nvar documentAll = $documentAll.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = $documentAll.IS_HTMLDDA ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/is-callable.js?")},"./node_modules/core-js/internals/is-forced.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var fails = __webpack_require__(/*! ../internals/fails */ \"./node_modules/core-js/internals/fails.js\");\nvar isCallable = __webpack_require__(/*! ../internals/is-callable */ \"./node_modules/core-js/internals/is-callable.js\");\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/is-forced.js?")},"./node_modules/core-js/internals/is-null-or-undefined.js":module=>{eval("// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/is-null-or-undefined.js?")},"./node_modules/core-js/internals/is-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var isCallable = __webpack_require__(/*! ../internals/is-callable */ \"./node_modules/core-js/internals/is-callable.js\");\nvar $documentAll = __webpack_require__(/*! ../internals/document-all */ \"./node_modules/core-js/internals/document-all.js\");\n\nvar documentAll = $documentAll.all;\n\nmodule.exports = $documentAll.IS_HTMLDDA ? function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;\n} : function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/is-object.js?")},"./node_modules/core-js/internals/is-pure.js":module=>{eval("module.exports = false;\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/is-pure.js?")},"./node_modules/core-js/internals/is-symbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");\nvar isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");\nvar isPrototypeOf = __webpack_require__(/*! ../internals/object-is-prototype-of */ "./node_modules/core-js/internals/object-is-prototype-of.js");\nvar USE_SYMBOL_AS_UID = __webpack_require__(/*! ../internals/use-symbol-as-uid */ "./node_modules/core-js/internals/use-symbol-as-uid.js");\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == \'symbol\';\n} : function (it) {\n  var $Symbol = getBuiltIn(\'Symbol\');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/is-symbol.js?')},"./node_modules/core-js/internals/length-of-array-like.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var toLength = __webpack_require__(/*! ../internals/to-length */ "./node_modules/core-js/internals/to-length.js");\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/length-of-array-like.js?')},"./node_modules/core-js/internals/make-built-in.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var fails = __webpack_require__(/*! ../internals/fails */ \"./node_modules/core-js/internals/fails.js\");\nvar isCallable = __webpack_require__(/*! ../internals/is-callable */ \"./node_modules/core-js/internals/is-callable.js\");\nvar hasOwn = __webpack_require__(/*! ../internals/has-own-property */ \"./node_modules/core-js/internals/has-own-property.js\");\nvar DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ \"./node_modules/core-js/internals/descriptors.js\");\nvar CONFIGURABLE_FUNCTION_NAME = (__webpack_require__(/*! ../internals/function-name */ \"./node_modules/core-js/internals/function-name.js\").CONFIGURABLE);\nvar inspectSource = __webpack_require__(/*! ../internals/inspect-source */ \"./node_modules/core-js/internals/inspect-source.js\");\nvar InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ \"./node_modules/core-js/internals/internal-state.js\");\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (String(name).slice(0, 7) === 'Symbol(') {\n    name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/make-built-in.js?")},"./node_modules/core-js/internals/math-trunc.js":module=>{eval("var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/math-trunc.js?")},"./node_modules/core-js/internals/normalize-string-argument.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var toString = __webpack_require__(/*! ../internals/to-string */ \"./node_modules/core-js/internals/to-string.js\");\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/normalize-string-argument.js?")},"./node_modules/core-js/internals/object-define-property.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval("var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ \"./node_modules/core-js/internals/descriptors.js\");\nvar IE8_DOM_DEFINE = __webpack_require__(/*! ../internals/ie8-dom-define */ \"./node_modules/core-js/internals/ie8-dom-define.js\");\nvar V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(/*! ../internals/v8-prototype-define-bug */ \"./node_modules/core-js/internals/v8-prototype-define-bug.js\");\nvar anObject = __webpack_require__(/*! ../internals/an-object */ \"./node_modules/core-js/internals/an-object.js\");\nvar toPropertyKey = __webpack_require__(/*! ../internals/to-property-key */ \"./node_modules/core-js/internals/to-property-key.js\");\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/object-define-property.js?")},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");\nvar call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");\nvar propertyIsEnumerableModule = __webpack_require__(/*! ../internals/object-property-is-enumerable */ "./node_modules/core-js/internals/object-property-is-enumerable.js");\nvar createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");\nvar toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");\nvar toPropertyKey = __webpack_require__(/*! ../internals/to-property-key */ "./node_modules/core-js/internals/to-property-key.js");\nvar hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");\nvar IE8_DOM_DEFINE = __webpack_require__(/*! ../internals/ie8-dom-define */ "./node_modules/core-js/internals/ie8-dom-define.js");\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/object-get-own-property-descriptor.js?')},"./node_modules/core-js/internals/object-get-own-property-names.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval("var internalObjectKeys = __webpack_require__(/*! ../internals/object-keys-internal */ \"./node_modules/core-js/internals/object-keys-internal.js\");\nvar enumBugKeys = __webpack_require__(/*! ../internals/enum-bug-keys */ \"./node_modules/core-js/internals/enum-bug-keys.js\");\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/object-get-own-property-names.js?")},"./node_modules/core-js/internals/object-get-own-property-symbols.js":(__unused_webpack_module,exports)=>{eval("// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/object-get-own-property-symbols.js?")},"./node_modules/core-js/internals/object-is-prototype-of.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/object-is-prototype-of.js?')},"./node_modules/core-js/internals/object-keys-internal.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");\nvar hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");\nvar toIndexedObject = __webpack_require__(/*! ../internals/to-indexed-object */ "./node_modules/core-js/internals/to-indexed-object.js");\nvar indexOf = (__webpack_require__(/*! ../internals/array-includes */ "./node_modules/core-js/internals/array-includes.js").indexOf);\nvar hiddenKeys = __webpack_require__(/*! ../internals/hidden-keys */ "./node_modules/core-js/internals/hidden-keys.js");\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don\'t enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/object-keys-internal.js?')},"./node_modules/core-js/internals/object-property-is-enumerable.js":(__unused_webpack_module,exports)=>{"use strict";eval("\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/object-property-is-enumerable.js?")},"./node_modules/core-js/internals/object-set-prototype-of.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('/* eslint-disable no-proto -- safe */\nvar uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");\nvar anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");\nvar aPossiblePrototype = __webpack_require__(/*! ../internals/a-possible-prototype */ "./node_modules/core-js/internals/a-possible-prototype.js");\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can\'t work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || (\'__proto__\' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    setter = uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype, \'__proto__\').set);\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/object-set-prototype-of.js?')},"./node_modules/core-js/internals/ordinary-to-primitive.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");\nvar isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");\nvar isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === \'string\' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== \'string\' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw $TypeError("Can\'t convert object to primitive value");\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/ordinary-to-primitive.js?')},"./node_modules/core-js/internals/own-keys.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");\nvar uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "./node_modules/core-js/internals/function-uncurry-this.js");\nvar getOwnPropertyNamesModule = __webpack_require__(/*! ../internals/object-get-own-property-names */ "./node_modules/core-js/internals/object-get-own-property-names.js");\nvar getOwnPropertySymbolsModule = __webpack_require__(/*! ../internals/object-get-own-property-symbols */ "./node_modules/core-js/internals/object-get-own-property-symbols.js");\nvar anObject = __webpack_require__(/*! ../internals/an-object */ "./node_modules/core-js/internals/an-object.js");\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn(\'Reflect\', \'ownKeys\') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/own-keys.js?')},"./node_modules/core-js/internals/require-object-coercible.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var isNullOrUndefined = __webpack_require__(/*! ../internals/is-null-or-undefined */ "./node_modules/core-js/internals/is-null-or-undefined.js");\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw $TypeError("Can\'t call method on " + it);\n  return it;\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/require-object-coercible.js?')},"./node_modules/core-js/internals/shared-key.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");\nvar uid = __webpack_require__(/*! ../internals/uid */ "./node_modules/core-js/internals/uid.js");\n\nvar keys = shared(\'keys\');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/shared-key.js?')},"./node_modules/core-js/internals/shared-store.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");\nvar defineGlobalProperty = __webpack_require__(/*! ../internals/define-global-property */ "./node_modules/core-js/internals/define-global-property.js");\n\nvar SHARED = \'__core-js_shared__\';\nvar store = global[SHARED] || defineGlobalProperty(SHARED, {});\n\nmodule.exports = store;\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/shared-store.js?')},"./node_modules/core-js/internals/shared.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ \"./node_modules/core-js/internals/is-pure.js\");\nvar store = __webpack_require__(/*! ../internals/shared-store */ \"./node_modules/core-js/internals/shared-store.js\");\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.26.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2022 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/shared.js?")},"./node_modules/core-js/internals/symbol-constructor-detection.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = __webpack_require__(/*! ../internals/engine-v8-version */ "./node_modules/core-js/internals/engine-v8-version.js");\nvar fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/symbol-constructor-detection.js?')},"./node_modules/core-js/internals/to-absolute-index.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/to-absolute-index.js?')},"./node_modules/core-js/internals/to-indexed-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = __webpack_require__(/*! ../internals/indexed-object */ "./node_modules/core-js/internals/indexed-object.js");\nvar requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/to-indexed-object.js?')},"./node_modules/core-js/internals/to-integer-or-infinity.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var trunc = __webpack_require__(/*! ../internals/math-trunc */ "./node_modules/core-js/internals/math-trunc.js");\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/to-integer-or-infinity.js?')},"./node_modules/core-js/internals/to-length.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var toIntegerOrInfinity = __webpack_require__(/*! ../internals/to-integer-or-infinity */ "./node_modules/core-js/internals/to-integer-or-infinity.js");\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/to-length.js?')},"./node_modules/core-js/internals/to-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "./node_modules/core-js/internals/require-object-coercible.js");\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/to-object.js?')},"./node_modules/core-js/internals/to-primitive.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var call = __webpack_require__(/*! ../internals/function-call */ "./node_modules/core-js/internals/function-call.js");\nvar isObject = __webpack_require__(/*! ../internals/is-object */ "./node_modules/core-js/internals/is-object.js");\nvar isSymbol = __webpack_require__(/*! ../internals/is-symbol */ "./node_modules/core-js/internals/is-symbol.js");\nvar getMethod = __webpack_require__(/*! ../internals/get-method */ "./node_modules/core-js/internals/get-method.js");\nvar ordinaryToPrimitive = __webpack_require__(/*! ../internals/ordinary-to-primitive */ "./node_modules/core-js/internals/ordinary-to-primitive.js");\nvar wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "./node_modules/core-js/internals/well-known-symbol.js");\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol(\'toPrimitive\');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = \'default\';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw $TypeError("Can\'t convert object to primitive value");\n  }\n  if (pref === undefined) pref = \'number\';\n  return ordinaryToPrimitive(input, pref);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/to-primitive.js?')},"./node_modules/core-js/internals/to-property-key.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var toPrimitive = __webpack_require__(/*! ../internals/to-primitive */ \"./node_modules/core-js/internals/to-primitive.js\");\nvar isSymbol = __webpack_require__(/*! ../internals/is-symbol */ \"./node_modules/core-js/internals/is-symbol.js\");\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/to-property-key.js?")},"./node_modules/core-js/internals/to-string-tag-support.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ \"./node_modules/core-js/internals/well-known-symbol.js\");\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/to-string-tag-support.js?")},"./node_modules/core-js/internals/to-string.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var classof = __webpack_require__(/*! ../internals/classof */ \"./node_modules/core-js/internals/classof.js\");\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/to-string.js?")},"./node_modules/core-js/internals/try-to-string.js":module=>{eval("var $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/try-to-string.js?")},"./node_modules/core-js/internals/uid.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ \"./node_modules/core-js/internals/function-uncurry-this.js\");\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/uid.js?")},"./node_modules/core-js/internals/use-symbol-as-uid.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = __webpack_require__(/*! ../internals/symbol-constructor-detection */ \"./node_modules/core-js/internals/symbol-constructor-detection.js\");\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/use-symbol-as-uid.js?")},"./node_modules/core-js/internals/v8-prototype-define-bug.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");\nvar fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, \'prototype\', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/v8-prototype-define-bug.js?')},"./node_modules/core-js/internals/weak-map-basic-detection.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");\nvar isCallable = __webpack_require__(/*! ../internals/is-callable */ "./node_modules/core-js/internals/is-callable.js");\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/weak-map-basic-detection.js?')},"./node_modules/core-js/internals/well-known-symbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");\nvar shared = __webpack_require__(/*! ../internals/shared */ "./node_modules/core-js/internals/shared.js");\nvar hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");\nvar uid = __webpack_require__(/*! ../internals/uid */ "./node_modules/core-js/internals/uid.js");\nvar NATIVE_SYMBOL = __webpack_require__(/*! ../internals/symbol-constructor-detection */ "./node_modules/core-js/internals/symbol-constructor-detection.js");\nvar USE_SYMBOL_AS_UID = __webpack_require__(/*! ../internals/use-symbol-as-uid */ "./node_modules/core-js/internals/use-symbol-as-uid.js");\n\nvar WellKnownSymbolsStore = shared(\'wks\');\nvar Symbol = global.Symbol;\nvar symbolFor = Symbol && Symbol[\'for\'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == \'string\')) {\n    var description = \'Symbol.\' + name;\n    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else if (USE_SYMBOL_AS_UID && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/internals/well-known-symbol.js?')},"./node_modules/core-js/modules/es.array.push.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval('\nvar $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");\nvar toObject = __webpack_require__(/*! ../internals/to-object */ "./node_modules/core-js/internals/to-object.js");\nvar lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ "./node_modules/core-js/internals/length-of-array-like.js");\nvar setArrayLength = __webpack_require__(/*! ../internals/array-set-length */ "./node_modules/core-js/internals/array-set-length.js");\nvar doesNotExceedSafeInteger = __webpack_require__(/*! ../internals/does-not-exceed-safe-integer */ "./node_modules/core-js/internals/does-not-exceed-safe-integer.js");\nvar fails = __webpack_require__(/*! ../internals/fails */ "./node_modules/core-js/internals/fails.js");\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 and Safari <= 15.4, FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar SILENT_ON_NON_WRITABLE_LENGTH = !function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], \'length\', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: \'Array\', proto: true, arity: 1, forced: INCORRECT_TO_LENGTH || SILENT_ON_NON_WRITABLE_LENGTH }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/modules/es.array.push.js?')},"./node_modules/core-js/modules/web.dom-exception.stack.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval('\nvar $ = __webpack_require__(/*! ../internals/export */ "./node_modules/core-js/internals/export.js");\nvar global = __webpack_require__(/*! ../internals/global */ "./node_modules/core-js/internals/global.js");\nvar getBuiltIn = __webpack_require__(/*! ../internals/get-built-in */ "./node_modules/core-js/internals/get-built-in.js");\nvar createPropertyDescriptor = __webpack_require__(/*! ../internals/create-property-descriptor */ "./node_modules/core-js/internals/create-property-descriptor.js");\nvar defineProperty = (__webpack_require__(/*! ../internals/object-define-property */ "./node_modules/core-js/internals/object-define-property.js").f);\nvar hasOwn = __webpack_require__(/*! ../internals/has-own-property */ "./node_modules/core-js/internals/has-own-property.js");\nvar anInstance = __webpack_require__(/*! ../internals/an-instance */ "./node_modules/core-js/internals/an-instance.js");\nvar inheritIfRequired = __webpack_require__(/*! ../internals/inherit-if-required */ "./node_modules/core-js/internals/inherit-if-required.js");\nvar normalizeStringArgument = __webpack_require__(/*! ../internals/normalize-string-argument */ "./node_modules/core-js/internals/normalize-string-argument.js");\nvar DOMExceptionConstants = __webpack_require__(/*! ../internals/dom-exception-constants */ "./node_modules/core-js/internals/dom-exception-constants.js");\nvar clearErrorStack = __webpack_require__(/*! ../internals/error-stack-clear */ "./node_modules/core-js/internals/error-stack-clear.js");\nvar DESCRIPTORS = __webpack_require__(/*! ../internals/descriptors */ "./node_modules/core-js/internals/descriptors.js");\nvar IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "./node_modules/core-js/internals/is-pure.js");\n\nvar DOM_EXCEPTION = \'DOMException\';\nvar Error = getBuiltIn(\'Error\');\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION);\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], \'Error\');\n  var that = new NativeDOMException(message, name);\n  var error = Error(message);\n  error.name = DOM_EXCEPTION;\n  defineProperty(that, \'stack\', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  inheritIfRequired(that, this, $DOMException);\n  return that;\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;\n\nvar ERROR_HAS_STACK = \'stack\' in Error(DOM_EXCEPTION);\nvar DOM_EXCEPTION_HAS_STACK = \'stack\' in new NativeDOMException(1, 2);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(global, DOM_EXCEPTION);\n\n// Bun ~ 0.1.1 DOMException have incorrect descriptor and we can\'t redefine it\n// https://github.com/Jarred-Sumner/bun/issues/399\nvar BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);\n\nvar FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;\n\n// `DOMException` constructor patch for `.stack` where it\'s required\n// https://webidl.spec.whatwg.org/#es-DOMException-specialness\n$({ global: true, constructor: true, forced: IS_PURE || FORCED_CONSTRUCTOR }, { // TODO: fix export logic\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {\n  if (!IS_PURE) {\n    defineProperty(PolyfilledDOMExceptionPrototype, \'constructor\', createPropertyDescriptor(1, PolyfilledDOMException));\n  }\n\n  for (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n    var constant = DOMExceptionConstants[key];\n    var constantName = constant.s;\n    if (!hasOwn(PolyfilledDOMException, constantName)) {\n      defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));\n    }\n  }\n}\n\n\n//# sourceURL=webpack://stay-popup/./node_modules/core-js/modules/web.dom-exception.stack.js?')}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];return void 0!==n||(n=__webpack_module_cache__[e]={exports:{}},__webpack_modules__[e](n,n.exports,__webpack_require__)),n.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __webpack_exports__=__webpack_require__("./src/sniffer/sniffer.user.js")})();