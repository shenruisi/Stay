(()=>{var t={7022:(t,e,o)=>{let r;o(7658),"undefined"!==typeof window.browser&&(r=window.browser),"undefined"!==typeof window.chrome&&(r=window.chrome);const n=r;(function(){let t=!1;try{e(),document.addEventListener("securitypolicyviolation",(e=>{t=!0,o(t)}))}catch(l){}function e(){const t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;let e=window.location.host,r=document.createElement("script");r.type="text/javascript",r.id="stay_inject_parse_video_js_"+e;let n=`\n\nlet handleVideoInfo = ${o}\n\nhandleVideoInfo(false);`;if(r.appendChild(document.createTextNode(n)),document.body)document.body.appendChild(r);else{let e=new t(((t,o)=>{document.body&&(document.body.appendChild(r),e.disconnect())}));e.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}}function o(t){let e=window.location.href,o=window.location.host,r=[],i=new Set,l=new Set;const a=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;let d,s=[];const u={isMobile:function(){const t=navigator.userAgent;let e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=e.filter((e=>t.includes(e)));return!!o.length},queryURLParams:function(t,e){const o=new RegExp("[?&#]+"+e+"=([^?&#]+)"),r=o.exec(t);return r&&r[1]?r[1]:""},matchUrlInString:function(t){const e=new RegExp("(https?|http)?(:)?//[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]","g"),o=t.match(e);return o&&o.length?o[0]:""},isURL:function(t){return!!t&&/^http[s]?:\/\/.*/.test(t)},completionSourceUrl:function(t){return t?(/^(f|ht)tps?:\/\//i.test(t)||(t=/^\/\//i.test(t)?window.location.protocol+t:window.location.origin+t),t):""},checkCharLengthAndSubStr:function(t,e=80){if(!t)return"";let o=t.replace(/[^x00-xff]/g,"01");return o.length<=e?t:t.substr(0,e)},getUrlPathName:function(t){let o="";o=this.isURL(t)?new URL(t).pathname:new URL(e).pathname;let r=o.split("/");return r=r.filter((t=>{if(t&&""!=t)return t})),r.pop()},generateUuid:function(t,e){t=t||32;let o,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[];if(e=e||r.length,t)for(o=0;o<t;o++)n[o]=r[0|Math.random()*e];else{let t;for(n[8]=n[13]=n[18]=n[23]="_",n[14]="4",o=0;o<36;o++)n[o]||(t=0|16*Math.random(),n[o]=r[19==o?3&t|8:t])}return n.join("")}};function c(t){d=document.querySelectorAll("video");let e=d&&d.length;e||(d=document.querySelectorAll(".post-content shreddit-player"),e=d&&d.length),e?f(d):(f(),t&&p()),m()}function p(){for(let t=1;t<10;t++){let e;(function(t){e=setTimeout((()=>{d=document.querySelectorAll("video");let t=d&&d.length;t&&(f(d),s.forEach((t=>{clearTimeout(t)})))}),200*t)})(t),s.push(e)}}function m(){const t=new a((function(t){try{t.forEach((function(t){if(d=document.querySelectorAll("video"),"VIDEO"===t.target.nodeName&&d&&d.length)throw o=window.location.host,f(d),new Error("endloop")}))}catch(e){if("endloop"!==e.message)throw e}})),e={attributes:!0,childList:!0,characterData:!0,subtree:!0};t.observe(document,e)}function f(e){if(e&&e.length){let t=e.length,o=0,r=Array.from(e);r.forEach((t=>{if(!t||!(t instanceof HTMLElement))return void o++;let e=t.getAttribute("stay-sniffing");e||(e=u.generateUuid(),t.setAttribute("stay-sniffing",e));let r=t.getAttribute("src");if(!r){let e=t.querySelector("source");e&&(t=e,r=e.getAttribute("src"))}if(!r)return void o++;r=u.completionSourceUrl(r);let n=g(t);n.videoUuid=e,n.downloadUrl?y(n):o++})),o==t&&h()}else h();if(window.postMessage({name:"VIDEO_INFO_CAPTURE",videoList:r}),t){let t={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoInfoList:r};n.runtime.sendMessage(t,(t=>{}))}}function y(t){l.size&&(l.has(t.videoUuid)||l.has(t.videoKey))?r.forEach((e=>(e.videoUuid!=t.videoUuid&&e.videoUuid!=t.videoKey||(e.downloadUrl=t.downloadUrl,e.poster=t.poster?t.poster:"",e.title=t.title,e.hostUrl=t.hostUrl,e.qualityList=t.qualityList?t.qualityList:[]),e))):(t.videoKey&&(l.add(t.videoKey),t.videoUuid||(t.videoUuid=t.videoKey)),t.videoUuid&&l.add(t.videoUuid),r.push(t))}function g(t){let r={},n=t.getAttribute("poster"),i=t.getAttribute("title"),l=t.getAttribute("src"),a=[];if(e=window.location.href,l=u.completionSourceUrl(l),!n){let t=document.querySelector("source[type='image/webp'] img");n=t?t.getAttribute("src"):"",i||(i=t?t.getAttribute("alt"):"")}if(o.indexOf("youtube.com")>-1){const t=u.queryURLParams(e,"v");r=M(i,t)}else if(o.indexOf("baidu.com")>-1)r=D(t);else if(o.indexOf("bilibili.com")>-1)r=w(t);else if(o.indexOf("mobile.twitter.com")>-1)r=v(t);else if(o.indexOf("m.weibo.cn")>-1)r=S(t);else if(o.indexOf("iesdouyin.com")>-1)r=U(t);else if(o.indexOf("douyin.com")>-1){const e=window.location.pathname;r=e.indexOf("/video")>-1?A(t):q(t)}else o.indexOf("m.toutiao.com")>-1?r=_(t):o.indexOf("m.v.qq.com")>-1?r=x(t):o.indexOf("www.reddit.com")>-1?r=O(t):o.indexOf("pornhub.com")>-1?r=E(t):o.indexOf("facebook.com")>-1?r=N(t):o.indexOf("instagram.com")>-1?r=I(t):o.indexOf("xiaohongshu.com")>-1&&(r=C(t));return r.downloadUrl&&(l=r.downloadUrl),l=u.completionSourceUrl(l),n||(n=r.poster),i||(i=r.title),r.qualityList&&r.qualityList.length&&(a=r.qualityList),i||(i=u.getUrlPathName(l)),n=u.completionSourceUrl(n),r["title"]=i,r["poster"]=n,r["downloadUrl"]=l,r["hostUrl"]=e,r["qualityList"]=a,r}function h(){setTimeout((()=>{let t=b();t.downloadUrl&&y(t)}),300)}function b(){let t={},o=window.location.host;return e=window.location.href,t.hostUrl=e,o.indexOf("pornhub.com")>-1&&(t=L(t)),t}function w(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=document.querySelector(".main-container .ep-info-pre .ep-info-title");return o||setTimeout((function(){return o=document.querySelector(".video .share-video-info .title-wrapper .title-name span"),o&&(e.title=o.textContent),e}),200),o&&(e.title=o.textContent),e}function v(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextElementSibling.childNodes[1];return o&&(o=o.querySelector(".css-1dbjc4n .r-92ivih.r-1t01tom .r-1t982j2.r-1j3t67a .css-1dbjc4n.r-1kw4oii a[data-testid='tweetText'] span"),o&&(e.title=u.checkCharLengthAndSubStr(o.textContent))),e}function S(t){let o={};return o.poster=t.getAttribute("poster"),o.downloadUrl=t.getAttribute("src"),e.match(/^.*\/detail\/.*/g)&&(o.title=u.checkCharLengthAndSubStr(document.querySelector(".weibo-main .weibo-text").textContent)),o}function U(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=document.querySelector(".video-container img.poster");o&&(e.poster=o.getAttribute("src"));let r=document.querySelector(".desc .multi-line .multi-line_text");return r&&(e.title=r.textContent),e}function A(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const o=document.querySelector("div[data-e2e=video-detail] div[data-e2e=detail-video-info] div h2");return o&&(e.title=o.textContent),e}function q(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;if(o){let t=o.querySelector(".imgBackground img");t&&(e.poster=t.getAttribute("src"));let r=o.querySelector(".video-info-detail .title span.e_h_fqNj");r&&(e.title=r.textContent)}return e}function _(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const o=document.querySelector(".video .xgplayer-placeholder .xgplayer-poster");if(o){let t=o.getAttribute("style");if(t){let o=u.matchUrlInString(t);e.poster=o}}const r=document.querySelector(".video .video-header .video-title-wrapper .video-title");return r&&(e.title=r.textContent),e}function x(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const o=document.querySelector(".mod_play .player_container .txp_poster_img");if(o){let t=o.getAttribute("src");t=u.completionSourceUrl(t),e.poster=t}const r=document.querySelector(".mod_box .mod_bd .mod_video_info .video_title");if(r){let t=r.textContent;t=t?t.trim():"";const o=document.querySelector(".mod_box .mod_bd .mod_list_slider .slider_box .item.current span");o&&(t+=o.textContent,t=t?t.trim():""),e.title=t}return e}function O(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const o=document.querySelector("shreddit-app shreddit-title");return o&&(e.title=o.getAttribute("title")),e}function E(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=t.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;if(o&&o.classList.contains("playerWrapper")){const t=document.querySelector("#videoShow .categoryTags .headerWrap h1");if(t){let o=t.textContent;o&&(e.title=o.trim())}const o=document.querySelector("#videoPlayerPlaceholder img.videoElementPoster");return o&&(e.poster=o.getAttribute("src")),L(e)}let r=t.parentNode.parentNode.parentNode.parentNode.parentNode;if(r&&"li"==r.tagName.toLowerCase()){let t=r.querySelector(".videoWrapper .singleVideo a img.videoThumb");if(t)return e.title=t.getAttribute("alt"),e.title&&(e.title="[Related videos] "+e.title),e.poster=t.getAttribute("src"),e}return e}function L(t){if(t=t||{},t.videoKey=u.queryURLParams(window.location.href,"viewkey"),window.VIDEO_SHOW&&(!t.videoKey||t.videoKey==window.VIDEO_SHOW.vkey)){t.title||(t.title=window.VIDEO_SHOW.videoTitle),t.poster||(t.poster=window.VIDEO_SHOW.videoImage);let e=window.VIDEO_SHOW.playerId;if(e){let o=e.split("_");if(o.length>1){let e="flashvars_"+o[1],r=window[e].mediaDefinitions;if(r&&r.length){let e=[],o="";r.forEach((r=>{"hls"==r.format&&"string"==typeof r.quality&&e.push({downloadUrl:r.videoUrl,qualityLabel:r.quality,quality:Number(r.quality)}),"boolean"==typeof r.defaultQuality&&r.defaultQuality&&(o=r.defaultQuality,t.downloadUrl||(t.downloadUrl=r.videoUrl))})),t["qualityList"]=e,e.length&&e.forEach((e=>{e.quality==o&&(t.downloadUrl=e.downloadUrl)}))}}}}return t}function N(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title");let o=t.parentElement.parentElement.parentElement.parentElement.parentElement;if(o&&o.classList.contains("displayed")&&"container"==o.getAttribute("data-type")){let t=o.querySelector("div[data-type='video'] img.img");t&&(e.poster=t.getAttribute("src"));let r=o.querySelector("div.displayed > div[data-type='container'] > div[data-type='container'] > div[data-type='container'] > div[data-type='text'] > div.native-text");r&&(e.title=r.textContent)}return e}function I(t){let e={};e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title");let o=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;if(o&&o.classList.contains("_ab8w")&&o.classList.contains("_ab94")&&o.classList.contains("_ab99")&&o.classList.contains("_ab9h")&&o.classList.contains("_ab9m")&&o.classList.contains("_ab9p")&&o.classList.contains("_abcm")){let t=o.querySelector("._aatk .x1uhb9sk .x10l6tqk .x78zum5 img.x5yr21d");t&&(e.poster=t.getAttribute("src"));let r=o.querySelector("._ab9f div._ae1h._ae1i ._ae2s div._ae5q._akdn div div div");r&&r.textContent&&(e.title=r.textContent.replace("... more",""))}else if(o=t.parentNode.parentNode.parentNode.parentNode.parentNode,console.log(o.classList,"videoDetailDom.classList.contains('_a8b4') ===",o.classList.contains("_a8b4")),o&&o.classList.contains("_a8b4")&&o.classList.contains("_acjh")){let t=o.querySelector("div > div > div.x9f619.x1d8287x.xz4gly6  div.x6ikm8r.x10wlt62 span");t&&(e.title=t.textContent)}return e}function C(t){let e={};e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title");const o=document.querySelector(".video-container .video-banner .img-box");if(o){let t=o.getAttribute("style"),r=u.matchUrlInString(t);r&&(e.poster=u.completionSourceUrl(r))}const r=document.querySelector(".video-container .stage-bottom .author-desc-wrapper .author-desc");if(r){let t=r.textContent;t&&(t=t.replace(/^展开/g,""),e.title=u.checkCharLengthAndSubStr(t))}return e}function D(t){let n={};if("activity.baidu.com"===o){const t=window.PAGE_DATA;if(t&&t.pageData&&t.pageData.remote&&t.pageData.remote.mainVideoList&&t.pageData.remote.mainVideoList.length){const o=t.pageData.remote.mainVideoList[0],l=t.pageData.remote.moreVideoList;return n["title"]=o.title,n["poster"]=o.poster,n["downloadUrl"]=o.videoUrl,l&&l.length&&l.forEach((t=>{i.size&&i.has(t.videoUrl)||r.push({title:t.title,poster:t.poster,downloadUrl:t.videoUrl,hostUrl:e})})),n}n["title"]=k();const o=document.querySelector(".stickyBlock .curVideoPlay video");return o&&(n["poster"]=o.getAttribute("poster"),n["downloadUrl"]=o.getAttribute("src")),n}if("mbd.baidu.com"===o){const t=window.jsonData;if(t&&t.curVideoMeta){const e=t.curVideoMeta;if(n=V(e),n&&Object.keys(n).length)return n}return n["title"]=k(),n["poster"]=P(),n}if("haokan.baidu.com"===o){const o=window.__PRELOADED_STATE__,r=u.queryURLParams(e,"vid"),i=t.getAttribute("src");if(i&&r&&i.indexOf(r)>-1){if(o&&o.curVideoMeta){const t=o.curVideoMeta;if(n=V(t),n&&Object.keys(n).length)return n}n["title"]=k(),n["poster"]=P()}else n["title"]=t.parentElement.parentElement.querySelector("h3.land-recommend-bottom-title")?t.parentElement.parentElement.querySelector("h3.land-recommend-bottom-title").textContent:"",n["poster"]=t.parentElement&&t.parentElement.querySelector("img.video-img")?t.parentElement.querySelector("img.video-img").getAttribute("src"):"";return n}return"pan.baidu.com"===o&&(n["title"]=k()),n}function V(t){if(!t)return{};let e={};if(e["title"]=t.title,e["poster"]=t.poster,e["downloadUrl"]=t.playurl,t.clarityUrl&&t.clarityUrl.length){let o=[];const r=t.clarityUrl;r.forEach((t=>{t.vodVideoHW;o.push({downloadUrl:t.url,qualityLabel:t.title,quality:t.key})})),e["qualityList"]=o}return e}function P(){const t=document.querySelector(".art-player-wrapper .art-video-player .art-poster");if(t){let e=t.getAttribute("style");if(e)return u.matchUrlInString(e)}const e=document.querySelector("#bdMainPlayer .art-video-player .art-poster");if(e){let t=e.getAttribute("style");if(t)return u.matchUrlInString(t)}return""}function k(){const t=document.querySelector(".adVideoPageV3 .curVideoInfo h3.videoTitle");if(t)return t.textContent;const e=document.querySelector(".video-info .video-info-title");if(e)return e.textContent;const o=document.querySelector(".video-main .video-content .video-title .video-title-left");return o?o.textContent:""}function M(t,e){let o={};const r=window.ytInitialPlayerResponse;if(r&&r.videoDetails&&r.streamingData&&(!e||e===r.videoDetails.videoId)){const e=r.videoDetails;let n=e.title?e.title:"";o["title"]=n;let i=e.thumbnail;if(i){let t=i.thumbnails;t&&t.length?o["poster"]=t.pop().url:o["poster"]=j()}else o["poster"]=j();const l=r.streamingData,a=l.formats;if(t=t||"",a&&a.length&&t.replace(/\s+/g,"")===n.replace(/\s+/g,"")){let t=[],e=new Set;a.forEach((o=>{let r=o.mimeType;r.indexOf("video/mp4")>-1&&o.url&&!e.has(o.quality)&&(e.add(o.quality),t.push({downloadUrl:o.url,qualityLabel:o.qualityLabel,quality:o.quality}))})),t&&t.length&&(o["qualityList"]=t),o["downloadUrl"]=T()}else o["title"]=t||R(),o["downloadUrl"]=T(),o["poster"]=j()}else o={},o["title"]=t||R(),o["poster"]=j(),o["downloadUrl"]=T();return o}function T(){let t=document.querySelector(".html5-video-player .html5-video-container video");return t?t.getAttribute("src"):""}function R(){const t=document.querySelector(".slim-video-metadata-header .slim-video-information-content .slim-video-information-title");if(t)return t.textContent;const e=document.querySelector("#title h1.style-scope");return e?e.textContent:""}function j(){const t=document.querySelector(".ytp-cued-thumbnail-overlay-image");if(t){let e=t.getAttribute("style");if(e)return u.matchUrlInString(e)}const e=document.querySelector(".html5-video-player .ytp-cued-thumbnail-overlay .ytp-cued-thumbnail-overlay-image");if(e){let t=e.getAttribute("style");if(t)return u.matchUrlInString(t)}const o=document.querySelector(".video-wrapper .background-style-black");if(o){let t=o.getAttribute("style");if(t)return u.matchUrlInString(t)}return""}function H(){function e(t){let e=/^(https?:\/\/|\/).*\.(mp4|m3u8)$/;return null!=t.match(e)}let o=new Set;XMLHttpRequest.prototype.reallyOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(r,i,l,a,d){if(this.reallyOpen(r,i,l,a,d),e(i)&&!o.has(i)&&(o.add(i),window.postMessage({name:"VIDEO_LINK_CAPTURE",urls:o}),t)){let t={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoLinkSet:o};n.runtime.sendMessage(t,(t=>{}))}};let r=window.fetch;window.fetch=function(i,l){let a="object"==typeof i?i.url:i;if(e(a)&&!o.has(a)&&(o.add(a),console.log("VIDEO_LINK_CAPTURE: "+a),window.postMessage({name:"VIDEO_LINK_CAPTURE",urls:o}),t)){let t={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoLinkSet:o};n.runtime.sendMessage(t,(t=>{}))}return r(i,l)}}c(!1),document.onreadystatechange=()=>{"complete"===document.readyState&&c(!0)},H()}let r=[],i=new Set;window.addEventListener("message",(t=>{if(!t||!t.data||!t.data.name)return;const e=t.data.name;if("VIDEO_LINK_CAPTURE"===e){let e=t.data.urls?t.data.urls:new Set;i=e;let o={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoLinkSet:i};n.runtime.sendMessage(o,(t=>{}))}else if("VIDEO_INFO_CAPTURE"===e){let e=t.data.videoList?t.data.videoList:[];r=e;let o={from:"sniffer",operate:"VIDEO_INFO_PUSH",videoInfoList:r};n.runtime.sendMessage(o,(t=>{}))}}))})()}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,o),i.exports}o.m=t,(()=>{var t=[];o.O=(e,r,n,i)=>{if(!r){var l=1/0;for(u=0;u<t.length;u++){r=t[u][0],n=t[u][1],i=t[u][2];for(var a=!0,d=0;d<r.length;d++)(!1&i||l>=i)&&Object.keys(o.O).every((t=>o.O[t](r[d])))?r.splice(d--,1):(a=!1,i<l&&(l=i));if(a){t.splice(u--,1);var s=n();void 0!==s&&(e=s)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[r,n,i]}})(),(()=>{o.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return o.d(e,{a:e}),e}})(),(()=>{o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}})(),(()=>{o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{o.j=875})(),(()=>{var t={875:0};o.O.j=e=>0===t[e];var e=(e,r)=>{var n,i,l=r[0],a=r[1],d=r[2],s=0;if(l.some((e=>0!==t[e]))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(d)var u=d(o)}for(e&&e(r);s<l.length;s++)i=l[s],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(u)},r=self["webpackChunkstay_popup"]=self["webpackChunkstay_popup"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var r=o.O(void 0,[998],(()=>o(7022)));r=o.O(r)})();