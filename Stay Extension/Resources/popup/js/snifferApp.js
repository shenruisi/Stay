(()=>{var t={5697:(t,e,o)=>{o(2801),o(7658),function(){let t=window.location.href,e=window.location.host,o=[],r=new Set,i=new Set;const n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;let l,a=[];const d={isMobile:function(){const t=navigator.userAgent;let e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=e.filter((e=>t.includes(e)));return!!o.length},queryURLParams:function(t,e){const o=new RegExp("[?&#]+"+e+"=([^?&#]+)"),r=o.exec(t);return r&&r[1]?r[1]:""},matchUrlInString:function(t){const e=new RegExp("(https?|http)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]","g"),o=t.match(e);return o&&o.length?o[0]:""},isURL:function(t){return!!t&&/^http[s]?:\/\/.*/.test(t)},completionSourceUrl:function(t){return t?(/^(f|ht)tps?:\/\//i.test(t)||(t=/^\/\//i.test(t)?window.location.protocol+t:window.location.origin+t),t):""},checkCharLengthAndSubStr:function(t,e=80){if(!t)return"";let o=t.replace(/[^x00-xff]/g,"01");return o.length<=e?t:t.substr(0,e)},getUrlPathName:function(e){let o="";o=this.isURL(e)?new URL(e).pathname:new URL(t).pathname;let r=o.split("/");return r=r.filter((t=>{if(t&&""!=t)return t})),r.pop()},generateUuid:function(t,e){t=t||32;let o,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(e=e||r.length,t)for(o=0;o<t;o++)i[o]=r[0|Math.random()*e];else{let t;for(i[8]=i[13]=i[18]=i[23]="_",i[14]="4",o=0;o<36;o++)i[o]||(t=0|16*Math.random(),i[o]=r[19==o?3&t|8:t])}return i.join("")},Decode64:function(t){return decodeURIComponent(window.atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}};function c(t){l=document.querySelectorAll("video");let e=l&&l.length;e||(l=document.querySelectorAll(".post-content shreddit-player"),e=l&&l.length),e?p(l):(p(),t&&s()),u()}function s(){for(let t=1;t<10;t++){let e;(function(t){e=setTimeout((()=>{l=document.querySelectorAll("video");let t=l&&l.length;t&&(p(l),a.forEach((t=>{clearTimeout(t)})))}),200*t)})(t),a.push(e)}}function u(){const t=new n((function(t){try{t.forEach((function(t){if(l=document.querySelectorAll("video"),"VIDEO"===t.target.nodeName&&l&&l.length)throw e=window.location.host,p(l),new Error("endloop")}))}catch(o){if("endloop"!==o.message)throw o}})),o={attributes:!0,childList:!0,characterData:!0,subtree:!0};t.observe(document,o)}function p(t){if(t&&t.length){let e=t.length,r=0,i=Array.from(t);i.forEach((t=>{if(!t||!(t instanceof HTMLElement))return void r++;let e=t.getAttribute("stay-sniffing");e||(e=d.generateUuid(),t.setAttribute("stay-sniffing",e));let i=t.getAttribute("src");if(!i){let e=t.querySelector("source");e&&(t=e,i=e.getAttribute("src"))}if(!i)return void r++;i=d.completionSourceUrl(i);let n=f(t);n.videoUuid=e,n.downloadUrl?(console.log("parseVideoNodeList------videoList---------",o),m(n)):r++})),r==e&&g()}else console.log("start------parseVideoInfoByWindow--------"),g();console.log("parseVideoNodeList-----------result---------",o),window.webkit.messageHandlers.stayapp.postMessage(o)}function m(t){i.size&&(i.has(t.videoUuid)||i.has(t.videoKey))?o.forEach((e=>(e.videoUuid!=t.videoUuid&&e.videoUuid!=t.videoKey||(e.downloadUrl=t.downloadUrl,e.poster=t.poster?t.poster:"",e.title=t.title,e.hostUrl=t.hostUrl,e.qualityList=t.qualityList?t.qualityList:[]),e))):(t.videoKey&&(i.add(t.videoKey),t.videoUuid||(t.videoUuid=t.videoKey)),t.videoUuid&&i.add(t.videoUuid),o.push(t))}function f(o){let r={},i=o.getAttribute("poster"),n=o.getAttribute("title"),l=o.getAttribute("src"),a=[];if(t=window.location.href,l=d.completionSourceUrl(l),!i){let t=document.querySelector("source[type='image/webp'] img");i=t?t.getAttribute("src"):"",n||(n=t?t.getAttribute("alt"):"")}if(e.indexOf("youtube.com")>-1){const e=d.queryURLParams(t,"v");r=I(n,e)}else if(e.indexOf("baidu.com")>-1)r=C(o);else if(e.indexOf("bilibili.com")>-1)r=h(o);else if(e.indexOf("mobile.twitter.com")>-1)r=b(o);else if(e.indexOf("m.weibo.cn")>-1)r=v(o);else if(e.indexOf("iesdouyin.com")>-1)r=w(o);else if(e.indexOf("douyin.com")>-1){const t=window.location.pathname;r=t.indexOf("/video")>-1?S(o):U(o)}else e.indexOf("m.toutiao.com")>-1?r=q(o):e.indexOf("m.v.qq.com")>-1?r=A(o):e.indexOf("www.reddit.com")>-1?r=x(o):e.indexOf("pornhub.com")>-1?r=_(o):e.indexOf("facebook.com")>-1?r=O(o):e.indexOf("instagram.com")>-1?r=E(o):e.indexOf("xiaohongshu.com")>-1&&(r=N(o));return r.downloadUrl&&(l=r.downloadUrl),l=d.completionSourceUrl(l),i||(i=r.poster),n||(n=r.title),r.qualityList&&r.qualityList.length&&(a=r.qualityList),n||(n=d.getUrlPathName(l)),i=d.completionSourceUrl(i),r["title"]=n,r["poster"]=i,r["downloadUrl"]=l,r["hostUrl"]=t,r["qualityList"]=a,r}function g(){setTimeout((()=>{let t=y();t.downloadUrl&&m(t)}),300)}function y(){let e={},o=window.location.host;return t=window.location.href,e.hostUrl=t,o.indexOf("pornhub.com")>-1&&(e=L(e)),e}function h(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=document.querySelector(".main-container .ep-info-pre .ep-info-title");return o||setTimeout((function(){return o=document.querySelector(".video .share-video-info .title-wrapper .title-name span"),o&&(e.title=o.textContent),e}),200),o&&(e.title=o.textContent),e}function b(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextElementSibling.childNodes[1];return o&&(o=o.querySelector(".css-1dbjc4n .r-92ivih.r-1t01tom .r-1t982j2.r-1j3t67a .css-1dbjc4n.r-1kw4oii a[data-testid='tweetText'] span"),o&&(e.title=d.checkCharLengthAndSubStr(o.textContent))),e}function v(e){let o={};return o.poster=e.getAttribute("poster"),o.downloadUrl=e.getAttribute("src"),t.match(/^.*\/detail\/.*/g)&&(o.title=d.checkCharLengthAndSubStr(document.querySelector(".weibo-main .weibo-text").textContent)),o}function w(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=document.querySelector(".video-container img.poster");o&&(e.poster=o.getAttribute("src"));let r=document.querySelector(".desc .multi-line .multi-line_text");return r&&(e.title=r.textContent),e}function S(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const o=document.querySelector("div[data-e2e=video-detail] div[data-e2e=detail-video-info] div h2");return o&&(e.title=o.textContent),e}function U(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;if(o){let t=o.querySelector(".imgBackground img");t&&(e.poster=t.getAttribute("src"));let r=o.querySelector(".video-info-detail .title span.e_h_fqNj");r&&(e.title=r.textContent)}return e}function q(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const o=document.querySelector(".video .xgplayer-placeholder .xgplayer-poster");if(o){let t=o.getAttribute("style");if(t){let o=d.matchUrlInString(t);e.poster=o}}const r=document.querySelector(".video .video-header .video-title-wrapper .video-title");return r&&(e.title=r.textContent),e}function A(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const o=document.querySelector(".mod_play .player_container .txp_poster_img");if(o){let t=o.getAttribute("src");t=d.completionSourceUrl(t),e.poster=t}const r=document.querySelector(".mod_box .mod_bd .mod_video_info .video_title");if(r){let t=r.textContent;t=t?t.trim():"";const o=document.querySelector(".mod_box .mod_bd .mod_list_slider .slider_box .item.current span");o&&(t+=o.textContent,t=t?t.trim():""),e.title=t}return e}function x(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");const o=document.querySelector("shreddit-app shreddit-title");return o&&(e.title=o.getAttribute("title")),e}function _(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src");let o=t.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;if(o&&o.classList.contains("playerWrapper")){const t=document.querySelector("#videoShow .categoryTags .headerWrap h1");if(t){let o=t.textContent;o&&(e.title=o.trim())}const o=document.querySelector("#videoPlayerPlaceholder img.videoElementPoster");return o&&(e.poster=o.getAttribute("src")),L(e)}let r=t.parentNode.parentNode.parentNode.parentNode.parentNode;if(r&&"li"==r.tagName.toLowerCase()){let t=r.querySelector(".videoWrapper .singleVideo a img.videoThumb");if(t)return e.title=t.getAttribute("alt"),e.title&&(e.title="[Related videos] "+e.title),e.poster=t.getAttribute("src"),e}return e}function L(t){if(t=t||{},t.videoKey=d.queryURLParams(window.location.href,"viewkey"),window.VIDEO_SHOW&&(!t.videoKey||t.videoKey==window.VIDEO_SHOW.vkey)){t.title||(t.title=window.VIDEO_SHOW.videoTitle),t.poster||(t.poster=window.VIDEO_SHOW.videoImage);let e=window.VIDEO_SHOW.playerId;if(e){let o=e.split("_");if(o.length>1){let e="flashvars_"+o[1],r=window[e].mediaDefinitions;if(r&&r.length){let e=[],o="";r.forEach((r=>{"hls"==r.format&&"string"==typeof r.quality&&e.push({downloadUrl:r.videoUrl,qualityLabel:r.quality,quality:Number(r.quality)}),"boolean"==typeof r.defaultQuality&&r.defaultQuality&&(o=r.defaultQuality,t.downloadUrl||(t.downloadUrl=r.videoUrl))})),t["qualityList"]=e,e.length&&e.forEach((e=>{e.quality==o&&(t.downloadUrl=e.downloadUrl)}))}}}}return t}function O(t){let e={};e.poster=t.getAttribute("poster"),e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title");let o=t.parentElement.parentElement.parentElement.parentElement.parentElement;if(o&&o.classList.contains("displayed")&&"container"==o.getAttribute("data-type")){let t=o.querySelector("div[data-type='video'] img.img");t&&(e.poster=t.getAttribute("src"));let r=o.querySelector("div.displayed > div[data-type='container'] > div[data-type='container'] > div[data-type='container'] > div[data-type='text'] > div.native-text");r&&(e.title=r.textContent)}return e}function E(t){let e={};e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title");let o=t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;if(o&&o.classList.contains("_ab8w")&&o.classList.contains("_ab94")&&o.classList.contains("_ab99")&&o.classList.contains("_ab9h")&&o.classList.contains("_ab9m")&&o.classList.contains("_ab9p")&&o.classList.contains("_abcm")){let t=o.querySelector("._aatk .x1uhb9sk .x10l6tqk .x78zum5 img.x5yr21d");t&&(e.poster=t.getAttribute("src"));let r=o.querySelector("._ab9f div._ae1h._ae1i ._ae2s div._ae5q._akdn div div div");r&&r.textContent&&(e.title=r.textContent.replace("... more",""))}else if(o=t.parentNode.parentNode.parentNode.parentNode.parentNode,console.log(o.classList,"videoDetailDom.classList.contains('_a8b4') ===",o.classList.contains("_a8b4")),o&&o.classList.contains("_a8b4")&&o.classList.contains("_acjh")){let t=o.querySelector("div > div > div.x9f619.x1d8287x.xz4gly6  div.x6ikm8r.x10wlt62 span");t&&(e.title=t.textContent)}return e}function N(t){let e={};e.poster=t.getAttribute("poster")||"",e.downloadUrl=t.getAttribute("src"),e.title=t.getAttribute("title");const o=document.querySelector(".video-container .video-banner .img-box");if(o){let t=o.getAttribute("style"),r=d.matchUrlInString(t);r&&(e.poster=d.completionSourceUrl(r))}const r=document.querySelector(".video-container .stage-bottom .author-desc-wrapper .author-desc");if(r){let t=r.textContent;t&&(t=t.replace(/^展开/g,""),e.title=d.checkCharLengthAndSubStr(t))}return e}function C(i){let n={};if("activity.baidu.com"===e){const e=window.PAGE_DATA;if(e&&e.pageData&&e.pageData.remote&&e.pageData.remote.mainVideoList&&e.pageData.remote.mainVideoList.length){const i=e.pageData.remote.mainVideoList[0],l=e.pageData.remote.moreVideoList;return n["title"]=i.title,n["poster"]=i.poster,n["downloadUrl"]=i.videoUrl,l&&l.length&&l.forEach((e=>{r.size&&r.has(e.videoUrl)||o.push({title:e.title,poster:e.poster,downloadUrl:e.videoUrl,hostUrl:t})})),n}n["title"]=V();const i=document.querySelector(".stickyBlock .curVideoPlay video");return i&&(n["poster"]=i.getAttribute("poster"),n["downloadUrl"]=i.getAttribute("src")),n}if("mbd.baidu.com"===e){const t=window.jsonData;if(t&&t.curVideoMeta){const e=t.curVideoMeta;if(n=k(e),n&&Object.keys(n).length)return n}return n["title"]=V(),n["poster"]=D(),n}if("haokan.baidu.com"===e){const e=window.__PRELOADED_STATE__,o=d.queryURLParams(t,"vid"),r=i.getAttribute("src");if(r&&o&&r.indexOf(o)>-1){if(e&&e.curVideoMeta){const t=e.curVideoMeta;if(n=k(t),n&&Object.keys(n).length)return n}n["title"]=V(),n["poster"]=D()}else n["title"]=i.parentElement.parentElement.querySelector("h3.land-recommend-bottom-title")?i.parentElement.parentElement.querySelector("h3.land-recommend-bottom-title").textContent:"",n["poster"]=i.parentElement&&i.parentElement.querySelector("img.video-img")?i.parentElement.querySelector("img.video-img").getAttribute("src"):"";return n}return"pan.baidu.com"===e&&(n["title"]=V()),n}function k(t){if(!t)return{};let e={};if(e["title"]=t.title,e["poster"]=t.poster,e["downloadUrl"]=t.playurl,t.clarityUrl&&t.clarityUrl.length){let o=[];const r=t.clarityUrl;r.forEach((t=>{t.vodVideoHW;o.push({downloadUrl:t.url,qualityLabel:t.title,quality:t.key})})),e["qualityList"]=o}return e}function D(){const t=document.querySelector(".art-player-wrapper .art-video-player .art-poster");if(t){let e=t.getAttribute("style");if(e)return d.matchUrlInString(e)}const e=document.querySelector("#bdMainPlayer .art-video-player .art-poster");if(e){let t=e.getAttribute("style");if(t)return d.matchUrlInString(t)}return""}function V(){const t=document.querySelector(".adVideoPageV3 .curVideoInfo h3.videoTitle");if(t)return t.textContent;const e=document.querySelector(".video-info .video-info-title");if(e)return e.textContent;const o=document.querySelector(".video-main .video-content .video-title .video-title-left");return o?o.textContent:""}function I(t,e){let o={};const r=window.ytInitialPlayerResponse;if(r&&r.videoDetails&&r.streamingData&&(!e||e===r.videoDetails.videoId)){const e=r.videoDetails;let i=e.title?e.title:"";o["title"]=i;let n=e.thumbnail;if(n){let t=n.thumbnails;t&&t.length?o["poster"]=t.pop().url:o["poster"]=T()}else o["poster"]=T();const l=r.streamingData,a=l.formats;if(t=t||"",a&&a.length&&t.replace(/\s+/g,"")===i.replace(/\s+/g,"")){let t=[],e=new Set;a.forEach((o=>{let r=o.mimeType;r.indexOf("video/mp4")>-1&&o.url&&!e.has(o.quality)&&(e.add(o.quality),t.push({downloadUrl:o.url,qualityLabel:o.qualityLabel,quality:o.quality}))})),t&&t.length&&(o["qualityList"]=t),o["downloadUrl"]=P()}else o["title"]=t||j(),o["downloadUrl"]=P(),o["poster"]=T()}else o={},o["title"]=t||j(),o["poster"]=T(),o["downloadUrl"]=P();return o}function P(){let t=document.querySelector(".html5-video-player .html5-video-container video");return t?t.getAttribute("src"):""}function j(){const t=document.querySelector(".slim-video-metadata-header .slim-video-information-content .slim-video-information-title");if(t)return t.textContent;const e=document.querySelector("#title h1.style-scope");return e?e.textContent:""}function T(){const t=document.querySelector(".ytp-cued-thumbnail-overlay-image");if(t){let e=t.getAttribute("style");if(e)return d.matchUrlInString(e)}const e=document.querySelector(".html5-video-player .ytp-cued-thumbnail-overlay .ytp-cued-thumbnail-overlay-image");if(e){let t=e.getAttribute("style");if(t)return d.matchUrlInString(t)}const o=document.querySelector(".video-wrapper .background-style-black");if(o){let t=o.getAttribute("style");if(t)return d.matchUrlInString(t)}return""}c(!1),document.onreadystatechange=()=>{"complete"===document.readyState&&c(!0)}}()}},e={};function o(r){var i=e[r];if(void 0!==i)return i.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,o),n.exports}o.m=t,(()=>{var t=[];o.O=(e,r,i,n)=>{if(!r){var l=1/0;for(s=0;s<t.length;s++){r=t[s][0],i=t[s][1],n=t[s][2];for(var a=!0,d=0;d<r.length;d++)(!1&n||l>=n)&&Object.keys(o.O).every((t=>o.O[t](r[d])))?r.splice(d--,1):(a=!1,n<l&&(l=n));if(a){t.splice(s--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var s=t.length;s>0&&t[s-1][2]>n;s--)t[s]=t[s-1];t[s]=[r,i,n]}})(),(()=>{o.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return o.d(e,{a:e}),e}})(),(()=>{o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}})(),(()=>{o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{o.j=31})(),(()=>{var t={31:0};o.O.j=e=>0===t[e];var e=(e,r)=>{var i,n,l=r[0],a=r[1],d=r[2],c=0;if(l.some((e=>0!==t[e]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(d)var s=d(o)}for(e&&e(r);c<l.length;c++)n=l[c],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(s)},r=self["webpackChunkstay_popup"]=self["webpackChunkstay_popup"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var r=o.O(void 0,[998],(()=>o(5697)));r=o.O(r)})();